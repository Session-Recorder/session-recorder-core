{"version":3,"sources":["../node_modules/rrweb/es/rrweb/src/types.js","../node_modules/rrweb/es/rrweb/node_modules/tslib/tslib.es6.js","../node_modules/rrweb/es/rrweb/node_modules/rrweb-snapshot/es/rrweb-snapshot.js","../node_modules/rrweb/es/rrweb/src/utils.js","../node_modules/rrweb/es/rrweb/src/record/mutation.js","../node_modules/rrweb/es/rrweb/src/record/stringify.js","../node_modules/rrweb/es/rrweb/src/record/observer.js","../node_modules/rrweb/es/rrweb/src/record/index.js","../node_modules/rrweb/es/rrweb/node_modules/mitt/dist/mitt.es.js","../node_modules/rrweb/es/rrweb/src/replay/smoothscroll.js","../node_modules/rrweb/es/rrweb/src/replay/timer.js","../node_modules/rrweb/es/rrweb/node_modules/@xstate/fsm/es/index.js","../node_modules/rrweb/es/rrweb/src/replay/machine.js","../node_modules/rrweb/es/rrweb/src/replay/styles/inject-style.js","../node_modules/rrweb/es/rrweb/src/replay/index.js","../node_modules/rrweb/es/rrweb/src/index.js","../node_modules/rrweb/es/rrweb/node_modules/fflate/esm/browser.js","../node_modules/rrweb/es/rrweb/src/packer/base.js","../node_modules/rrweb/es/rrweb/src/packer/pack.js","../node_modules/rrweb/es/rrweb/src/packer/unpack.js","../node_modules/rrweb/es/rrweb/src/entries/all.js","../node_modules/axios/lib/helpers/bind.js","../node_modules/axios/lib/utils.js","../node_modules/axios/lib/helpers/buildURL.js","../node_modules/axios/lib/core/InterceptorManager.js","../node_modules/axios/lib/core/transformData.js","../node_modules/axios/lib/cancel/isCancel.js","../node_modules/axios/lib/helpers/normalizeHeaderName.js","../node_modules/axios/lib/core/enhanceError.js","../node_modules/axios/lib/core/createError.js","../node_modules/axios/lib/core/settle.js","../node_modules/axios/lib/helpers/cookies.js","../node_modules/axios/lib/helpers/isAbsoluteURL.js","../node_modules/axios/lib/helpers/combineURLs.js","../node_modules/axios/lib/core/buildFullPath.js","../node_modules/axios/lib/helpers/parseHeaders.js","../node_modules/axios/lib/helpers/isURLSameOrigin.js","../node_modules/axios/lib/adapters/xhr.js","../../../../../.nvm/versions/node/v14.15.4/lib/node_modules/parcel-bundler/node_modules/process/browser.js","../node_modules/axios/lib/defaults.js","../node_modules/axios/lib/core/dispatchRequest.js","../node_modules/axios/lib/core/mergeConfig.js","../node_modules/axios/lib/core/Axios.js","../node_modules/axios/lib/cancel/Cancel.js","../node_modules/axios/lib/cancel/CancelToken.js","../node_modules/axios/lib/helpers/spread.js","../node_modules/axios/lib/helpers/isAxiosError.js","../node_modules/axios/lib/axios.js","../node_modules/axios/index.js","index.js","../../../../../.nvm/versions/node/v14.15.4/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["EventType","IncrementalSource","MouseInteractions","MediaInteractions","ReplayerEvents","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__values","o","Symbol","iterator","m","next","value","done","TypeError","__read","r","ar","e","push","error","__spread","concat","NodeType","_id","tagNameRegex","RegExp","IGNORED_NODE","genId","getValidTagName","element","HTMLFormElement","processedTagName","tagName","toLowerCase","trim","test","getCssRulesString","rules","cssRules","Array","from","map","getCssRuleString","join","rule","isCSSImportRule","styleSheet","cssText","extractOrigin","url","origin","indexOf","split","slice","URL_IN_CSS_REF","RELATIVE_PATH","DATA_URI","absoluteToStylesheet","href","replace","quote1","path1","quote2","path2","path3","filePath","maybeQuote","stack","parts","pop","_i","parts_1","part","getAbsoluteSrcsetString","doc","attributeValue","srcsetValues","resultingSrcsetString","srcItem","trimmedSrcItem","trimLeft","trimRight","urlAndSize","absUrl","absoluteToDoc","a","createElement","isSVGElement","el","SVGElement","transformAttribute","name","location","_isBlockedElement","blockClass","blockSelector","classList","contains","forEach","className","matches","serializeNode","options","inlineStylesheet","_a","maskInputOptions","recordCanvas","nodeType","DOCUMENT_NODE","type","Document","childNodes","DOCUMENT_TYPE_NODE","DocumentType","publicId","systemId","ELEMENT_NODE","needBlock","attributes_1","_b","attributes","_c","stylesheet","styleSheets","find","rel","_cssText","sheet","innerText","textContent","repeat","checked","selectValue","parentElement","selected","rr_dataURL","toDataURL","rr_mediaState","paused","scrollLeft","rr_scrollLeft","scrollTop","rr_scrollTop","_d","getBoundingClientRect","width","height","class","rr_width","rr_height","Element","isSVG","undefined","TEXT_NODE","parentTagName","parentNode","isStyle","Text","CDATA_SECTION_NODE","CDATA","COMMENT_NODE","Comment","lowerIfExists","maybeAttr","slimDOMExcluded","sn","slimDOMOptions","comment","script","as","headFavicon","match","headMetaDescKeywords","headMetaSocial","property","headMetaRobots","headMetaHttpEquiv","headMetaAuthorship","headMetaVerification","serializeNodeWithId","skipChild","_e","preserveWhiteSpace","_serializedNode","console","warn","id","__sn","serializedNode","recordChild","headWhitespace","_f","childN","serializedChildNode","snapshot","maskAllInputs","_g","slimDOM","idNodeMap","color","date","email","month","number","range","search","tel","text","time","week","textarea","select","commentre","parse","css","lineno","column","updatePosition","str","lines","lastIndexOf","position","start","line","node","Position","whitespace","end","source","content","errorsList","msg","err","Error","reason","filename","silent","rulesList","parsingErrors","open","close","comments","charAt","atrule","re","exec","c","pos","selector","declaration","propMatch","prop","val","ret","declarations","decls","decl","keyframe","vals","values","atkeyframes","vendor","frame","frames","keyframes","atsupports","supports","style","athost","atmedia","media","atcustommedia","atpage","sel","selectors","atdocument","document","atfontface","atimport","_compileAtrule","atcharset","atnamespace","addParent","obj","parent","isNode","childParent","keys","k","isArray","v","defineProperty","configurable","writable","enumerable","tagMap","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","clippath","feblend","fecolormatrix","fecomponenttransfer","fecomposite","feconvolvematrix","fediffuselighting","fedisplacementmap","fedistantlight","fedropshadow","feflood","fefunca","fefuncb","fefuncg","fefuncr","fegaussianblur","feimage","femerge","femergenode","femorphology","feoffset","fepointlight","fespecularlighting","fespotlight","fetile","feturbulence","foreignobject","glyphref","lineargradient","radialgradient","getTagName","HOVER_SELECTOR","addHoverClass","ast","newSelector","buildNode","hackCss","implementation","createDocument","createDocumentType","node_1","createElementNS","_loop_1","startsWith","isTextarea","isRemoteOrDynamicCss","child","createTextNode","removeChild","appendChild","setAttributeNS","substring","setAttribute","image_1","src","onload","ctx","getContext","drawImage","play","pause","createCDATASection","createComment","buildNodeWithSN","childNode","visit","onVisit","walk","key","handleScroll","rebuild","visitedNode","on","fn","target","capture","passive","addEventListener","removeEventListener","mirror","getId","getNode","removeNodeFromMap","has","throttle","func","wait","timeout","previous","arg","now","Date","leading","remaining","context","args","window","clearTimeout","trailing","setTimeout","hookSetter","d","isRevoked","win","original","getOwnPropertyDescriptor","set","_this","patch","replacement","original_1","wrapped","defineProperties","__rrweb_original__","getWindowHeight","innerHeight","documentElement","clientHeight","body","getWindowWidth","innerWidth","clientWidth","isBlocked","needBlock_1","isIgnored","isAncestorRemoved","isTouchEvent","event","Boolean","changedTouches","polyfill","NodeList","DOMTokenList","needCastInSyncMode","DomContentLoaded","Load","Custom","FullSnapshot","Meta","data","MouseMove","MouseInteraction","TouchMove","MediaInteraction","ViewportResize","StyleSheetRule","Scroll","Input","TreeIndex","reset","add","mutation","parentTreeNode","indexes","get","parentId","treeNode","children","texts","tree","remove","deepRemoveFromMirror","removeIdSet","deepRemoveFromTreeIndex","_treeNode","_parentTreeNode","delete","removeNodeMutations","textMutations","attribute","attributeMutations","scroll","scrollMap","input","inputMap","flush","e_1","e_2","batchMutationData","Mutation","removes","adds","removed","filter","e_1_1","return","e_2_1","Map","mutationData","Set","queueToResolveTrees","queue","e_3","queueNodeMap","putIntoMap","nodeInTree","queueNodeTrees","queue_1","queue_1_1","nextId","nextInTree","idx","splice","parentInTree","e_3_1","iterateResolveTree","cb","isNodeInLinkedList","DoubleLinkedList","head","current","index","addNode","__ln","previousSibling","nextSibling","removeNode","moveKey","isINode","MutationBuffer","frozen","mapRemoves","movedMap","addedSet","movedSet","droppedSet","processMutations","mutations","processMutation","emit","addList","getNextId","ns","pushAdd","shift","isParentRemoved","isAncestorInSet","candidate","_node","payload","emissionCallback","oldValue","getAttribute","attributeName","item","addedNodes","genAdds","removedNodes","nodeId","deepDelete","targetId","init","freeze","unfreeze","isFrozen","addsSet","some","pathToSelector","outerHTML","path","localName","domSiblings","sibling","stringify","stringifyOptions","numOfKeysLimit","JSON","thisPos","Infinity","shouldToString","toString","Event","eventResult","key_1","eventValue","Node","HTMLElement","nodeName","stringLengthLimit","mutationBuffer","initMutationObserver","observer","MutationObserver","bind","observe","attributeOldValue","characterData","characterDataOldValue","childList","subtree","initMoveObserver","sampling","mousemove","threshold","positions","timeBaseline","wrappedCb","isTouch","totalOffset","timeOffset","evt","clientX","clientY","x","y","handlers","h","initMouseInteractionObserver","mouseInteraction","disableMap","getHandler","eventKey","Number","isNaN","endsWith","eventName","handler","initScrollObserver","scrollEl","scrollingElement","initViewportResizeObserver","last_h","last_w","updateDimension","INPUT_TAGS","lastInputValueMap","WeakMap","initInputObserver","ignoreClass","maskInputFn","eventHandler","isChecked","cbWithDedup","querySelectorAll","lastInputValue","events","propertyDescriptor","HTMLInputElement","hookProperties","HTMLSelectElement","HTMLTextAreaElement","initStyleSheetObserver","insertRule","CSSStyleSheet","ownerNode","deleteRule","initMediaInteractionObserver","mediaInteractionCb","Play","Pause","initCanvasMutationObserver","props","getOwnPropertyNames","CanvasRenderingContext2D","restoreHandler","canvas","recordArgs","HTMLCanvasElement","hookHandler","setter","props_1","props_1_1","initFontObserver","fontMap","originalFontFace","FontFace","family","descriptors","fontFace","buffer","fontSource","Uint8Array","fonts","FonFace","initLogObserver","logOptions","logger","logCount","cancelHandlers","level","includes","originalOnError_1","onerror","parseStack","trace","levelType","lengthThreshold","omitDepth","stacks","mergeHooks","hooks","mutationCb","mousemoveCb","mouseInteractionCb","scrollCb","viewportResizeCb","inputCb","styleSheetRuleCb","canvasMutationCb","fontCb","logCb","viewportResize","mediaInteaction","styleSheetRule","canvasMutation","font","log","initObservers","mutationObserver","mousemoveHandler","mouseInteractionHandler","scrollHandler","viewportResizeHandler","inputHandler","mediaInteractionHandler","styleSheetObserver","canvasMutationObserver","fontObserver","collectFonts","logObserver","disconnect","wrapEvent","timestamp","wrappedEmit","record","checkoutEveryNms","checkoutEveryNth","_maskInputOptions","_slimDOMOptions","packFn","mousemoveWait","_h","recordLog","defaultLogOptions","lastFullSnapshotEvent","incrementalSnapshotCount","isCheckout","IncrementalSnapshot","exceedCount","exceedTime","takeFullSnapshot","wasFrozen","initialOffset","left","pageXOffset","top","pageYOffset","handlers_1","init_1","CanvasMutation","Font","Log","readyState","addCustomEvent","tag","freezePage","mitt","all","create","off","w","__forceSmoothScrollPolyfill__","SCROLL_TIME","scrollTo","scrollBy","elementScroll","scrollElement","scrollIntoView","performance","isMicrosoftBrowser","userAgent","userAgentPatterns","ROUNDING_TOLERANCE","navigator","ease","Math","cos","PI","shouldBailOut","firstArg","behavior","hasScrollableSpace","axis","scrollHeight","scrollWidth","canOverflow","overflowValue","getComputedStyle","isScrollable","isScrollableY","isScrollableX","findScrollableParent","host","step","currentX","currentY","elapsed","startTime","startX","startY","method","scrollable","requestAnimationFrame","smoothScroll","scrollX","scrollY","SyntaxError","scrollableParent","parentRects","clientRects","Timer","actions","speed","raf","addAction","action","findActionIndex","addActions","sort","a1","a2","delay","lastTimestamp","self","check","doAction","liveMode","clear","cancelAnimationFrame","setSpeed","toggleLiveMode","mode","isActive","mid","floor","addDelay","baselineTime","firstOffset","firstTimestamp","NotStarted","Running","Stopped","assignment","u","changed","config","_options","initialState","initial","states","entry","transition","f","l","g","cond","exit","S","_machine","send","subscribe","unsubscribe","stop","state","status","discardPriorSnapshots","createPlayerService","getCastFn","emitter","playerMachine","playing","PAUSE","CAST_EVENT","END","ADD_EVENT","PLAY","TO_LIVE","live","castEvent","lastPlayedEvent","recordTimeOffset","timer","events_1","events_1_1","neededEvents","lastPlayedTimestamp","isSync","castFn","EventCast","neededEvents_1","neededEvents_1_1","Flush","resetLastPlayedEvent","startLive","addEvent","machineEvent","event_1","castFn_1","createSpeedService","speedMachine","normal","FAST_FORWARD","SET_SPEED","skipping","BACK_TO_NORMAL","recordSpeed","normalSpeed","restoreSpeed","SKIP_TIME_THRESHOLD","SKIP_TIME_INTERVAL","mitt$1","mitt_es","REPLAY_CONSOLE_PREFIX","defaultMouseTailConfig","duration","lineCap","lineWidth","strokeStyle","defaultLogConfig","replayLogger","Replayer","mouseTail","tailPositions","legacy_missingNodeRetryMap","imageMap","defaultConfig","root","loadTimeout","skipInactive","showWarning","showDebug","insertStyleRules","triggerFocus","UNSAFE_replayCanvas","pauseAnimation","logConfig","getConsoleLogger","handleResize","Resize","setupDom","treeIndex","fragmentParentMap","elementStateMap","entries","frag","restoreState","_j","applyScroll","_k","_l","applyInput","service","unpackFn","StateChange","player","speedService","firstMeta","firstFullsnapshot","width_1","height_1","rebuildFullSnapshot","iframe","contentWindow","setConfig","backToNormal","display","parseFloat","wrapper","insertBefore","getMetaData","firstEvent","lastEvent","endTime","totalTime","getCurrentTime","getTimeOffset","contentDocument","getElementsByTagName","Start","resume","Resume","rawEvent","Promise","resolve","then","enableInteract","pointerEvents","disableInteract","mouse","dimension","e_4","String","e_4_1","CustomEvent","e_5","applyIncremental","nextUserInteractionEvent","_event","isUserInteraction","e_5_1","skipTime","min","round","SkipStart","wrappedCastFn","finish_1","Finish","max","styleEl","injectStylesRules","FullsnapshotRebuilded","waitForStylesheetLoad","preloadAllImages","unloadSheets_1","timer_1","beforeLoadState_1","stateHandler_1","unsubscribe_1","size","LoadStylesheetEnd","LoadStylesheetStart","e_6","beforeLoadState","stateHandler","count","resolved","image","e_6_1","applyMutation","lastPosition","moveAndHover","debugNodeNotFound","Blur","blur","Focus","focus","preventScroll","Click","TouchStart","TouchEnd","offsetWidth","dispatchEvent","mediaEl_1","HTMLMediaElement","HAVE_CURRENT_DATA","message","usingVirtualParent","placeholderNode","domParent","replaceChild","styleSheet_1","_index","warnCanvasMutationFailed","logData_1","useVirtualParent","e_7","warnNodeNotFound","realParent","realTarget","legacy_missingNodeMap","nextNotInDOM","appendNode","parentInDocument","virtualParent","createDocumentFragment","storeState","firstChild","previousId","legacy_resolveMissingNode","resolveTrees","resolveTrees_1","resolveTrees_1_1","debug","e_7_1","removeAttribute","formatMessage","stackPrefix","result","e_8","rrwebOriginal","e_8_1","targetMutation","previousInMap","nextInMap","drawMouseTail","hoverElements","draw","clearRect","beginPath","moveTo","lineTo","stroke","hoveredEl","currentEl","SkipEnd","e_9","e_9_1","e_10","storedState","e_10_1","u8","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","b","j","fl","revfl","fd","revfd","rev","hMap","cd","mb","le","co","rvb","sv","r_1","flt","fdt","flm","flrm","fdm","fdrm","bits","bits16","shft","slc","subarray","inflt","dat","buf","st","sl","noBuf","noSt","cbuf","bl","nbuf","final","bt","lm","dm","lbt","dbt","tbts","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","mxa","sym","dsym","wbits","wbits16","hTree","t2","i0","i1","i2","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","cf","wfblk","out","wblk","syms","lf","df","li","bs","dlt","mlb","ddt","mdb","lclt","nlc","lcdt","ndc","lcfreq","lct","mlcb","nlcc","flen","ftlen","dtlen","ll","dl","llm","lcts","it","clct","len","dst","deo","et","dflt","lvl","plvl","pre","post","lst","opt","msk_1","prev","bs1_1","ceil","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","ml","nl","mmd","md","ti","pti","lin","din","crct","adler","dopt","mem","wbytes","zlh","lv","zlv","zlibSync","opts","unzlibSync","strToU8","latin1","TextEncoder","encode","ai","charCodeAt","strFromU8","TextDecoder","decode","fromCharCode","MARK","pack","unpack","raw","process","module","exports","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","draining","currentQueue","queueIndex","cleanUpNextTick","drainQueue","run","nextTick","Item","array","title","env","argv","version","versions","noop","addListener","once","removeListener","removeAllListeners","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","eventsBuffer","sessionRecorderConfig","websiteId","apiUrl","idenfityClient","reject","clientId","sessionStorage","getItem","axios","setItem","catch","identifySession","ip","sessionId","params","save","setInterval","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","onclose","removeErrorOverlay","overlay","createErrorOverlay","getElementById","stackTrace","innerHTML","getParents","modules","parents","dep","Function","deps","cached","cache"],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACnLA;AACA,IAAIyhC,OAAO,GAAGC,MAAM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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"index.js","sourceRoot":"../../bundler/src","sourcesContent":["var EventType;\n(function (EventType) {\n    EventType[EventType[\"DomContentLoaded\"] = 0] = \"DomContentLoaded\";\n    EventType[EventType[\"Load\"] = 1] = \"Load\";\n    EventType[EventType[\"FullSnapshot\"] = 2] = \"FullSnapshot\";\n    EventType[EventType[\"IncrementalSnapshot\"] = 3] = \"IncrementalSnapshot\";\n    EventType[EventType[\"Meta\"] = 4] = \"Meta\";\n    EventType[EventType[\"Custom\"] = 5] = \"Custom\";\n})(EventType || (EventType = {}));\nvar IncrementalSource;\n(function (IncrementalSource) {\n    IncrementalSource[IncrementalSource[\"Mutation\"] = 0] = \"Mutation\";\n    IncrementalSource[IncrementalSource[\"MouseMove\"] = 1] = \"MouseMove\";\n    IncrementalSource[IncrementalSource[\"MouseInteraction\"] = 2] = \"MouseInteraction\";\n    IncrementalSource[IncrementalSource[\"Scroll\"] = 3] = \"Scroll\";\n    IncrementalSource[IncrementalSource[\"ViewportResize\"] = 4] = \"ViewportResize\";\n    IncrementalSource[IncrementalSource[\"Input\"] = 5] = \"Input\";\n    IncrementalSource[IncrementalSource[\"TouchMove\"] = 6] = \"TouchMove\";\n    IncrementalSource[IncrementalSource[\"MediaInteraction\"] = 7] = \"MediaInteraction\";\n    IncrementalSource[IncrementalSource[\"StyleSheetRule\"] = 8] = \"StyleSheetRule\";\n    IncrementalSource[IncrementalSource[\"CanvasMutation\"] = 9] = \"CanvasMutation\";\n    IncrementalSource[IncrementalSource[\"Font\"] = 10] = \"Font\";\n    IncrementalSource[IncrementalSource[\"Log\"] = 11] = \"Log\";\n})(IncrementalSource || (IncrementalSource = {}));\nvar MouseInteractions;\n(function (MouseInteractions) {\n    MouseInteractions[MouseInteractions[\"MouseUp\"] = 0] = \"MouseUp\";\n    MouseInteractions[MouseInteractions[\"MouseDown\"] = 1] = \"MouseDown\";\n    MouseInteractions[MouseInteractions[\"Click\"] = 2] = \"Click\";\n    MouseInteractions[MouseInteractions[\"ContextMenu\"] = 3] = \"ContextMenu\";\n    MouseInteractions[MouseInteractions[\"DblClick\"] = 4] = \"DblClick\";\n    MouseInteractions[MouseInteractions[\"Focus\"] = 5] = \"Focus\";\n    MouseInteractions[MouseInteractions[\"Blur\"] = 6] = \"Blur\";\n    MouseInteractions[MouseInteractions[\"TouchStart\"] = 7] = \"TouchStart\";\n    MouseInteractions[MouseInteractions[\"TouchMove_Departed\"] = 8] = \"TouchMove_Departed\";\n    MouseInteractions[MouseInteractions[\"TouchEnd\"] = 9] = \"TouchEnd\";\n})(MouseInteractions || (MouseInteractions = {}));\nvar MediaInteractions;\n(function (MediaInteractions) {\n    MediaInteractions[MediaInteractions[\"Play\"] = 0] = \"Play\";\n    MediaInteractions[MediaInteractions[\"Pause\"] = 1] = \"Pause\";\n})(MediaInteractions || (MediaInteractions = {}));\nvar ReplayerEvents;\n(function (ReplayerEvents) {\n    ReplayerEvents[\"Start\"] = \"start\";\n    ReplayerEvents[\"Pause\"] = \"pause\";\n    ReplayerEvents[\"Resume\"] = \"resume\";\n    ReplayerEvents[\"Resize\"] = \"resize\";\n    ReplayerEvents[\"Finish\"] = \"finish\";\n    ReplayerEvents[\"FullsnapshotRebuilded\"] = \"fullsnapshot-rebuilded\";\n    ReplayerEvents[\"LoadStylesheetStart\"] = \"load-stylesheet-start\";\n    ReplayerEvents[\"LoadStylesheetEnd\"] = \"load-stylesheet-end\";\n    ReplayerEvents[\"SkipStart\"] = \"skip-start\";\n    ReplayerEvents[\"SkipEnd\"] = \"skip-end\";\n    ReplayerEvents[\"MouseInteraction\"] = \"mouse-interaction\";\n    ReplayerEvents[\"EventCast\"] = \"event-cast\";\n    ReplayerEvents[\"CustomEvent\"] = \"custom-event\";\n    ReplayerEvents[\"Flush\"] = \"flush\";\n    ReplayerEvents[\"StateChange\"] = \"state-change\";\n})(ReplayerEvents || (ReplayerEvents = {}));\n\nexport { EventType, IncrementalSource, MediaInteractions, MouseInteractions, ReplayerEvents };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\n\nexport { __assign, __read, __spread, __values };\n","var NodeType;\n(function (NodeType) {\n    NodeType[NodeType[\"Document\"] = 0] = \"Document\";\n    NodeType[NodeType[\"DocumentType\"] = 1] = \"DocumentType\";\n    NodeType[NodeType[\"Element\"] = 2] = \"Element\";\n    NodeType[NodeType[\"Text\"] = 3] = \"Text\";\n    NodeType[NodeType[\"CDATA\"] = 4] = \"CDATA\";\n    NodeType[NodeType[\"Comment\"] = 5] = \"Comment\";\n})(NodeType || (NodeType = {}));\n\nvar _id = 1;\nvar tagNameRegex = RegExp('[^a-z1-6-_]');\nvar IGNORED_NODE = -2;\nfunction genId() {\n    return _id++;\n}\nfunction getValidTagName(element) {\n    if (element instanceof HTMLFormElement) {\n        return 'form';\n    }\n    var processedTagName = element.tagName.toLowerCase().trim();\n    if (tagNameRegex.test(processedTagName)) {\n        return 'div';\n    }\n    return processedTagName;\n}\nfunction getCssRulesString(s) {\n    try {\n        var rules = s.rules || s.cssRules;\n        return rules ? Array.from(rules).map(getCssRuleString).join('') : null;\n    }\n    catch (error) {\n        return null;\n    }\n}\nfunction getCssRuleString(rule) {\n    return isCSSImportRule(rule)\n        ? getCssRulesString(rule.styleSheet) || ''\n        : rule.cssText;\n}\nfunction isCSSImportRule(rule) {\n    return 'styleSheet' in rule;\n}\nfunction extractOrigin(url) {\n    var origin;\n    if (url.indexOf('//') > -1) {\n        origin = url.split('/').slice(0, 3).join('/');\n    }\n    else {\n        origin = url.split('/')[0];\n    }\n    origin = origin.split('?')[0];\n    return origin;\n}\nvar URL_IN_CSS_REF = /url\\((?:(')([^']*)'|(\")([^\"]*)\"|([^)]*))\\)/gm;\nvar RELATIVE_PATH = /^(?!www\\.|(?:http|ftp)s?:\\/\\/|[A-Za-z]:\\\\|\\/\\/|#).*/;\nvar DATA_URI = /^(data:)([^,]*),(.*)/i;\nfunction absoluteToStylesheet(cssText, href) {\n    return (cssText || '').replace(URL_IN_CSS_REF, function (origin, quote1, path1, quote2, path2, path3) {\n        var filePath = path1 || path2 || path3;\n        var maybeQuote = quote1 || quote2 || '';\n        if (!filePath) {\n            return origin;\n        }\n        if (!RELATIVE_PATH.test(filePath)) {\n            return \"url(\" + maybeQuote + filePath + maybeQuote + \")\";\n        }\n        if (DATA_URI.test(filePath)) {\n            return \"url(\" + maybeQuote + filePath + maybeQuote + \")\";\n        }\n        if (filePath[0] === '/') {\n            return \"url(\" + maybeQuote + (extractOrigin(href) + filePath) + maybeQuote + \")\";\n        }\n        var stack = href.split('/');\n        var parts = filePath.split('/');\n        stack.pop();\n        for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\n            var part = parts_1[_i];\n            if (part === '.') {\n                continue;\n            }\n            else if (part === '..') {\n                stack.pop();\n            }\n            else {\n                stack.push(part);\n            }\n        }\n        return \"url(\" + maybeQuote + stack.join('/') + maybeQuote + \")\";\n    });\n}\nfunction getAbsoluteSrcsetString(doc, attributeValue) {\n    if (attributeValue.trim() === '') {\n        return attributeValue;\n    }\n    var srcsetValues = attributeValue.split(',');\n    var resultingSrcsetString = srcsetValues\n        .map(function (srcItem) {\n        var trimmedSrcItem = srcItem.trimLeft().trimRight();\n        var urlAndSize = trimmedSrcItem.split(' ');\n        if (urlAndSize.length === 2) {\n            var absUrl = absoluteToDoc(doc, urlAndSize[0]);\n            return absUrl + \" \" + urlAndSize[1];\n        }\n        else if (urlAndSize.length === 1) {\n            var absUrl = absoluteToDoc(doc, urlAndSize[0]);\n            return \"\" + absUrl;\n        }\n        return '';\n    })\n        .join(', ');\n    return resultingSrcsetString;\n}\nfunction absoluteToDoc(doc, attributeValue) {\n    if (!attributeValue || attributeValue.trim() === '') {\n        return attributeValue;\n    }\n    var a = doc.createElement('a');\n    a.href = attributeValue;\n    return a.href;\n}\nfunction isSVGElement(el) {\n    return el.tagName === 'svg' || el instanceof SVGElement;\n}\nfunction transformAttribute(doc, name, value) {\n    if (name === 'src' || ((name === 'href' || name === 'xlink:href') && value)) {\n        return absoluteToDoc(doc, value);\n    }\n    else if (name === 'srcset' && value) {\n        return getAbsoluteSrcsetString(doc, value);\n    }\n    else if (name === 'style' && value) {\n        return absoluteToStylesheet(value, location.href);\n    }\n    else {\n        return value;\n    }\n}\nfunction _isBlockedElement(element, blockClass, blockSelector) {\n    if (typeof blockClass === 'string') {\n        if (element.classList.contains(blockClass)) {\n            return true;\n        }\n    }\n    else {\n        element.classList.forEach(function (className) {\n            if (blockClass.test(className)) {\n                return true;\n            }\n        });\n    }\n    if (blockSelector) {\n        return element.matches(blockSelector);\n    }\n    return false;\n}\nfunction serializeNode(n, options) {\n    var doc = options.doc, blockClass = options.blockClass, blockSelector = options.blockSelector, inlineStylesheet = options.inlineStylesheet, _a = options.maskInputOptions, maskInputOptions = _a === void 0 ? {} : _a, recordCanvas = options.recordCanvas;\n    switch (n.nodeType) {\n        case n.DOCUMENT_NODE:\n            return {\n                type: NodeType.Document,\n                childNodes: [],\n            };\n        case n.DOCUMENT_TYPE_NODE:\n            return {\n                type: NodeType.DocumentType,\n                name: n.name,\n                publicId: n.publicId,\n                systemId: n.systemId,\n            };\n        case n.ELEMENT_NODE:\n            var needBlock = _isBlockedElement(n, blockClass, blockSelector);\n            var tagName = getValidTagName(n);\n            var attributes_1 = {};\n            for (var _i = 0, _b = Array.from(n.attributes); _i < _b.length; _i++) {\n                var _c = _b[_i], name = _c.name, value = _c.value;\n                attributes_1[name] = transformAttribute(doc, name, value);\n            }\n            if (tagName === 'link' && inlineStylesheet) {\n                var stylesheet = Array.from(doc.styleSheets).find(function (s) {\n                    return s.href === n.href;\n                });\n                var cssText = getCssRulesString(stylesheet);\n                if (cssText) {\n                    delete attributes_1.rel;\n                    delete attributes_1.href;\n                    attributes_1._cssText = absoluteToStylesheet(cssText, stylesheet.href);\n                }\n            }\n            if (tagName === 'style' &&\n                n.sheet &&\n                !(n.innerText ||\n                    n.textContent ||\n                    '').trim().length) {\n                var cssText = getCssRulesString(n.sheet);\n                if (cssText) {\n                    attributes_1._cssText = absoluteToStylesheet(cssText, location.href);\n                }\n            }\n            if (tagName === 'input' ||\n                tagName === 'textarea' ||\n                tagName === 'select') {\n                var value = n.value;\n                if (attributes_1.type !== 'radio' &&\n                    attributes_1.type !== 'checkbox' &&\n                    attributes_1.type !== 'submit' &&\n                    attributes_1.type !== 'button' &&\n                    value) {\n                    attributes_1.value =\n                        maskInputOptions[attributes_1.type] ||\n                            maskInputOptions[tagName]\n                            ? '*'.repeat(value.length)\n                            : value;\n                }\n                else if (n.checked) {\n                    attributes_1.checked = n.checked;\n                }\n            }\n            if (tagName === 'option') {\n                var selectValue = n.parentElement;\n                if (attributes_1.value === selectValue.value) {\n                    attributes_1.selected = n.selected;\n                }\n            }\n            if (tagName === 'canvas' && recordCanvas) {\n                attributes_1.rr_dataURL = n.toDataURL();\n            }\n            if (tagName === 'audio' || tagName === 'video') {\n                attributes_1.rr_mediaState = n.paused\n                    ? 'paused'\n                    : 'played';\n            }\n            if (n.scrollLeft) {\n                attributes_1.rr_scrollLeft = n.scrollLeft;\n            }\n            if (n.scrollTop) {\n                attributes_1.rr_scrollTop = n.scrollTop;\n            }\n            if (needBlock) {\n                var _d = n.getBoundingClientRect(), width = _d.width, height = _d.height;\n                attributes_1 = {\n                    class: attributes_1.class,\n                    rr_width: width + \"px\",\n                    rr_height: height + \"px\",\n                };\n            }\n            return {\n                type: NodeType.Element,\n                tagName: tagName,\n                attributes: attributes_1,\n                childNodes: [],\n                isSVG: isSVGElement(n) || undefined,\n                needBlock: needBlock,\n            };\n        case n.TEXT_NODE:\n            var parentTagName = n.parentNode && n.parentNode.tagName;\n            var textContent = n.textContent;\n            var isStyle = parentTagName === 'STYLE' ? true : undefined;\n            if (isStyle && textContent) {\n                textContent = absoluteToStylesheet(textContent, location.href);\n            }\n            if (parentTagName === 'SCRIPT') {\n                textContent = 'SCRIPT_PLACEHOLDER';\n            }\n            return {\n                type: NodeType.Text,\n                textContent: textContent || '',\n                isStyle: isStyle,\n            };\n        case n.CDATA_SECTION_NODE:\n            return {\n                type: NodeType.CDATA,\n                textContent: '',\n            };\n        case n.COMMENT_NODE:\n            return {\n                type: NodeType.Comment,\n                textContent: n.textContent || '',\n            };\n        default:\n            return false;\n    }\n}\nfunction lowerIfExists(maybeAttr) {\n    if (maybeAttr === undefined) {\n        return '';\n    }\n    else {\n        return maybeAttr.toLowerCase();\n    }\n}\nfunction slimDOMExcluded(sn, slimDOMOptions) {\n    if (slimDOMOptions.comment && sn.type === NodeType.Comment) {\n        return true;\n    }\n    else if (sn.type === NodeType.Element) {\n        if (slimDOMOptions.script &&\n            (sn.tagName === 'script' ||\n                (sn.tagName === 'link' &&\n                    sn.attributes.rel === 'preload' &&\n                    sn.attributes.as === 'script'))) {\n            return true;\n        }\n        else if (slimDOMOptions.headFavicon &&\n            ((sn.tagName === 'link' && sn.attributes.rel === 'shortcut icon') ||\n                (sn.tagName === 'meta' &&\n                    (lowerIfExists(sn.attributes.name).match(/^msapplication-tile(image|color)$/) ||\n                        lowerIfExists(sn.attributes.name) === 'application-name' ||\n                        lowerIfExists(sn.attributes.rel) === 'icon' ||\n                        lowerIfExists(sn.attributes.rel) === 'apple-touch-icon' ||\n                        lowerIfExists(sn.attributes.rel) === 'shortcut icon')))) {\n            return true;\n        }\n        else if (sn.tagName === 'meta') {\n            if (slimDOMOptions.headMetaDescKeywords &&\n                lowerIfExists(sn.attributes.name).match(/^description|keywords$/)) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaSocial &&\n                (lowerIfExists(sn.attributes.property).match(/^(og|twitter|fb):/) ||\n                    lowerIfExists(sn.attributes.name).match(/^(og|twitter):/) ||\n                    lowerIfExists(sn.attributes.name) === 'pinterest')) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaRobots &&\n                (lowerIfExists(sn.attributes.name) === 'robots' ||\n                    lowerIfExists(sn.attributes.name) === 'googlebot' ||\n                    lowerIfExists(sn.attributes.name) === 'bingbot')) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaHttpEquiv &&\n                sn.attributes['http-equiv'] !== undefined) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaAuthorship &&\n                (lowerIfExists(sn.attributes.name) === 'author' ||\n                    lowerIfExists(sn.attributes.name) === 'generator' ||\n                    lowerIfExists(sn.attributes.name) === 'framework' ||\n                    lowerIfExists(sn.attributes.name) === 'publisher' ||\n                    lowerIfExists(sn.attributes.name) === 'progid' ||\n                    lowerIfExists(sn.attributes.property).match(/^article:/) ||\n                    lowerIfExists(sn.attributes.property).match(/^product:/))) {\n                return true;\n            }\n            else if (slimDOMOptions.headMetaVerification &&\n                (lowerIfExists(sn.attributes.name) === 'google-site-verification' ||\n                    lowerIfExists(sn.attributes.name) === 'yandex-verification' ||\n                    lowerIfExists(sn.attributes.name) === 'csrf-token' ||\n                    lowerIfExists(sn.attributes.name) === 'p:domain_verify' ||\n                    lowerIfExists(sn.attributes.name) === 'verify-v1' ||\n                    lowerIfExists(sn.attributes.name) === 'verification' ||\n                    lowerIfExists(sn.attributes.name) === 'shopify-checkout-api-token')) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nfunction serializeNodeWithId(n, options) {\n    var doc = options.doc, map = options.map, blockClass = options.blockClass, blockSelector = options.blockSelector, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.inlineStylesheet, inlineStylesheet = _b === void 0 ? true : _b, _c = options.maskInputOptions, maskInputOptions = _c === void 0 ? {} : _c, slimDOMOptions = options.slimDOMOptions, _d = options.recordCanvas, recordCanvas = _d === void 0 ? false : _d;\n    var _e = options.preserveWhiteSpace, preserveWhiteSpace = _e === void 0 ? true : _e;\n    var _serializedNode = serializeNode(n, {\n        doc: doc,\n        blockClass: blockClass,\n        blockSelector: blockSelector,\n        inlineStylesheet: inlineStylesheet,\n        maskInputOptions: maskInputOptions,\n        recordCanvas: recordCanvas,\n    });\n    if (!_serializedNode) {\n        console.warn(n, 'not serialized');\n        return null;\n    }\n    var id;\n    if ('__sn' in n) {\n        id = n.__sn.id;\n    }\n    else if (slimDOMExcluded(_serializedNode, slimDOMOptions) ||\n        (!preserveWhiteSpace &&\n            _serializedNode.type === NodeType.Text &&\n            !_serializedNode.isStyle &&\n            !_serializedNode.textContent.replace(/^\\s+|\\s+$/gm, '').length)) {\n        id = IGNORED_NODE;\n    }\n    else {\n        id = genId();\n    }\n    var serializedNode = Object.assign(_serializedNode, { id: id });\n    n.__sn = serializedNode;\n    if (id === IGNORED_NODE) {\n        return null;\n    }\n    map[id] = n;\n    var recordChild = !skipChild;\n    if (serializedNode.type === NodeType.Element) {\n        recordChild = recordChild && !serializedNode.needBlock;\n        delete serializedNode.needBlock;\n    }\n    if ((serializedNode.type === NodeType.Document ||\n        serializedNode.type === NodeType.Element) &&\n        recordChild) {\n        if (slimDOMOptions.headWhitespace &&\n            _serializedNode.type === NodeType.Element &&\n            _serializedNode.tagName === 'head') {\n            preserveWhiteSpace = false;\n        }\n        for (var _i = 0, _f = Array.from(n.childNodes); _i < _f.length; _i++) {\n            var childN = _f[_i];\n            var serializedChildNode = serializeNodeWithId(childN, {\n                doc: doc,\n                map: map,\n                blockClass: blockClass,\n                blockSelector: blockSelector,\n                skipChild: skipChild,\n                inlineStylesheet: inlineStylesheet,\n                maskInputOptions: maskInputOptions,\n                slimDOMOptions: slimDOMOptions,\n                recordCanvas: recordCanvas,\n                preserveWhiteSpace: preserveWhiteSpace,\n            });\n            if (serializedChildNode) {\n                serializedNode.childNodes.push(serializedChildNode);\n            }\n        }\n    }\n    return serializedNode;\n}\nfunction snapshot(n, options) {\n    var _a = options || {}, _b = _a.blockClass, blockClass = _b === void 0 ? 'rr-block' : _b, _c = _a.inlineStylesheet, inlineStylesheet = _c === void 0 ? true : _c, _d = _a.recordCanvas, recordCanvas = _d === void 0 ? false : _d, _e = _a.blockSelector, blockSelector = _e === void 0 ? null : _e, _f = _a.maskAllInputs, maskAllInputs = _f === void 0 ? false : _f, _g = _a.slimDOM, slimDOM = _g === void 0 ? false : _g;\n    var idNodeMap = {};\n    var maskInputOptions = maskAllInputs === true\n        ? {\n            color: true,\n            date: true,\n            'datetime-local': true,\n            email: true,\n            month: true,\n            number: true,\n            range: true,\n            search: true,\n            tel: true,\n            text: true,\n            time: true,\n            url: true,\n            week: true,\n            textarea: true,\n            select: true,\n        }\n        : maskAllInputs === false\n            ? {}\n            : maskAllInputs;\n    var slimDOMOptions = slimDOM === true || slimDOM === 'all'\n        ?\n            {\n                script: true,\n                comment: true,\n                headFavicon: true,\n                headWhitespace: true,\n                headMetaDescKeywords: slimDOM === 'all',\n                headMetaSocial: true,\n                headMetaRobots: true,\n                headMetaHttpEquiv: true,\n                headMetaAuthorship: true,\n                headMetaVerification: true,\n            }\n        : slimDOM === false\n            ? {}\n            : slimDOM;\n    return [\n        serializeNodeWithId(n, {\n            doc: n,\n            map: idNodeMap,\n            blockClass: blockClass,\n            blockSelector: blockSelector,\n            skipChild: false,\n            inlineStylesheet: inlineStylesheet,\n            maskInputOptions: maskInputOptions,\n            slimDOMOptions: slimDOMOptions,\n            recordCanvas: recordCanvas,\n        }),\n        idNodeMap,\n    ];\n}\n\nvar commentre = /\\/\\*[^*]*\\*+([^/*][^*]*\\*+)*\\//g;\nfunction parse(css, options) {\n    if (options === void 0) { options = {}; }\n    var lineno = 1;\n    var column = 1;\n    function updatePosition(str) {\n        var lines = str.match(/\\n/g);\n        if (lines) {\n            lineno += lines.length;\n        }\n        var i = str.lastIndexOf('\\n');\n        column = i === -1 ? column + str.length : str.length - i;\n    }\n    function position() {\n        var start = { line: lineno, column: column };\n        return function (node) {\n            node.position = new Position(start);\n            whitespace();\n            return node;\n        };\n    }\n    var Position = (function () {\n        function Position(start) {\n            this.start = start;\n            this.end = { line: lineno, column: column };\n            this.source = options.source;\n        }\n        return Position;\n    }());\n    Position.prototype.content = css;\n    var errorsList = [];\n    function error(msg) {\n        var err = new Error(options.source + ':' + lineno + ':' + column + ': ' + msg);\n        err.reason = msg;\n        err.filename = options.source;\n        err.line = lineno;\n        err.column = column;\n        err.source = css;\n        if (options.silent) {\n            errorsList.push(err);\n        }\n        else {\n            throw err;\n        }\n    }\n    function stylesheet() {\n        var rulesList = rules();\n        return {\n            type: 'stylesheet',\n            stylesheet: {\n                source: options.source,\n                rules: rulesList,\n                parsingErrors: errorsList,\n            },\n        };\n    }\n    function open() {\n        return match(/^{\\s*/);\n    }\n    function close() {\n        return match(/^}/);\n    }\n    function rules() {\n        var node;\n        var rules = [];\n        whitespace();\n        comments(rules);\n        while (css.length && css.charAt(0) !== '}' && (node = atrule() || rule())) {\n            if (node !== false) {\n                rules.push(node);\n                comments(rules);\n            }\n        }\n        return rules;\n    }\n    function match(re) {\n        var m = re.exec(css);\n        if (!m) {\n            return;\n        }\n        var str = m[0];\n        updatePosition(str);\n        css = css.slice(str.length);\n        return m;\n    }\n    function whitespace() {\n        match(/^\\s*/);\n    }\n    function comments(rules) {\n        if (rules === void 0) { rules = []; }\n        var c;\n        while ((c = comment())) {\n            if (c !== false) {\n                rules.push(c);\n            }\n            c = comment();\n        }\n        return rules;\n    }\n    function comment() {\n        var pos = position();\n        if ('/' !== css.charAt(0) || '*' !== css.charAt(1)) {\n            return;\n        }\n        var i = 2;\n        while ('' !== css.charAt(i) &&\n            ('*' !== css.charAt(i) || '/' !== css.charAt(i + 1))) {\n            ++i;\n        }\n        i += 2;\n        if ('' === css.charAt(i - 1)) {\n            return error('End of comment missing');\n        }\n        var str = css.slice(2, i - 2);\n        column += 2;\n        updatePosition(str);\n        css = css.slice(i);\n        column += 2;\n        return pos({\n            type: 'comment',\n            comment: str,\n        });\n    }\n    function selector() {\n        var m = match(/^([^{]+)/);\n        if (!m) {\n            return;\n        }\n        return trim(m[0])\n            .replace(/\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*\\/+/g, '')\n            .replace(/\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'/g, function (m) {\n            return m.replace(/,/g, '\\u200C');\n        })\n            .split(/\\s*(?![^(]*\\)),\\s*/)\n            .map(function (s) {\n            return s.replace(/\\u200C/g, ',');\n        });\n    }\n    function declaration() {\n        var pos = position();\n        var propMatch = match(/^(\\*?[-#\\/\\*\\\\\\w]+(\\[[0-9a-z_-]+\\])?)\\s*/);\n        if (!propMatch) {\n            return;\n        }\n        var prop = trim(propMatch[0]);\n        if (!match(/^:\\s*/)) {\n            return error(\"property missing ':'\");\n        }\n        var val = match(/^((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/);\n        var ret = pos({\n            type: 'declaration',\n            property: prop.replace(commentre, ''),\n            value: val ? trim(val[0]).replace(commentre, '') : '',\n        });\n        match(/^[;\\s]*/);\n        return ret;\n    }\n    function declarations() {\n        var decls = [];\n        if (!open()) {\n            return error(\"missing '{'\");\n        }\n        comments(decls);\n        var decl;\n        while ((decl = declaration())) {\n            if (decl !== false) {\n                decls.push(decl);\n                comments(decls);\n            }\n            decl = declaration();\n        }\n        if (!close()) {\n            return error(\"missing '}'\");\n        }\n        return decls;\n    }\n    function keyframe() {\n        var m;\n        var vals = [];\n        var pos = position();\n        while ((m = match(/^((\\d+\\.\\d+|\\.\\d+|\\d+)%?|[a-z]+)\\s*/))) {\n            vals.push(m[1]);\n            match(/^,\\s*/);\n        }\n        if (!vals.length) {\n            return;\n        }\n        return pos({\n            type: 'keyframe',\n            values: vals,\n            declarations: declarations(),\n        });\n    }\n    function atkeyframes() {\n        var pos = position();\n        var m = match(/^@([-\\w]+)?keyframes\\s*/);\n        if (!m) {\n            return;\n        }\n        var vendor = m[1];\n        m = match(/^([-\\w]+)\\s*/);\n        if (!m) {\n            return error('@keyframes missing name');\n        }\n        var name = m[1];\n        if (!open()) {\n            return error(\"@keyframes missing '{'\");\n        }\n        var frame;\n        var frames = comments();\n        while ((frame = keyframe())) {\n            frames.push(frame);\n            frames = frames.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@keyframes missing '}'\");\n        }\n        return pos({\n            type: 'keyframes',\n            name: name,\n            vendor: vendor,\n            keyframes: frames,\n        });\n    }\n    function atsupports() {\n        var pos = position();\n        var m = match(/^@supports *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var supports = trim(m[1]);\n        if (!open()) {\n            return error(\"@supports missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@supports missing '}'\");\n        }\n        return pos({\n            type: 'supports',\n            supports: supports,\n            rules: style,\n        });\n    }\n    function athost() {\n        var pos = position();\n        var m = match(/^@host\\s*/);\n        if (!m) {\n            return;\n        }\n        if (!open()) {\n            return error(\"@host missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@host missing '}'\");\n        }\n        return pos({\n            type: 'host',\n            rules: style,\n        });\n    }\n    function atmedia() {\n        var pos = position();\n        var m = match(/^@media *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var media = trim(m[1]);\n        if (!open()) {\n            return error(\"@media missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@media missing '}'\");\n        }\n        return pos({\n            type: 'media',\n            media: media,\n            rules: style,\n        });\n    }\n    function atcustommedia() {\n        var pos = position();\n        var m = match(/^@custom-media\\s+(--[^\\s]+)\\s*([^{;]+);/);\n        if (!m) {\n            return;\n        }\n        return pos({\n            type: 'custom-media',\n            name: trim(m[1]),\n            media: trim(m[2]),\n        });\n    }\n    function atpage() {\n        var pos = position();\n        var m = match(/^@page */);\n        if (!m) {\n            return;\n        }\n        var sel = selector() || [];\n        if (!open()) {\n            return error(\"@page missing '{'\");\n        }\n        var decls = comments();\n        var decl;\n        while ((decl = declaration())) {\n            decls.push(decl);\n            decls = decls.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@page missing '}'\");\n        }\n        return pos({\n            type: 'page',\n            selectors: sel,\n            declarations: decls,\n        });\n    }\n    function atdocument() {\n        var pos = position();\n        var m = match(/^@([-\\w]+)?document *([^{]+)/);\n        if (!m) {\n            return;\n        }\n        var vendor = trim(m[1]);\n        var doc = trim(m[2]);\n        if (!open()) {\n            return error(\"@document missing '{'\");\n        }\n        var style = comments().concat(rules());\n        if (!close()) {\n            return error(\"@document missing '}'\");\n        }\n        return pos({\n            type: 'document',\n            document: doc,\n            vendor: vendor,\n            rules: style,\n        });\n    }\n    function atfontface() {\n        var pos = position();\n        var m = match(/^@font-face\\s*/);\n        if (!m) {\n            return;\n        }\n        if (!open()) {\n            return error(\"@font-face missing '{'\");\n        }\n        var decls = comments();\n        var decl;\n        while ((decl = declaration())) {\n            decls.push(decl);\n            decls = decls.concat(comments());\n        }\n        if (!close()) {\n            return error(\"@font-face missing '}'\");\n        }\n        return pos({\n            type: 'font-face',\n            declarations: decls,\n        });\n    }\n    var atimport = _compileAtrule('import');\n    var atcharset = _compileAtrule('charset');\n    var atnamespace = _compileAtrule('namespace');\n    function _compileAtrule(name) {\n        var re = new RegExp('^@' + name + '\\\\s*([^;]+);');\n        return function () {\n            var pos = position();\n            var m = match(re);\n            if (!m) {\n                return;\n            }\n            var ret = { type: name };\n            ret[name] = m[1].trim();\n            return pos(ret);\n        };\n    }\n    function atrule() {\n        if (css[0] !== '@') {\n            return;\n        }\n        return (atkeyframes() ||\n            atmedia() ||\n            atcustommedia() ||\n            atsupports() ||\n            atimport() ||\n            atcharset() ||\n            atnamespace() ||\n            atdocument() ||\n            atpage() ||\n            athost() ||\n            atfontface());\n    }\n    function rule() {\n        var pos = position();\n        var sel = selector();\n        if (!sel) {\n            return error('selector missing');\n        }\n        comments();\n        return pos({\n            type: 'rule',\n            selectors: sel,\n            declarations: declarations(),\n        });\n    }\n    return addParent(stylesheet());\n}\nfunction trim(str) {\n    return str ? str.replace(/^\\s+|\\s+$/g, '') : '';\n}\nfunction addParent(obj, parent) {\n    var isNode = obj && typeof obj.type === 'string';\n    var childParent = isNode ? obj : parent;\n    for (var _i = 0, _a = Object.keys(obj); _i < _a.length; _i++) {\n        var k = _a[_i];\n        var value = obj[k];\n        if (Array.isArray(value)) {\n            value.forEach(function (v) {\n                addParent(v, childParent);\n            });\n        }\n        else if (value && typeof value === 'object') {\n            addParent(value, childParent);\n        }\n    }\n    if (isNode) {\n        Object.defineProperty(obj, 'parent', {\n            configurable: true,\n            writable: true,\n            enumerable: false,\n            value: parent || null,\n        });\n    }\n    return obj;\n}\n\nvar tagMap = {\n    script: 'noscript',\n    altglyph: 'altGlyph',\n    altglyphdef: 'altGlyphDef',\n    altglyphitem: 'altGlyphItem',\n    animatecolor: 'animateColor',\n    animatemotion: 'animateMotion',\n    animatetransform: 'animateTransform',\n    clippath: 'clipPath',\n    feblend: 'feBlend',\n    fecolormatrix: 'feColorMatrix',\n    fecomponenttransfer: 'feComponentTransfer',\n    fecomposite: 'feComposite',\n    feconvolvematrix: 'feConvolveMatrix',\n    fediffuselighting: 'feDiffuseLighting',\n    fedisplacementmap: 'feDisplacementMap',\n    fedistantlight: 'feDistantLight',\n    fedropshadow: 'feDropShadow',\n    feflood: 'feFlood',\n    fefunca: 'feFuncA',\n    fefuncb: 'feFuncB',\n    fefuncg: 'feFuncG',\n    fefuncr: 'feFuncR',\n    fegaussianblur: 'feGaussianBlur',\n    feimage: 'feImage',\n    femerge: 'feMerge',\n    femergenode: 'feMergeNode',\n    femorphology: 'feMorphology',\n    feoffset: 'feOffset',\n    fepointlight: 'fePointLight',\n    fespecularlighting: 'feSpecularLighting',\n    fespotlight: 'feSpotLight',\n    fetile: 'feTile',\n    feturbulence: 'feTurbulence',\n    foreignobject: 'foreignObject',\n    glyphref: 'glyphRef',\n    lineargradient: 'linearGradient',\n    radialgradient: 'radialGradient',\n};\nfunction getTagName(n) {\n    var tagName = tagMap[n.tagName] ? tagMap[n.tagName] : n.tagName;\n    if (tagName === 'link' && n.attributes._cssText) {\n        tagName = 'style';\n    }\n    return tagName;\n}\nvar HOVER_SELECTOR = /([^\\\\]):hover/g;\nfunction addHoverClass(cssText) {\n    var ast = parse(cssText, { silent: true });\n    if (!ast.stylesheet) {\n        return cssText;\n    }\n    ast.stylesheet.rules.forEach(function (rule) {\n        if ('selectors' in rule) {\n            (rule.selectors || []).forEach(function (selector) {\n                if (HOVER_SELECTOR.test(selector)) {\n                    var newSelector = selector.replace(HOVER_SELECTOR, '$1.\\\\:hover');\n                    cssText = cssText.replace(selector, selector + \", \" + newSelector);\n                }\n            });\n        }\n    });\n    return cssText;\n}\nfunction buildNode(n, options) {\n    var doc = options.doc, hackCss = options.hackCss;\n    switch (n.type) {\n        case NodeType.Document:\n            return doc.implementation.createDocument(null, '', null);\n        case NodeType.DocumentType:\n            return doc.implementation.createDocumentType(n.name || 'html', n.publicId, n.systemId);\n        case NodeType.Element:\n            var tagName = getTagName(n);\n            var node_1;\n            if (n.isSVG) {\n                node_1 = doc.createElementNS('http://www.w3.org/2000/svg', tagName);\n            }\n            else {\n                node_1 = doc.createElement(tagName);\n            }\n            var _loop_1 = function (name) {\n                if (!n.attributes.hasOwnProperty(name)) {\n                    return \"continue\";\n                }\n                var value = n.attributes[name];\n                value =\n                    typeof value === 'boolean' || typeof value === 'number' ? '' : value;\n                if (!name.startsWith('rr_')) {\n                    var isTextarea = tagName === 'textarea' && name === 'value';\n                    var isRemoteOrDynamicCss = tagName === 'style' && name === '_cssText';\n                    if (isRemoteOrDynamicCss && hackCss) {\n                        value = addHoverClass(value);\n                    }\n                    if (isTextarea || isRemoteOrDynamicCss) {\n                        var child = doc.createTextNode(value);\n                        for (var _i = 0, _a = Array.from(node_1.childNodes); _i < _a.length; _i++) {\n                            var c = _a[_i];\n                            if (c.nodeType === node_1.TEXT_NODE) {\n                                node_1.removeChild(c);\n                            }\n                        }\n                        node_1.appendChild(child);\n                        return \"continue\";\n                    }\n                    if (tagName === 'iframe' && name === 'src') {\n                        return \"continue\";\n                    }\n                    try {\n                        if (n.isSVG && name === 'xlink:href') {\n                            node_1.setAttributeNS('http://www.w3.org/1999/xlink', name, value);\n                        }\n                        else if (name === 'onload' ||\n                            name === 'onclick' ||\n                            name.substring(0, 7) === 'onmouse') {\n                            node_1.setAttribute('_' + name, value);\n                        }\n                        else {\n                            node_1.setAttribute(name, value);\n                        }\n                    }\n                    catch (error) {\n                    }\n                }\n                else {\n                    if (tagName === 'canvas' && name === 'rr_dataURL') {\n                        var image_1 = document.createElement('img');\n                        image_1.src = value;\n                        image_1.onload = function () {\n                            var ctx = node_1.getContext('2d');\n                            if (ctx) {\n                                ctx.drawImage(image_1, 0, 0, image_1.width, image_1.height);\n                            }\n                        };\n                    }\n                    if (name === 'rr_width') {\n                        node_1.style.width = value;\n                    }\n                    if (name === 'rr_height') {\n                        node_1.style.height = value;\n                    }\n                    if (name === 'rr_mediaState') {\n                        switch (value) {\n                            case 'played':\n                                node_1.play();\n                            case 'paused':\n                                node_1.pause();\n                                break;\n                        }\n                    }\n                }\n            };\n            for (var name in n.attributes) {\n                _loop_1(name);\n            }\n            return node_1;\n        case NodeType.Text:\n            return doc.createTextNode(n.isStyle && hackCss ? addHoverClass(n.textContent) : n.textContent);\n        case NodeType.CDATA:\n            return doc.createCDATASection(n.textContent);\n        case NodeType.Comment:\n            return doc.createComment(n.textContent);\n        default:\n            return null;\n    }\n}\nfunction buildNodeWithSN(n, options) {\n    var doc = options.doc, map = options.map, _a = options.skipChild, skipChild = _a === void 0 ? false : _a, _b = options.hackCss, hackCss = _b === void 0 ? true : _b;\n    var node = buildNode(n, { doc: doc, hackCss: hackCss });\n    if (!node) {\n        return null;\n    }\n    if (n.type === NodeType.Document) {\n        doc.close();\n        doc.open();\n        node = doc;\n    }\n    node.__sn = n;\n    map[n.id] = node;\n    if ((n.type === NodeType.Document || n.type === NodeType.Element) &&\n        !skipChild) {\n        for (var _i = 0, _c = n.childNodes; _i < _c.length; _i++) {\n            var childN = _c[_i];\n            var childNode = buildNodeWithSN(childN, {\n                doc: doc,\n                map: map,\n                skipChild: false,\n                hackCss: hackCss,\n            });\n            if (!childNode) {\n                console.warn('Failed to rebuild', childN);\n            }\n            else {\n                node.appendChild(childNode);\n            }\n        }\n    }\n    return node;\n}\nfunction visit(idNodeMap, onVisit) {\n    function walk(node) {\n        onVisit(node);\n    }\n    for (var key in idNodeMap) {\n        if (idNodeMap[key]) {\n            walk(idNodeMap[key]);\n        }\n    }\n}\nfunction handleScroll(node) {\n    var n = node.__sn;\n    if (n.type !== NodeType.Element) {\n        return;\n    }\n    var el = node;\n    for (var name in n.attributes) {\n        if (!(n.attributes.hasOwnProperty(name) && name.startsWith('rr_'))) {\n            continue;\n        }\n        var value = n.attributes[name];\n        if (name === 'rr_scrollLeft') {\n            el.scrollLeft = value;\n        }\n        if (name === 'rr_scrollTop') {\n            el.scrollTop = value;\n        }\n    }\n}\nfunction rebuild(n, options) {\n    var doc = options.doc, onVisit = options.onVisit, _a = options.hackCss, hackCss = _a === void 0 ? true : _a;\n    var idNodeMap = {};\n    var node = buildNodeWithSN(n, {\n        doc: doc,\n        map: idNodeMap,\n        skipChild: false,\n        hackCss: hackCss,\n    });\n    visit(idNodeMap, function (visitedNode) {\n        if (onVisit) {\n            onVisit(visitedNode);\n        }\n        handleScroll(visitedNode);\n    });\n    return [node, idNodeMap];\n}\n\nexport { IGNORED_NODE, NodeType, addHoverClass, buildNodeWithSN, rebuild, serializeNodeWithId, snapshot, transformAttribute };\n","import { __values } from '../node_modules/tslib/tslib.es6.js';\nimport { IGNORED_NODE } from '../node_modules/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { EventType, IncrementalSource } from './types.js';\n\nfunction on(type, fn, target) {\n    if (target === void 0) { target = document; }\n    var options = { capture: true, passive: true };\n    target.addEventListener(type, fn, options);\n    return function () { return target.removeEventListener(type, fn, options); };\n}\nvar mirror = {\n    map: {},\n    getId: function (n) {\n        if (!n.__sn) {\n            return -1;\n        }\n        return n.__sn.id;\n    },\n    getNode: function (id) {\n        return mirror.map[id] || null;\n    },\n    removeNodeFromMap: function (n) {\n        var id = n.__sn && n.__sn.id;\n        delete mirror.map[id];\n        if (n.childNodes) {\n            n.childNodes.forEach(function (child) {\n                return mirror.removeNodeFromMap(child);\n            });\n        }\n    },\n    has: function (id) {\n        return mirror.map.hasOwnProperty(id);\n    },\n};\nfunction throttle(func, wait, options) {\n    if (options === void 0) { options = {}; }\n    var timeout = null;\n    var previous = 0;\n    return function (arg) {\n        var now = Date.now();\n        if (!previous && options.leading === false) {\n            previous = now;\n        }\n        var remaining = wait - (now - previous);\n        var context = this;\n        var args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                window.clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            func.apply(context, args);\n        }\n        else if (!timeout && options.trailing !== false) {\n            timeout = window.setTimeout(function () {\n                previous = options.leading === false ? 0 : Date.now();\n                timeout = null;\n                func.apply(context, args);\n            }, remaining);\n        }\n    };\n}\nfunction hookSetter(target, key, d, isRevoked, win) {\n    if (win === void 0) { win = window; }\n    var original = win.Object.getOwnPropertyDescriptor(target, key);\n    win.Object.defineProperty(target, key, isRevoked\n        ? d\n        : {\n            set: function (value) {\n                var _this = this;\n                setTimeout(function () {\n                    d.set.call(_this, value);\n                }, 0);\n                if (original && original.set) {\n                    original.set.call(this, value);\n                }\n            },\n        });\n    return function () { return hookSetter(target, key, original || {}, true); };\n}\nfunction patch(source, name, replacement) {\n    try {\n        if (!(name in source)) {\n            return function () { };\n        }\n        var original_1 = source[name];\n        var wrapped = replacement(original_1);\n        if (typeof wrapped === 'function') {\n            wrapped.prototype = wrapped.prototype || {};\n            Object.defineProperties(wrapped, {\n                __rrweb_original__: {\n                    enumerable: false,\n                    value: original_1,\n                },\n            });\n        }\n        source[name] = wrapped;\n        return function () {\n            source[name] = original_1;\n        };\n    }\n    catch (_a) {\n        return function () { };\n    }\n}\nfunction getWindowHeight() {\n    return (window.innerHeight ||\n        (document.documentElement && document.documentElement.clientHeight) ||\n        (document.body && document.body.clientHeight));\n}\nfunction getWindowWidth() {\n    return (window.innerWidth ||\n        (document.documentElement && document.documentElement.clientWidth) ||\n        (document.body && document.body.clientWidth));\n}\nfunction isBlocked(node, blockClass) {\n    if (!node) {\n        return false;\n    }\n    if (node.nodeType === node.ELEMENT_NODE) {\n        var needBlock_1 = false;\n        if (typeof blockClass === 'string') {\n            needBlock_1 = node.classList.contains(blockClass);\n        }\n        else {\n            node.classList.forEach(function (className) {\n                if (blockClass.test(className)) {\n                    needBlock_1 = true;\n                }\n            });\n        }\n        return needBlock_1 || isBlocked(node.parentNode, blockClass);\n    }\n    if (node.nodeType === node.TEXT_NODE) {\n        return isBlocked(node.parentNode, blockClass);\n    }\n    return isBlocked(node.parentNode, blockClass);\n}\nfunction isIgnored(n) {\n    if ('__sn' in n) {\n        return n.__sn.id === IGNORED_NODE;\n    }\n    return false;\n}\nfunction isAncestorRemoved(target) {\n    var id = mirror.getId(target);\n    if (!mirror.has(id)) {\n        return true;\n    }\n    if (target.parentNode &&\n        target.parentNode.nodeType === target.DOCUMENT_NODE) {\n        return false;\n    }\n    if (!target.parentNode) {\n        return true;\n    }\n    return isAncestorRemoved(target.parentNode);\n}\nfunction isTouchEvent(event) {\n    return Boolean(event.changedTouches);\n}\nfunction polyfill(win) {\n    if (win === void 0) { win = window; }\n    if ('NodeList' in win && !win.NodeList.prototype.forEach) {\n        win.NodeList.prototype.forEach = Array.prototype\n            .forEach;\n    }\n    if ('DOMTokenList' in win && !win.DOMTokenList.prototype.forEach) {\n        win.DOMTokenList.prototype.forEach = Array.prototype\n            .forEach;\n    }\n}\nfunction needCastInSyncMode(event) {\n    switch (event.type) {\n        case EventType.DomContentLoaded:\n        case EventType.Load:\n        case EventType.Custom:\n            return false;\n        case EventType.FullSnapshot:\n        case EventType.Meta:\n            return true;\n    }\n    switch (event.data.source) {\n        case IncrementalSource.MouseMove:\n        case IncrementalSource.MouseInteraction:\n        case IncrementalSource.TouchMove:\n        case IncrementalSource.MediaInteraction:\n            return false;\n        case IncrementalSource.ViewportResize:\n        case IncrementalSource.StyleSheetRule:\n        case IncrementalSource.Scroll:\n        case IncrementalSource.Input:\n            return true;\n    }\n    return true;\n}\nvar TreeIndex = (function () {\n    function TreeIndex() {\n        this.reset();\n    }\n    TreeIndex.prototype.add = function (mutation) {\n        var parentTreeNode = this.indexes.get(mutation.parentId);\n        var treeNode = {\n            id: mutation.node.id,\n            mutation: mutation,\n            children: [],\n            texts: [],\n            attributes: [],\n        };\n        if (!parentTreeNode) {\n            this.tree[treeNode.id] = treeNode;\n        }\n        else {\n            treeNode.parent = parentTreeNode;\n            parentTreeNode.children[treeNode.id] = treeNode;\n        }\n        this.indexes.set(treeNode.id, treeNode);\n    };\n    TreeIndex.prototype.remove = function (mutation) {\n        var _this = this;\n        var parentTreeNode = this.indexes.get(mutation.parentId);\n        var treeNode = this.indexes.get(mutation.id);\n        var deepRemoveFromMirror = function (id) {\n            _this.removeIdSet.add(id);\n            var node = mirror.getNode(id);\n            node === null || node === void 0 ? void 0 : node.childNodes.forEach(function (childNode) {\n                if ('__sn' in childNode) {\n                    deepRemoveFromMirror(childNode.__sn.id);\n                }\n            });\n        };\n        var deepRemoveFromTreeIndex = function (node) {\n            _this.removeIdSet.add(node.id);\n            Object.values(node.children).forEach(function (n) { return deepRemoveFromTreeIndex(n); });\n            var _treeNode = _this.indexes.get(node.id);\n            if (_treeNode) {\n                var _parentTreeNode = _treeNode.parent;\n                if (_parentTreeNode) {\n                    delete _treeNode.parent;\n                    delete _parentTreeNode.children[_treeNode.id];\n                    _this.indexes.delete(mutation.id);\n                }\n            }\n        };\n        if (!treeNode) {\n            this.removeNodeMutations.push(mutation);\n            deepRemoveFromMirror(mutation.id);\n        }\n        else if (!parentTreeNode) {\n            delete this.tree[treeNode.id];\n            this.indexes.delete(treeNode.id);\n            deepRemoveFromTreeIndex(treeNode);\n        }\n        else {\n            delete treeNode.parent;\n            delete parentTreeNode.children[treeNode.id];\n            this.indexes.delete(mutation.id);\n            deepRemoveFromTreeIndex(treeNode);\n        }\n    };\n    TreeIndex.prototype.text = function (mutation) {\n        var treeNode = this.indexes.get(mutation.id);\n        if (treeNode) {\n            treeNode.texts.push(mutation);\n        }\n        else {\n            this.textMutations.push(mutation);\n        }\n    };\n    TreeIndex.prototype.attribute = function (mutation) {\n        var treeNode = this.indexes.get(mutation.id);\n        if (treeNode) {\n            treeNode.attributes.push(mutation);\n        }\n        else {\n            this.attributeMutations.push(mutation);\n        }\n    };\n    TreeIndex.prototype.scroll = function (d) {\n        this.scrollMap.set(d.id, d);\n    };\n    TreeIndex.prototype.input = function (d) {\n        this.inputMap.set(d.id, d);\n    };\n    TreeIndex.prototype.flush = function () {\n        var e_1, _a, e_2, _b;\n        var _this = this;\n        var _c = this, tree = _c.tree, removeNodeMutations = _c.removeNodeMutations, textMutations = _c.textMutations, attributeMutations = _c.attributeMutations;\n        var batchMutationData = {\n            source: IncrementalSource.Mutation,\n            removes: removeNodeMutations,\n            texts: textMutations,\n            attributes: attributeMutations,\n            adds: [],\n        };\n        var walk = function (treeNode, removed) {\n            if (removed) {\n                _this.removeIdSet.add(treeNode.id);\n            }\n            batchMutationData.texts = batchMutationData.texts\n                .concat(removed ? [] : treeNode.texts)\n                .filter(function (m) { return !_this.removeIdSet.has(m.id); });\n            batchMutationData.attributes = batchMutationData.attributes\n                .concat(removed ? [] : treeNode.attributes)\n                .filter(function (m) { return !_this.removeIdSet.has(m.id); });\n            if (!_this.removeIdSet.has(treeNode.id) &&\n                !_this.removeIdSet.has(treeNode.mutation.parentId) &&\n                !removed) {\n                batchMutationData.adds.push(treeNode.mutation);\n                if (treeNode.children) {\n                    Object.values(treeNode.children).forEach(function (n) { return walk(n, false); });\n                }\n            }\n            else {\n                Object.values(treeNode.children).forEach(function (n) { return walk(n, true); });\n            }\n        };\n        Object.values(tree).forEach(function (n) { return walk(n, false); });\n        try {\n            for (var _d = __values(this.scrollMap.keys()), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var id = _e.value;\n                if (this.removeIdSet.has(id)) {\n                    this.scrollMap.delete(id);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        try {\n            for (var _f = __values(this.inputMap.keys()), _g = _f.next(); !_g.done; _g = _f.next()) {\n                var id = _g.value;\n                if (this.removeIdSet.has(id)) {\n                    this.inputMap.delete(id);\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        var scrollMap = new Map(this.scrollMap);\n        var inputMap = new Map(this.inputMap);\n        this.reset();\n        return {\n            mutationData: batchMutationData,\n            scrollMap: scrollMap,\n            inputMap: inputMap,\n        };\n    };\n    TreeIndex.prototype.reset = function () {\n        this.tree = [];\n        this.indexes = new Map();\n        this.removeNodeMutations = [];\n        this.textMutations = [];\n        this.attributeMutations = [];\n        this.removeIdSet = new Set();\n        this.scrollMap = new Map();\n        this.inputMap = new Map();\n    };\n    return TreeIndex;\n}());\nfunction queueToResolveTrees(queue) {\n    var e_3, _a;\n    var queueNodeMap = {};\n    var putIntoMap = function (m, parent) {\n        var nodeInTree = {\n            value: m,\n            parent: parent,\n            children: [],\n        };\n        queueNodeMap[m.node.id] = nodeInTree;\n        return nodeInTree;\n    };\n    var queueNodeTrees = [];\n    try {\n        for (var queue_1 = __values(queue), queue_1_1 = queue_1.next(); !queue_1_1.done; queue_1_1 = queue_1.next()) {\n            var mutation = queue_1_1.value;\n            var nextId = mutation.nextId, parentId = mutation.parentId;\n            if (nextId && nextId in queueNodeMap) {\n                var nextInTree = queueNodeMap[nextId];\n                if (nextInTree.parent) {\n                    var idx = nextInTree.parent.children.indexOf(nextInTree);\n                    nextInTree.parent.children.splice(idx, 0, putIntoMap(mutation, nextInTree.parent));\n                }\n                else {\n                    var idx = queueNodeTrees.indexOf(nextInTree);\n                    queueNodeTrees.splice(idx, 0, putIntoMap(mutation, null));\n                }\n                continue;\n            }\n            if (parentId in queueNodeMap) {\n                var parentInTree = queueNodeMap[parentId];\n                parentInTree.children.push(putIntoMap(mutation, parentInTree));\n                continue;\n            }\n            queueNodeTrees.push(putIntoMap(mutation, null));\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (queue_1_1 && !queue_1_1.done && (_a = queue_1.return)) _a.call(queue_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return queueNodeTrees;\n}\nfunction iterateResolveTree(tree, cb) {\n    cb(tree.value);\n    for (var i = tree.children.length - 1; i >= 0; i--) {\n        iterateResolveTree(tree.children[i], cb);\n    }\n}\n\nexport { TreeIndex, getWindowHeight, getWindowWidth, hookSetter, isAncestorRemoved, isBlocked, isIgnored, isTouchEvent, iterateResolveTree, mirror, needCastInSyncMode, on, patch, polyfill, queueToResolveTrees, throttle };\n","import { __values } from '../../node_modules/tslib/tslib.es6.js';\nimport { transformAttribute, IGNORED_NODE, serializeNodeWithId } from '../../node_modules/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { mirror, isIgnored, isBlocked, isAncestorRemoved } from '../utils.js';\n\nfunction isNodeInLinkedList(n) {\n    return '__ln' in n;\n}\nvar DoubleLinkedList = (function () {\n    function DoubleLinkedList() {\n        this.length = 0;\n        this.head = null;\n    }\n    DoubleLinkedList.prototype.get = function (position) {\n        if (position >= this.length) {\n            throw new Error('Position outside of list range');\n        }\n        var current = this.head;\n        for (var index = 0; index < position; index++) {\n            current = (current === null || current === void 0 ? void 0 : current.next) || null;\n        }\n        return current;\n    };\n    DoubleLinkedList.prototype.addNode = function (n) {\n        var node = {\n            value: n,\n            previous: null,\n            next: null,\n        };\n        n.__ln = node;\n        if (n.previousSibling && isNodeInLinkedList(n.previousSibling)) {\n            var current = n.previousSibling.__ln.next;\n            node.next = current;\n            node.previous = n.previousSibling.__ln;\n            n.previousSibling.__ln.next = node;\n            if (current) {\n                current.previous = node;\n            }\n        }\n        else if (n.nextSibling && isNodeInLinkedList(n.nextSibling)) {\n            var current = n.nextSibling.__ln.previous;\n            node.previous = current;\n            node.next = n.nextSibling.__ln;\n            n.nextSibling.__ln.previous = node;\n            if (current) {\n                current.next = node;\n            }\n        }\n        else {\n            if (this.head) {\n                this.head.previous = node;\n            }\n            node.next = this.head;\n            this.head = node;\n        }\n        this.length++;\n    };\n    DoubleLinkedList.prototype.removeNode = function (n) {\n        var current = n.__ln;\n        if (!this.head) {\n            return;\n        }\n        if (!current.previous) {\n            this.head = current.next;\n            if (this.head) {\n                this.head.previous = null;\n            }\n        }\n        else {\n            current.previous.next = current.next;\n            if (current.next) {\n                current.next.previous = current.previous;\n            }\n        }\n        if (n.__ln) {\n            delete n.__ln;\n        }\n        this.length--;\n    };\n    return DoubleLinkedList;\n}());\nvar moveKey = function (id, parentId) { return id + \"@\" + parentId; };\nfunction isINode(n) {\n    return '__sn' in n;\n}\nvar MutationBuffer = (function () {\n    function MutationBuffer() {\n        var _this = this;\n        this.frozen = false;\n        this.texts = [];\n        this.attributes = [];\n        this.removes = [];\n        this.mapRemoves = [];\n        this.movedMap = {};\n        this.addedSet = new Set();\n        this.movedSet = new Set();\n        this.droppedSet = new Set();\n        this.processMutations = function (mutations) {\n            mutations.forEach(_this.processMutation);\n            if (!_this.frozen) {\n                _this.emit();\n            }\n        };\n        this.emit = function () {\n            var e_1, _a, e_2, _b;\n            var adds = [];\n            var addList = new DoubleLinkedList();\n            var getNextId = function (n) {\n                var ns = n;\n                var nextId = IGNORED_NODE;\n                while (nextId === IGNORED_NODE) {\n                    ns = ns && ns.nextSibling;\n                    nextId = ns && mirror.getId(ns);\n                }\n                if (nextId === -1 && isBlocked(n.nextSibling, _this.blockClass)) {\n                    nextId = null;\n                }\n                return nextId;\n            };\n            var pushAdd = function (n) {\n                if (!n.parentNode || !document.contains(n)) {\n                    return;\n                }\n                var parentId = mirror.getId(n.parentNode);\n                var nextId = getNextId(n);\n                if (parentId === -1 || nextId === -1) {\n                    return addList.addNode(n);\n                }\n                var sn = serializeNodeWithId(n, {\n                    doc: document,\n                    map: mirror.map,\n                    blockClass: _this.blockClass,\n                    blockSelector: _this.blockSelector,\n                    skipChild: true,\n                    inlineStylesheet: _this.inlineStylesheet,\n                    maskInputOptions: _this.maskInputOptions,\n                    slimDOMOptions: _this.slimDOMOptions,\n                    recordCanvas: _this.recordCanvas,\n                });\n                if (sn) {\n                    adds.push({\n                        parentId: parentId,\n                        nextId: nextId,\n                        node: sn,\n                    });\n                }\n            };\n            while (_this.mapRemoves.length) {\n                mirror.removeNodeFromMap(_this.mapRemoves.shift());\n            }\n            try {\n                for (var _c = __values(_this.movedSet), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var n = _d.value;\n                    if (isParentRemoved(_this.removes, n) &&\n                        !_this.movedSet.has(n.parentNode)) {\n                        continue;\n                    }\n                    pushAdd(n);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            try {\n                for (var _e = __values(_this.addedSet), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var n = _f.value;\n                    if (!isAncestorInSet(_this.droppedSet, n) &&\n                        !isParentRemoved(_this.removes, n)) {\n                        pushAdd(n);\n                    }\n                    else if (isAncestorInSet(_this.movedSet, n)) {\n                        pushAdd(n);\n                    }\n                    else {\n                        _this.droppedSet.add(n);\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            var candidate = null;\n            while (addList.length) {\n                var node = null;\n                if (candidate) {\n                    var parentId = mirror.getId(candidate.value.parentNode);\n                    var nextId = getNextId(candidate.value);\n                    if (parentId !== -1 && nextId !== -1) {\n                        node = candidate;\n                    }\n                }\n                if (!node) {\n                    for (var index = addList.length - 1; index >= 0; index--) {\n                        var _node = addList.get(index);\n                        var parentId = mirror.getId(_node.value.parentNode);\n                        var nextId = getNextId(_node.value);\n                        if (parentId !== -1 && nextId !== -1) {\n                            node = _node;\n                            break;\n                        }\n                    }\n                }\n                if (!node) {\n                    while (addList.head) {\n                        addList.removeNode(addList.head.value);\n                    }\n                    break;\n                }\n                candidate = node.previous;\n                addList.removeNode(node.value);\n                pushAdd(node.value);\n            }\n            var payload = {\n                texts: _this.texts\n                    .map(function (text) { return ({\n                    id: mirror.getId(text.node),\n                    value: text.value,\n                }); })\n                    .filter(function (text) { return mirror.has(text.id); }),\n                attributes: _this.attributes\n                    .map(function (attribute) { return ({\n                    id: mirror.getId(attribute.node),\n                    attributes: attribute.attributes,\n                }); })\n                    .filter(function (attribute) { return mirror.has(attribute.id); }),\n                removes: _this.removes,\n                adds: adds,\n            };\n            if (!payload.texts.length &&\n                !payload.attributes.length &&\n                !payload.removes.length &&\n                !payload.adds.length) {\n                return;\n            }\n            _this.texts = [];\n            _this.attributes = [];\n            _this.removes = [];\n            _this.addedSet = new Set();\n            _this.movedSet = new Set();\n            _this.droppedSet = new Set();\n            _this.movedMap = {};\n            _this.emissionCallback(payload);\n        };\n        this.processMutation = function (m) {\n            if (isIgnored(m.target)) {\n                return;\n            }\n            switch (m.type) {\n                case 'characterData': {\n                    var value = m.target.textContent;\n                    if (!isBlocked(m.target, _this.blockClass) && value !== m.oldValue) {\n                        _this.texts.push({\n                            value: value,\n                            node: m.target,\n                        });\n                    }\n                    break;\n                }\n                case 'attributes': {\n                    var value = m.target.getAttribute(m.attributeName);\n                    if (isBlocked(m.target, _this.blockClass) || value === m.oldValue) {\n                        return;\n                    }\n                    var item = _this.attributes.find(function (a) { return a.node === m.target; });\n                    if (!item) {\n                        item = {\n                            node: m.target,\n                            attributes: {},\n                        };\n                        _this.attributes.push(item);\n                    }\n                    item.attributes[m.attributeName] = transformAttribute(document, m.attributeName, value);\n                    break;\n                }\n                case 'childList': {\n                    m.addedNodes.forEach(function (n) { return _this.genAdds(n, m.target); });\n                    m.removedNodes.forEach(function (n) {\n                        var nodeId = mirror.getId(n);\n                        var parentId = mirror.getId(m.target);\n                        if (isBlocked(n, _this.blockClass) ||\n                            isBlocked(m.target, _this.blockClass) ||\n                            isIgnored(n)) {\n                            return;\n                        }\n                        if (_this.addedSet.has(n)) {\n                            deepDelete(_this.addedSet, n);\n                            _this.droppedSet.add(n);\n                        }\n                        else if (_this.addedSet.has(m.target) && nodeId === -1) ;\n                        else if (isAncestorRemoved(m.target)) ;\n                        else if (_this.movedSet.has(n) &&\n                            _this.movedMap[moveKey(nodeId, parentId)]) {\n                            deepDelete(_this.movedSet, n);\n                        }\n                        else {\n                            _this.removes.push({\n                                parentId: parentId,\n                                id: nodeId,\n                            });\n                        }\n                        _this.mapRemoves.push(n);\n                    });\n                    break;\n                }\n            }\n        };\n        this.genAdds = function (n, target) {\n            if (isBlocked(n, _this.blockClass)) {\n                return;\n            }\n            if (target && isBlocked(target, _this.blockClass)) {\n                return;\n            }\n            if (isINode(n)) {\n                if (isIgnored(n)) {\n                    return;\n                }\n                _this.movedSet.add(n);\n                var targetId = null;\n                if (target && isINode(target)) {\n                    targetId = target.__sn.id;\n                }\n                if (targetId) {\n                    _this.movedMap[moveKey(n.__sn.id, targetId)] = true;\n                }\n            }\n            else {\n                _this.addedSet.add(n);\n                _this.droppedSet.delete(n);\n            }\n            n.childNodes.forEach(function (childN) { return _this.genAdds(childN); });\n        };\n    }\n    MutationBuffer.prototype.init = function (cb, blockClass, blockSelector, inlineStylesheet, maskInputOptions, recordCanvas, slimDOMOptions) {\n        this.blockClass = blockClass;\n        this.blockSelector = blockSelector;\n        this.inlineStylesheet = inlineStylesheet;\n        this.maskInputOptions = maskInputOptions;\n        this.recordCanvas = recordCanvas;\n        this.slimDOMOptions = slimDOMOptions;\n        this.emissionCallback = cb;\n    };\n    MutationBuffer.prototype.freeze = function () {\n        this.frozen = true;\n    };\n    MutationBuffer.prototype.unfreeze = function () {\n        this.frozen = false;\n    };\n    MutationBuffer.prototype.isFrozen = function () {\n        return this.frozen;\n    };\n    return MutationBuffer;\n}());\nfunction deepDelete(addsSet, n) {\n    addsSet.delete(n);\n    n.childNodes.forEach(function (childN) { return deepDelete(addsSet, childN); });\n}\nfunction isParentRemoved(removes, n) {\n    var parentNode = n.parentNode;\n    if (!parentNode) {\n        return false;\n    }\n    var parentId = mirror.getId(parentNode);\n    if (removes.some(function (r) { return r.id === parentId; })) {\n        return true;\n    }\n    return isParentRemoved(removes, parentNode);\n}\nfunction isAncestorInSet(set, n) {\n    var parentNode = n.parentNode;\n    if (!parentNode) {\n        return false;\n    }\n    if (set.has(parentNode)) {\n        return true;\n    }\n    return isAncestorInSet(set, parentNode);\n}\n\nexport default MutationBuffer;\n","function pathToSelector(node) {\n    if (!node || !node.outerHTML) {\n        return '';\n    }\n    var path = '';\n    while (node.parentElement) {\n        var name = node.localName;\n        if (!name)\n            break;\n        name = name.toLowerCase();\n        var parent = node.parentElement;\n        var domSiblings = [];\n        if (parent.children && parent.children.length > 0) {\n            for (var i = 0; i < parent.children.length; i++) {\n                var sibling = parent.children[i];\n                if (sibling.localName && sibling.localName.toLowerCase) {\n                    if (sibling.localName.toLowerCase() === name) {\n                        domSiblings.push(sibling);\n                    }\n                }\n            }\n        }\n        if (domSiblings.length > 1) {\n            name += ':eq(' + domSiblings.indexOf(node) + ')';\n        }\n        path = name + (path ? '>' + path : '');\n        node = parent;\n    }\n    return path;\n}\nfunction stringify(obj, stringifyOptions) {\n    var options = {\n        numOfKeysLimit: 50,\n    };\n    Object.assign(options, stringifyOptions);\n    var stack = [], keys = [];\n    return JSON.stringify(obj, function (key, value) {\n        if (stack.length > 0) {\n            var thisPos = stack.indexOf(this);\n            ~thisPos ? stack.splice(thisPos + 1) : stack.push(this);\n            ~thisPos ? keys.splice(thisPos, Infinity, key) : keys.push(key);\n            if (~stack.indexOf(value)) {\n                if (stack[0] === value)\n                    value = '[Circular ~]';\n                else\n                    value =\n                        '[Circular ~.' +\n                            keys.slice(0, stack.indexOf(value)).join('.') +\n                            ']';\n            }\n        }\n        else\n            stack.push(value);\n        if (value === null || value === undefined)\n            return value;\n        if (shouldToString(value)) {\n            return toString(value);\n        }\n        if (value instanceof Event) {\n            var eventResult = {};\n            for (var key_1 in value) {\n                var eventValue = value[key_1];\n                if (Array.isArray(eventValue))\n                    eventResult[key_1] = pathToSelector(eventValue.length ? eventValue[0] : null);\n                else\n                    eventResult[key_1] = eventValue;\n            }\n            return eventResult;\n        }\n        else if (value instanceof Node) {\n            if (value instanceof HTMLElement)\n                return value ? value.outerHTML : '';\n            return value.nodeName;\n        }\n        return value;\n    });\n    function shouldToString(obj) {\n        if (typeof obj === 'object' &&\n            Object.keys(obj).length > options.numOfKeysLimit)\n            return true;\n        if (typeof obj === 'function')\n            return true;\n        return false;\n    }\n    function toString(obj) {\n        var str = obj.toString();\n        if (options.stringLengthLimit && str.length > options.stringLengthLimit) {\n            str = str.slice(0, options.stringLengthLimit) + \"...\";\n        }\n        return str;\n    }\n}\n\nexport { stringify };\n","import { __spread, __values, __assign } from '../../node_modules/tslib/tslib.es6.js';\nimport { IncrementalSource, MouseInteractions, MediaInteractions } from '../types.js';\nimport { on, throttle, isTouchEvent, mirror, isBlocked, getWindowHeight, getWindowWidth, hookSetter, patch } from '../utils.js';\nimport MutationBuffer from './mutation.js';\nimport { stringify } from './stringify.js';\n\nvar mutationBuffer = new MutationBuffer();\nfunction initMutationObserver(cb, blockClass, blockSelector, inlineStylesheet, maskInputOptions, recordCanvas, slimDOMOptions) {\n    mutationBuffer.init(cb, blockClass, blockSelector, inlineStylesheet, maskInputOptions, recordCanvas, slimDOMOptions);\n    var observer = new MutationObserver(mutationBuffer.processMutations.bind(mutationBuffer));\n    observer.observe(document, {\n        attributes: true,\n        attributeOldValue: true,\n        characterData: true,\n        characterDataOldValue: true,\n        childList: true,\n        subtree: true,\n    });\n    return observer;\n}\nfunction initMoveObserver(cb, sampling) {\n    if (sampling.mousemove === false) {\n        return function () { };\n    }\n    var threshold = typeof sampling.mousemove === 'number' ? sampling.mousemove : 50;\n    var positions = [];\n    var timeBaseline;\n    var wrappedCb = throttle(function (isTouch) {\n        var totalOffset = Date.now() - timeBaseline;\n        cb(positions.map(function (p) {\n            p.timeOffset -= totalOffset;\n            return p;\n        }), isTouch ? IncrementalSource.TouchMove : IncrementalSource.MouseMove);\n        positions = [];\n        timeBaseline = null;\n    }, 500);\n    var updatePosition = throttle(function (evt) {\n        var target = evt.target;\n        var _a = isTouchEvent(evt)\n            ? evt.changedTouches[0]\n            : evt, clientX = _a.clientX, clientY = _a.clientY;\n        if (!timeBaseline) {\n            timeBaseline = Date.now();\n        }\n        positions.push({\n            x: clientX,\n            y: clientY,\n            id: mirror.getId(target),\n            timeOffset: Date.now() - timeBaseline,\n        });\n        wrappedCb(isTouchEvent(evt));\n    }, threshold, {\n        trailing: false,\n    });\n    var handlers = [\n        on('mousemove', updatePosition),\n        on('touchmove', updatePosition),\n    ];\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initMouseInteractionObserver(cb, blockClass, sampling) {\n    if (sampling.mouseInteraction === false) {\n        return function () { };\n    }\n    var disableMap = sampling.mouseInteraction === true ||\n        sampling.mouseInteraction === undefined\n        ? {}\n        : sampling.mouseInteraction;\n    var handlers = [];\n    var getHandler = function (eventKey) {\n        return function (event) {\n            if (isBlocked(event.target, blockClass)) {\n                return;\n            }\n            var id = mirror.getId(event.target);\n            var _a = isTouchEvent(event)\n                ? event.changedTouches[0]\n                : event, clientX = _a.clientX, clientY = _a.clientY;\n            cb({\n                type: MouseInteractions[eventKey],\n                id: id,\n                x: clientX,\n                y: clientY,\n            });\n        };\n    };\n    Object.keys(MouseInteractions)\n        .filter(function (key) {\n        return Number.isNaN(Number(key)) &&\n            !key.endsWith('_Departed') &&\n            disableMap[key] !== false;\n    })\n        .forEach(function (eventKey) {\n        var eventName = eventKey.toLowerCase();\n        var handler = getHandler(eventKey);\n        handlers.push(on(eventName, handler));\n    });\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initScrollObserver(cb, blockClass, sampling) {\n    var updatePosition = throttle(function (evt) {\n        if (!evt.target || isBlocked(evt.target, blockClass)) {\n            return;\n        }\n        var id = mirror.getId(evt.target);\n        if (evt.target === document) {\n            var scrollEl = (document.scrollingElement || document.documentElement);\n            cb({\n                id: id,\n                x: scrollEl.scrollLeft,\n                y: scrollEl.scrollTop,\n            });\n        }\n        else {\n            cb({\n                id: id,\n                x: evt.target.scrollLeft,\n                y: evt.target.scrollTop,\n            });\n        }\n    }, sampling.scroll || 100);\n    return on('scroll', updatePosition);\n}\nfunction initViewportResizeObserver(cb) {\n    var last_h = -1;\n    var last_w = -1;\n    var updateDimension = throttle(function () {\n        var height = getWindowHeight();\n        var width = getWindowWidth();\n        if (last_h !== height || last_w != width) {\n            cb({\n                width: Number(width),\n                height: Number(height),\n            });\n            last_h = height;\n            last_w = width;\n        }\n    }, 200);\n    return on('resize', updateDimension, window);\n}\nvar INPUT_TAGS = ['INPUT', 'TEXTAREA', 'SELECT'];\nvar lastInputValueMap = new WeakMap();\nfunction initInputObserver(cb, blockClass, ignoreClass, maskInputOptions, maskInputFn, sampling) {\n    function eventHandler(event) {\n        var target = event.target;\n        if (!target ||\n            !target.tagName ||\n            INPUT_TAGS.indexOf(target.tagName) < 0 ||\n            isBlocked(target, blockClass)) {\n            return;\n        }\n        var type = target.type;\n        if (type === 'password' ||\n            target.classList.contains(ignoreClass)) {\n            return;\n        }\n        var text = target.value;\n        var isChecked = false;\n        if (type === 'radio' || type === 'checkbox') {\n            isChecked = target.checked;\n        }\n        else if (maskInputOptions[target.tagName.toLowerCase()] ||\n            maskInputOptions[type]) {\n            if (maskInputFn) {\n                text = maskInputFn(text);\n            }\n            else {\n                text = '*'.repeat(text.length);\n            }\n        }\n        cbWithDedup(target, { text: text, isChecked: isChecked });\n        var name = target.name;\n        if (type === 'radio' && name && isChecked) {\n            document\n                .querySelectorAll(\"input[type=\\\"radio\\\"][name=\\\"\" + name + \"\\\"]\")\n                .forEach(function (el) {\n                if (el !== target) {\n                    cbWithDedup(el, {\n                        text: el.value,\n                        isChecked: !isChecked,\n                    });\n                }\n            });\n        }\n    }\n    function cbWithDedup(target, v) {\n        var lastInputValue = lastInputValueMap.get(target);\n        if (!lastInputValue ||\n            lastInputValue.text !== v.text ||\n            lastInputValue.isChecked !== v.isChecked) {\n            lastInputValueMap.set(target, v);\n            var id = mirror.getId(target);\n            cb(__assign(__assign({}, v), { id: id }));\n        }\n    }\n    var events = sampling.input === 'last' ? ['change'] : ['input', 'change'];\n    var handlers = events.map(function (eventName) { return on(eventName, eventHandler); });\n    var propertyDescriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, 'value');\n    var hookProperties = [\n        [HTMLInputElement.prototype, 'value'],\n        [HTMLInputElement.prototype, 'checked'],\n        [HTMLSelectElement.prototype, 'value'],\n        [HTMLTextAreaElement.prototype, 'value'],\n        [HTMLSelectElement.prototype, 'selectedIndex'],\n    ];\n    if (propertyDescriptor && propertyDescriptor.set) {\n        handlers.push.apply(handlers, __spread(hookProperties.map(function (p) {\n            return hookSetter(p[0], p[1], {\n                set: function () {\n                    eventHandler({ target: this });\n                },\n            });\n        })));\n    }\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initStyleSheetObserver(cb) {\n    var insertRule = CSSStyleSheet.prototype.insertRule;\n    CSSStyleSheet.prototype.insertRule = function (rule, index) {\n        var id = mirror.getId(this.ownerNode);\n        if (id !== -1) {\n            cb({\n                id: id,\n                adds: [{ rule: rule, index: index }],\n            });\n        }\n        return insertRule.apply(this, arguments);\n    };\n    var deleteRule = CSSStyleSheet.prototype.deleteRule;\n    CSSStyleSheet.prototype.deleteRule = function (index) {\n        var id = mirror.getId(this.ownerNode);\n        if (id !== -1) {\n            cb({\n                id: id,\n                removes: [{ index: index }],\n            });\n        }\n        return deleteRule.apply(this, arguments);\n    };\n    return function () {\n        CSSStyleSheet.prototype.insertRule = insertRule;\n        CSSStyleSheet.prototype.deleteRule = deleteRule;\n    };\n}\nfunction initMediaInteractionObserver(mediaInteractionCb, blockClass) {\n    var handler = function (type) { return function (event) {\n        var target = event.target;\n        if (!target || isBlocked(target, blockClass)) {\n            return;\n        }\n        mediaInteractionCb({\n            type: type === 'play' ? MediaInteractions.Play : MediaInteractions.Pause,\n            id: mirror.getId(target),\n        });\n    }; };\n    var handlers = [on('play', handler('play')), on('pause', handler('pause'))];\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initCanvasMutationObserver(cb, blockClass) {\n    var e_1, _a;\n    var props = Object.getOwnPropertyNames(CanvasRenderingContext2D.prototype);\n    var handlers = [];\n    var _loop_1 = function (prop) {\n        try {\n            if (typeof CanvasRenderingContext2D.prototype[prop] !== 'function') {\n                return \"continue\";\n            }\n            var restoreHandler = patch(CanvasRenderingContext2D.prototype, prop, function (original) {\n                return function () {\n                    var _this = this;\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    if (!isBlocked(this.canvas, blockClass)) {\n                        setTimeout(function () {\n                            var recordArgs = __spread(args);\n                            if (prop === 'drawImage') {\n                                if (recordArgs[0] &&\n                                    recordArgs[0] instanceof HTMLCanvasElement) {\n                                    recordArgs[0] = recordArgs[0].toDataURL();\n                                }\n                            }\n                            cb({\n                                id: mirror.getId(_this.canvas),\n                                property: prop,\n                                args: recordArgs,\n                            });\n                        }, 0);\n                    }\n                    return original.apply(this, args);\n                };\n            });\n            handlers.push(restoreHandler);\n        }\n        catch (_a) {\n            var hookHandler = hookSetter(CanvasRenderingContext2D.prototype, prop, {\n                set: function (v) {\n                    cb({\n                        id: mirror.getId(this.canvas),\n                        property: prop,\n                        args: [v],\n                        setter: true,\n                    });\n                },\n            });\n            handlers.push(hookHandler);\n        }\n    };\n    try {\n        for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n            var prop = props_1_1.value;\n            _loop_1(prop);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initFontObserver(cb) {\n    var handlers = [];\n    var fontMap = new WeakMap();\n    var originalFontFace = FontFace;\n    window.FontFace = function FontFace(family, source, descriptors) {\n        var fontFace = new originalFontFace(family, source, descriptors);\n        fontMap.set(fontFace, {\n            family: family,\n            buffer: typeof source !== 'string',\n            descriptors: descriptors,\n            fontSource: typeof source === 'string'\n                ? source\n                :\n                    JSON.stringify(Array.from(new Uint8Array(source))),\n        });\n        return fontFace;\n    };\n    var restoreHandler = patch(document.fonts, 'add', function (original) {\n        return function (fontFace) {\n            setTimeout(function () {\n                var p = fontMap.get(fontFace);\n                if (p) {\n                    cb(p);\n                    fontMap.delete(fontFace);\n                }\n            }, 0);\n            return original.apply(this, [fontFace]);\n        };\n    });\n    handlers.push(function () {\n        window.FonFace = originalFontFace;\n    });\n    handlers.push(restoreHandler);\n    return function () {\n        handlers.forEach(function (h) { return h(); });\n    };\n}\nfunction initLogObserver(cb, logOptions) {\n    var e_2, _a;\n    var _this = this;\n    var logger = logOptions.logger;\n    if (!logger)\n        return function () { };\n    var logCount = 0;\n    var cancelHandlers = [];\n    if (logOptions.level.includes('error')) {\n        if (window) {\n            var originalOnError_1 = window.onerror;\n            window.onerror = function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                originalOnError_1 && originalOnError_1.apply(_this, args);\n                var stack = [];\n                if (args[args.length - 1] instanceof Error)\n                    stack = parseStack(args[args.length - 1].stack, 0);\n                var payload = [stringify(args[0], logOptions.stringifyOptions)];\n                cb({\n                    level: 'error',\n                    trace: stack,\n                    payload: payload,\n                });\n            };\n            cancelHandlers.push(function () {\n                window.onerror = originalOnError_1;\n            });\n        }\n    }\n    try {\n        for (var _b = __values(logOptions.level), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var levelType = _c.value;\n            cancelHandlers.push(replace(logger, levelType));\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return function () {\n        cancelHandlers.forEach(function (h) { return h(); });\n    };\n    function replace(logger, level) {\n        var _this = this;\n        if (!logger[level])\n            return function () { };\n        return patch(logger, level, function (original) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                original.apply(_this, args);\n                try {\n                    var stack = parseStack(new Error().stack);\n                    var payload = args.map(function (s) {\n                        return stringify(s, logOptions.stringifyOptions);\n                    });\n                    logCount++;\n                    if (logCount < logOptions.lengthThreshold)\n                        cb({\n                            level: level,\n                            trace: stack,\n                            payload: payload,\n                        });\n                    else if (logCount === logOptions.lengthThreshold)\n                        cb({\n                            level: 'warn',\n                            trace: [],\n                            payload: [\n                                stringify('The number of log records reached the threshold.'),\n                            ],\n                        });\n                }\n                catch (error) {\n                    original.apply(void 0, __spread(['rrweb logger error:', error], args));\n                }\n            };\n        });\n    }\n    function parseStack(stack, omitDepth) {\n        if (omitDepth === void 0) { omitDepth = 1; }\n        var stacks = [];\n        if (stack) {\n            stacks = stack\n                .split('at')\n                .splice(1 + omitDepth)\n                .map(function (s) { return s.trim(); });\n        }\n        return stacks;\n    }\n}\nfunction mergeHooks(o, hooks) {\n    var mutationCb = o.mutationCb, mousemoveCb = o.mousemoveCb, mouseInteractionCb = o.mouseInteractionCb, scrollCb = o.scrollCb, viewportResizeCb = o.viewportResizeCb, inputCb = o.inputCb, mediaInteractionCb = o.mediaInteractionCb, styleSheetRuleCb = o.styleSheetRuleCb, canvasMutationCb = o.canvasMutationCb, fontCb = o.fontCb, logCb = o.logCb;\n    o.mutationCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mutation) {\n            hooks.mutation.apply(hooks, __spread(p));\n        }\n        mutationCb.apply(void 0, __spread(p));\n    };\n    o.mousemoveCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mousemove) {\n            hooks.mousemove.apply(hooks, __spread(p));\n        }\n        mousemoveCb.apply(void 0, __spread(p));\n    };\n    o.mouseInteractionCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mouseInteraction) {\n            hooks.mouseInteraction.apply(hooks, __spread(p));\n        }\n        mouseInteractionCb.apply(void 0, __spread(p));\n    };\n    o.scrollCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.scroll) {\n            hooks.scroll.apply(hooks, __spread(p));\n        }\n        scrollCb.apply(void 0, __spread(p));\n    };\n    o.viewportResizeCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.viewportResize) {\n            hooks.viewportResize.apply(hooks, __spread(p));\n        }\n        viewportResizeCb.apply(void 0, __spread(p));\n    };\n    o.inputCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.input) {\n            hooks.input.apply(hooks, __spread(p));\n        }\n        inputCb.apply(void 0, __spread(p));\n    };\n    o.mediaInteractionCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.mediaInteaction) {\n            hooks.mediaInteaction.apply(hooks, __spread(p));\n        }\n        mediaInteractionCb.apply(void 0, __spread(p));\n    };\n    o.styleSheetRuleCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.styleSheetRule) {\n            hooks.styleSheetRule.apply(hooks, __spread(p));\n        }\n        styleSheetRuleCb.apply(void 0, __spread(p));\n    };\n    o.canvasMutationCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.canvasMutation) {\n            hooks.canvasMutation.apply(hooks, __spread(p));\n        }\n        canvasMutationCb.apply(void 0, __spread(p));\n    };\n    o.fontCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.font) {\n            hooks.font.apply(hooks, __spread(p));\n        }\n        fontCb.apply(void 0, __spread(p));\n    };\n    o.logCb = function () {\n        var p = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            p[_i] = arguments[_i];\n        }\n        if (hooks.log) {\n            hooks.log.apply(hooks, __spread(p));\n        }\n        logCb.apply(void 0, __spread(p));\n    };\n}\nfunction initObservers(o, hooks) {\n    if (hooks === void 0) { hooks = {}; }\n    mergeHooks(o, hooks);\n    var mutationObserver = initMutationObserver(o.mutationCb, o.blockClass, o.blockSelector, o.inlineStylesheet, o.maskInputOptions, o.recordCanvas, o.slimDOMOptions);\n    var mousemoveHandler = initMoveObserver(o.mousemoveCb, o.sampling);\n    var mouseInteractionHandler = initMouseInteractionObserver(o.mouseInteractionCb, o.blockClass, o.sampling);\n    var scrollHandler = initScrollObserver(o.scrollCb, o.blockClass, o.sampling);\n    var viewportResizeHandler = initViewportResizeObserver(o.viewportResizeCb);\n    var inputHandler = initInputObserver(o.inputCb, o.blockClass, o.ignoreClass, o.maskInputOptions, o.maskInputFn, o.sampling);\n    var mediaInteractionHandler = initMediaInteractionObserver(o.mediaInteractionCb, o.blockClass);\n    var styleSheetObserver = initStyleSheetObserver(o.styleSheetRuleCb);\n    var canvasMutationObserver = o.recordCanvas\n        ? initCanvasMutationObserver(o.canvasMutationCb, o.blockClass)\n        : function () { };\n    var fontObserver = o.collectFonts ? initFontObserver(o.fontCb) : function () { };\n    var logObserver = o.logOptions\n        ? initLogObserver(o.logCb, o.logOptions)\n        : function () { };\n    return function () {\n        mutationObserver.disconnect();\n        mousemoveHandler();\n        mouseInteractionHandler();\n        scrollHandler();\n        viewportResizeHandler();\n        inputHandler();\n        mediaInteractionHandler();\n        styleSheetObserver();\n        canvasMutationObserver();\n        fontObserver();\n        logObserver();\n    };\n}\n\nexport { INPUT_TAGS, initObservers, mutationBuffer };\n","import { __assign, __read } from '../../node_modules/tslib/tslib.es6.js';\nimport { snapshot } from '../../node_modules/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { EventType, IncrementalSource } from '../types.js';\nimport { polyfill, on, getWindowWidth, getWindowHeight, mirror } from '../utils.js';\nimport { initObservers, mutationBuffer } from './observer.js';\n\nfunction wrapEvent(e) {\n    return __assign(__assign({}, e), { timestamp: Date.now() });\n}\nvar wrappedEmit;\nfunction record(options) {\n    if (options === void 0) { options = {}; }\n    var emit = options.emit, checkoutEveryNms = options.checkoutEveryNms, checkoutEveryNth = options.checkoutEveryNth, _a = options.blockClass, blockClass = _a === void 0 ? 'rr-block' : _a, _b = options.blockSelector, blockSelector = _b === void 0 ? null : _b, _c = options.ignoreClass, ignoreClass = _c === void 0 ? 'rr-ignore' : _c, _d = options.inlineStylesheet, inlineStylesheet = _d === void 0 ? true : _d, maskAllInputs = options.maskAllInputs, _maskInputOptions = options.maskInputOptions, _slimDOMOptions = options.slimDOMOptions, maskInputFn = options.maskInputFn, hooks = options.hooks, packFn = options.packFn, _e = options.sampling, sampling = _e === void 0 ? {} : _e, mousemoveWait = options.mousemoveWait, _f = options.recordCanvas, recordCanvas = _f === void 0 ? false : _f, _g = options.collectFonts, collectFonts = _g === void 0 ? false : _g, _h = options.recordLog, recordLog = _h === void 0 ? false : _h;\n    if (!emit) {\n        throw new Error('emit function is required');\n    }\n    if (mousemoveWait !== undefined && sampling.mousemove === undefined) {\n        sampling.mousemove = mousemoveWait;\n    }\n    var maskInputOptions = maskAllInputs === true\n        ? {\n            color: true,\n            date: true,\n            'datetime-local': true,\n            email: true,\n            month: true,\n            number: true,\n            range: true,\n            search: true,\n            tel: true,\n            text: true,\n            time: true,\n            url: true,\n            week: true,\n            textarea: true,\n            select: true,\n        }\n        : _maskInputOptions !== undefined\n            ? _maskInputOptions\n            : {};\n    var slimDOMOptions = _slimDOMOptions === true || _slimDOMOptions === 'all'\n        ? {\n            script: true,\n            comment: true,\n            headFavicon: true,\n            headWhitespace: true,\n            headMetaSocial: true,\n            headMetaRobots: true,\n            headMetaHttpEquiv: true,\n            headMetaVerification: true,\n            headMetaAuthorship: _slimDOMOptions === 'all',\n            headMetaDescKeywords: _slimDOMOptions === 'all',\n        }\n        : _slimDOMOptions\n            ? _slimDOMOptions\n            : {};\n    var defaultLogOptions = {\n        level: [\n            'assert',\n            'clear',\n            'count',\n            'countReset',\n            'debug',\n            'dir',\n            'dirxml',\n            'error',\n            'group',\n            'groupCollapsed',\n            'groupEnd',\n            'info',\n            'log',\n            'table',\n            'time',\n            'timeEnd',\n            'timeLog',\n            'trace',\n            'warn',\n        ],\n        lengthThreshold: 1000,\n        logger: console,\n    };\n    var logOptions = recordLog\n        ? recordLog === true\n            ? defaultLogOptions\n            : Object.assign({}, defaultLogOptions, recordLog)\n        : {};\n    polyfill();\n    var lastFullSnapshotEvent;\n    var incrementalSnapshotCount = 0;\n    wrappedEmit = function (e, isCheckout) {\n        if (mutationBuffer.isFrozen() &&\n            e.type !== EventType.FullSnapshot &&\n            !(e.type === EventType.IncrementalSnapshot &&\n                e.data.source === IncrementalSource.Mutation)) {\n            mutationBuffer.emit();\n            mutationBuffer.unfreeze();\n        }\n        emit((packFn ? packFn(e) : e), isCheckout);\n        if (e.type === EventType.FullSnapshot) {\n            lastFullSnapshotEvent = e;\n            incrementalSnapshotCount = 0;\n        }\n        else if (e.type === EventType.IncrementalSnapshot) {\n            incrementalSnapshotCount++;\n            var exceedCount = checkoutEveryNth && incrementalSnapshotCount >= checkoutEveryNth;\n            var exceedTime = checkoutEveryNms &&\n                e.timestamp - lastFullSnapshotEvent.timestamp > checkoutEveryNms;\n            if (exceedCount || exceedTime) {\n                takeFullSnapshot(true);\n            }\n        }\n    };\n    function takeFullSnapshot(isCheckout) {\n        var _a, _b, _c, _d;\n        if (isCheckout === void 0) { isCheckout = false; }\n        wrappedEmit(wrapEvent({\n            type: EventType.Meta,\n            data: {\n                href: window.location.href,\n                width: getWindowWidth(),\n                height: getWindowHeight(),\n            },\n        }), isCheckout);\n        var wasFrozen = mutationBuffer.isFrozen();\n        mutationBuffer.freeze();\n        var _e = __read(snapshot(document, {\n            blockClass: blockClass,\n            blockSelector: blockSelector,\n            inlineStylesheet: inlineStylesheet,\n            maskAllInputs: maskInputOptions,\n            slimDOM: slimDOMOptions,\n            recordCanvas: recordCanvas,\n        }), 2), node = _e[0], idNodeMap = _e[1];\n        if (!node) {\n            return console.warn('Failed to snapshot the document');\n        }\n        mirror.map = idNodeMap;\n        wrappedEmit(wrapEvent({\n            type: EventType.FullSnapshot,\n            data: {\n                node: node,\n                initialOffset: {\n                    left: window.pageXOffset !== undefined\n                        ? window.pageXOffset\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollLeft) || ((_b = (_a = document === null || document === void 0 ? void 0 : document.body) === null || _a === void 0 ? void 0 : _a.parentElement) === null || _b === void 0 ? void 0 : _b.scrollLeft) || (document === null || document === void 0 ? void 0 : document.body.scrollLeft) ||\n                            0,\n                    top: window.pageYOffset !== undefined\n                        ? window.pageYOffset\n                        : (document === null || document === void 0 ? void 0 : document.documentElement.scrollTop) || ((_d = (_c = document === null || document === void 0 ? void 0 : document.body) === null || _c === void 0 ? void 0 : _c.parentElement) === null || _d === void 0 ? void 0 : _d.scrollTop) || (document === null || document === void 0 ? void 0 : document.body.scrollTop) ||\n                            0,\n                },\n            },\n        }));\n        if (!wasFrozen) {\n            mutationBuffer.emit();\n            mutationBuffer.unfreeze();\n        }\n    }\n    try {\n        var handlers_1 = [];\n        handlers_1.push(on('DOMContentLoaded', function () {\n            wrappedEmit(wrapEvent({\n                type: EventType.DomContentLoaded,\n                data: {},\n            }));\n        }));\n        var init_1 = function () {\n            takeFullSnapshot();\n            handlers_1.push(initObservers({\n                mutationCb: function (m) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.Mutation }, m),\n                    }));\n                },\n                mousemoveCb: function (positions, source) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: {\n                            source: source,\n                            positions: positions,\n                        },\n                    }));\n                },\n                mouseInteractionCb: function (d) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.MouseInteraction }, d),\n                    }));\n                },\n                scrollCb: function (p) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.Scroll }, p),\n                    }));\n                },\n                viewportResizeCb: function (d) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.ViewportResize }, d),\n                    }));\n                },\n                inputCb: function (v) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.Input }, v),\n                    }));\n                },\n                mediaInteractionCb: function (p) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.MediaInteraction }, p),\n                    }));\n                },\n                styleSheetRuleCb: function (r) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.StyleSheetRule }, r),\n                    }));\n                },\n                canvasMutationCb: function (p) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.CanvasMutation }, p),\n                    }));\n                },\n                fontCb: function (p) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.Font }, p),\n                    }));\n                },\n                logCb: function (p) {\n                    return wrappedEmit(wrapEvent({\n                        type: EventType.IncrementalSnapshot,\n                        data: __assign({ source: IncrementalSource.Log }, p),\n                    }));\n                },\n                blockClass: blockClass,\n                blockSelector: blockSelector,\n                ignoreClass: ignoreClass,\n                maskInputOptions: maskInputOptions,\n                maskInputFn: maskInputFn,\n                inlineStylesheet: inlineStylesheet,\n                sampling: sampling,\n                recordCanvas: recordCanvas,\n                collectFonts: collectFonts,\n                slimDOMOptions: slimDOMOptions,\n                logOptions: logOptions,\n            }, hooks));\n        };\n        if (document.readyState === 'interactive' ||\n            document.readyState === 'complete') {\n            init_1();\n        }\n        else {\n            handlers_1.push(on('load', function () {\n                wrappedEmit(wrapEvent({\n                    type: EventType.Load,\n                    data: {},\n                }));\n                init_1();\n            }, window));\n        }\n        return function () {\n            handlers_1.forEach(function (h) { return h(); });\n        };\n    }\n    catch (error) {\n        console.warn(error);\n    }\n}\nrecord.addCustomEvent = function (tag, payload) {\n    if (!wrappedEmit) {\n        throw new Error('please add custom event after start recording');\n    }\n    wrappedEmit(wrapEvent({\n        type: EventType.Custom,\n        data: {\n            tag: tag,\n            payload: payload,\n        },\n    }));\n};\nrecord.freezePage = function () {\n    mutationBuffer.freeze();\n};\n\nexport default record;\n","//      \n// An event handler can take an optional event argument\n// and should not return a value\n                                          \n                                                               \n\n// An array of all currently registered event handlers for a type\n                                            \n                                                            \n// A map of event types and their corresponding event handlers.\n                        \n                                 \n                                   \n  \n\n/** Mitt: Tiny (~200b) functional event emitter / pubsub.\n *  @name mitt\n *  @returns {Mitt}\n */\nfunction mitt(all                 ) {\n\tall = all || Object.create(null);\n\n\treturn {\n\t\t/**\n\t\t * Register an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to listen for, or `\"*\"` for all events\n\t\t * @param  {Function} handler Function to call in response to given event\n\t\t * @memberOf mitt\n\t\t */\n\t\ton: function on(type        , handler              ) {\n\t\t\t(all[type] || (all[type] = [])).push(handler);\n\t\t},\n\n\t\t/**\n\t\t * Remove an event handler for the given type.\n\t\t *\n\t\t * @param  {String} type\tType of event to unregister `handler` from, or `\"*\"`\n\t\t * @param  {Function} handler Handler function to remove\n\t\t * @memberOf mitt\n\t\t */\n\t\toff: function off(type        , handler              ) {\n\t\t\tif (all[type]) {\n\t\t\t\tall[type].splice(all[type].indexOf(handler) >>> 0, 1);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Invoke all handlers for the given type.\n\t\t * If present, `\"*\"` handlers are invoked after type-matched handlers.\n\t\t *\n\t\t * @param {String} type  The event type to invoke\n\t\t * @param {Any} [evt]  Any value (object is recommended and powerful), passed to each handler\n\t\t * @memberOf mitt\n\t\t */\n\t\temit: function emit(type        , evt     ) {\n\t\t\t(all[type] || []).slice().map(function (handler) { handler(evt); });\n\t\t\t(all['*'] || []).slice().map(function (handler) { handler(type, evt); });\n\t\t}\n\t};\n}\n\nexport default mitt;\n","function polyfill(w, d) {\n    if (w === void 0) { w = window; }\n    if (d === void 0) { d = document; }\n    if ('scrollBehavior' in d.documentElement.style &&\n        w.__forceSmoothScrollPolyfill__ !== true) {\n        return;\n    }\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n    var original = {\n        scroll: w.scroll || w.scrollTo,\n        scrollBy: w.scrollBy,\n        elementScroll: Element.prototype.scroll || scrollElement,\n        scrollIntoView: Element.prototype.scrollIntoView,\n    };\n    var now = w.performance && w.performance.now\n        ? w.performance.now.bind(w.performance)\n        : Date.now;\n    function isMicrosoftBrowser(userAgent) {\n        var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n        return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n    }\n    var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n    function scrollElement(x, y) {\n        this.scrollLeft = x;\n        this.scrollTop = y;\n    }\n    function ease(k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n    function shouldBailOut(firstArg) {\n        if (firstArg === null ||\n            typeof firstArg !== 'object' ||\n            firstArg.behavior === undefined ||\n            firstArg.behavior === 'auto' ||\n            firstArg.behavior === 'instant') {\n            return true;\n        }\n        if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n            return false;\n        }\n        throw new TypeError('behavior member of ScrollOptions ' +\n            firstArg.behavior +\n            ' is not a valid value for enumeration ScrollBehavior.');\n    }\n    function hasScrollableSpace(el, axis) {\n        if (axis === 'Y') {\n            return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n        }\n        if (axis === 'X') {\n            return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n        }\n    }\n    function canOverflow(el, axis) {\n        var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n        return overflowValue === 'auto' || overflowValue === 'scroll';\n    }\n    function isScrollable(el) {\n        var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n        var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n        return isScrollableY || isScrollableX;\n    }\n    function findScrollableParent(el) {\n        while (el !== d.body && isScrollable(el) === false) {\n            el = el.parentNode || el.host;\n        }\n        return el;\n    }\n    function step(context) {\n        var time = now();\n        var value;\n        var currentX;\n        var currentY;\n        var elapsed = (time - context.startTime) / SCROLL_TIME;\n        elapsed = elapsed > 1 ? 1 : elapsed;\n        value = ease(elapsed);\n        currentX = context.startX + (context.x - context.startX) * value;\n        currentY = context.startY + (context.y - context.startY) * value;\n        context.method.call(context.scrollable, currentX, currentY);\n        if (currentX !== context.x || currentY !== context.y) {\n            w.requestAnimationFrame(step.bind(w, context));\n        }\n    }\n    function smoothScroll(el, x, y) {\n        var scrollable;\n        var startX;\n        var startY;\n        var method;\n        var startTime = now();\n        if (el === d.body) {\n            scrollable = w;\n            startX = w.scrollX || w.pageXOffset;\n            startY = w.scrollY || w.pageYOffset;\n            method = original.scroll;\n        }\n        else {\n            scrollable = el;\n            startX = el.scrollLeft;\n            startY = el.scrollTop;\n            method = scrollElement;\n        }\n        step({\n            scrollable: scrollable,\n            method: method,\n            startTime: startTime,\n            startX: startX,\n            startY: startY,\n            x: x,\n            y: y,\n        });\n    }\n    w.scroll = w.scrollTo = function () {\n        if (arguments[0] === undefined) {\n            return;\n        }\n        if (shouldBailOut(arguments[0]) === true) {\n            original.scroll.call(w, arguments[0].left !== undefined\n                ? arguments[0].left\n                : typeof arguments[0] !== 'object'\n                    ? arguments[0]\n                    : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\n                ? arguments[0].top\n                : arguments[1] !== undefined\n                    ? arguments[1]\n                    : w.scrollY || w.pageYOffset);\n            return;\n        }\n        smoothScroll.call(w, d.body, arguments[0].left !== undefined\n            ? ~~arguments[0].left\n            : w.scrollX || w.pageXOffset, arguments[0].top !== undefined\n            ? ~~arguments[0].top\n            : w.scrollY || w.pageYOffset);\n    };\n    w.scrollBy = function () {\n        if (arguments[0] === undefined) {\n            return;\n        }\n        if (shouldBailOut(arguments[0])) {\n            original.scrollBy.call(w, arguments[0].left !== undefined\n                ? arguments[0].left\n                : typeof arguments[0] !== 'object'\n                    ? arguments[0]\n                    : 0, arguments[0].top !== undefined\n                ? arguments[0].top\n                : arguments[1] !== undefined\n                    ? arguments[1]\n                    : 0);\n            return;\n        }\n        smoothScroll.call(w, d.body, ~~arguments[0].left + (w.scrollX || w.pageXOffset), ~~arguments[0].top + (w.scrollY || w.pageYOffset));\n    };\n    Element.prototype.scroll = Element.prototype.scrollTo = function () {\n        if (arguments[0] === undefined) {\n            return;\n        }\n        if (shouldBailOut(arguments[0]) === true) {\n            if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\n                throw new SyntaxError('Value could not be converted');\n            }\n            original.elementScroll.call(this, arguments[0].left !== undefined\n                ? ~~arguments[0].left\n                : typeof arguments[0] !== 'object'\n                    ? ~~arguments[0]\n                    : this.scrollLeft, arguments[0].top !== undefined\n                ? ~~arguments[0].top\n                : arguments[1] !== undefined\n                    ? ~~arguments[1]\n                    : this.scrollTop);\n            return;\n        }\n        var left = arguments[0].left;\n        var top = arguments[0].top;\n        smoothScroll.call(this, this, typeof left === 'undefined' ? this.scrollLeft : ~~left, typeof top === 'undefined' ? this.scrollTop : ~~top);\n    };\n    Element.prototype.scrollBy = function () {\n        if (arguments[0] === undefined) {\n            return;\n        }\n        if (shouldBailOut(arguments[0]) === true) {\n            original.elementScroll.call(this, arguments[0].left !== undefined\n                ? ~~arguments[0].left + this.scrollLeft\n                : ~~arguments[0] + this.scrollLeft, arguments[0].top !== undefined\n                ? ~~arguments[0].top + this.scrollTop\n                : ~~arguments[1] + this.scrollTop);\n            return;\n        }\n        this.scroll({\n            left: ~~arguments[0].left + this.scrollLeft,\n            top: ~~arguments[0].top + this.scrollTop,\n            behavior: arguments[0].behavior,\n        });\n    };\n    Element.prototype.scrollIntoView = function () {\n        if (shouldBailOut(arguments[0]) === true) {\n            original.scrollIntoView.call(this, arguments[0] === undefined ? true : arguments[0]);\n            return;\n        }\n        var scrollableParent = findScrollableParent(this);\n        var parentRects = scrollableParent.getBoundingClientRect();\n        var clientRects = this.getBoundingClientRect();\n        if (scrollableParent !== d.body) {\n            smoothScroll.call(this, scrollableParent, scrollableParent.scrollLeft + clientRects.left - parentRects.left, scrollableParent.scrollTop + clientRects.top - parentRects.top);\n            if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\n                w.scrollBy({\n                    left: parentRects.left,\n                    top: parentRects.top,\n                    behavior: 'smooth',\n                });\n            }\n        }\n        else {\n            w.scrollBy({\n                left: clientRects.left,\n                top: clientRects.top,\n                behavior: 'smooth',\n            });\n        }\n    };\n}\n\nexport { polyfill };\n","import { __spread } from '../../node_modules/tslib/tslib.es6.js';\nimport { EventType, IncrementalSource } from '../types.js';\n\nvar Timer = (function () {\n    function Timer(actions, speed) {\n        if (actions === void 0) { actions = []; }\n        this.timeOffset = 0;\n        this.raf = null;\n        this.actions = actions;\n        this.speed = speed;\n    }\n    Timer.prototype.addAction = function (action) {\n        var index = this.findActionIndex(action);\n        this.actions.splice(index, 0, action);\n    };\n    Timer.prototype.addActions = function (actions) {\n        var _a;\n        (_a = this.actions).push.apply(_a, __spread(actions));\n    };\n    Timer.prototype.start = function () {\n        this.actions.sort(function (a1, a2) { return a1.delay - a2.delay; });\n        this.timeOffset = 0;\n        var lastTimestamp = performance.now();\n        var actions = this.actions;\n        var self = this;\n        function check() {\n            var time = performance.now();\n            self.timeOffset += (time - lastTimestamp) * self.speed;\n            lastTimestamp = time;\n            while (actions.length) {\n                var action = actions[0];\n                if (self.timeOffset >= action.delay) {\n                    actions.shift();\n                    action.doAction();\n                }\n                else {\n                    break;\n                }\n            }\n            if (actions.length > 0 || self.liveMode) {\n                self.raf = requestAnimationFrame(check);\n            }\n        }\n        this.raf = requestAnimationFrame(check);\n    };\n    Timer.prototype.clear = function () {\n        if (this.raf) {\n            cancelAnimationFrame(this.raf);\n            this.raf = null;\n        }\n        this.actions.length = 0;\n    };\n    Timer.prototype.setSpeed = function (speed) {\n        this.speed = speed;\n    };\n    Timer.prototype.toggleLiveMode = function (mode) {\n        this.liveMode = mode;\n    };\n    Timer.prototype.isActive = function () {\n        return this.raf !== null;\n    };\n    Timer.prototype.findActionIndex = function (action) {\n        var start = 0;\n        var end = this.actions.length - 1;\n        while (start <= end) {\n            var mid = Math.floor((start + end) / 2);\n            if (this.actions[mid].delay < action.delay) {\n                start = mid + 1;\n            }\n            else if (this.actions[mid].delay > action.delay) {\n                end = mid - 1;\n            }\n            else {\n                return mid;\n            }\n        }\n        return start;\n    };\n    return Timer;\n}());\nfunction addDelay(event, baselineTime) {\n    if (event.type === EventType.IncrementalSnapshot &&\n        event.data.source === IncrementalSource.MouseMove) {\n        var firstOffset = event.data.positions[0].timeOffset;\n        var firstTimestamp = event.timestamp + firstOffset;\n        event.delay = firstTimestamp - baselineTime;\n        return firstTimestamp - baselineTime;\n    }\n    event.delay = event.timestamp - baselineTime;\n    return event.delay;\n}\n\nexport { Timer, addDelay };\n","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar t;!function(t){t[t.NotStarted=0]=\"NotStarted\",t[t.Running=1]=\"Running\",t[t.Stopped=2]=\"Stopped\";}(t||(t={}));var n={type:\"xstate.init\"};function e(t){return void 0===t?[]:[].concat(t)}function r(t){return {type:\"xstate.assign\",assignment:t}}function i(t,n){return \"string\"==typeof(t=\"string\"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:\"function\"==typeof t?{type:t.name,exec:t}:t}function o(t){return function(n){return t===n}}function a(t){return \"string\"==typeof t?{type:t}:t}function u(t,n){return {value:t,context:n,actions:[],changed:!1,matches:o(t)}}function c(t,n){void 0===n&&(n={});var r={config:t,_options:n,initialState:{value:t.initial,actions:e(t.states[t.initial].entry).map((function(t){return i(t,n.actions)})),context:t.context,matches:o(t.initial)},transition:function(n,c){var s,f,v=\"string\"==typeof n?{value:n,context:t.context}:n,l=v.value,p=v.context,g=a(c),y=t.states[l];if(y.on){var d=e(y.on[g.type]),x=function(n){if(void 0===n)return {value:u(l,p)};var e=\"string\"==typeof n?{target:n}:n,a=e.target,c=void 0===a?l:a,s=e.actions,f=void 0===s?[]:s,v=e.cond,d=p;if((void 0===v?function(){return !0}:v)(p,g)){var x=t.states[c],m=!1,h=[].concat(y.exit,f,x.entry).filter((function(t){return t})).map((function(t){return i(t,r._options.actions)})).filter((function(t){if(\"xstate.assign\"===t.type){m=!0;var n=Object.assign({},d);return \"function\"==typeof t.assignment?n=t.assignment(d,g):Object.keys(t.assignment).forEach((function(e){n[e]=\"function\"==typeof t.assignment[e]?t.assignment[e](d,g):t.assignment[e];})),d=n,!1}return !0}));return {value:{value:c,context:d,actions:h,changed:c!==l||h.length>0||m,matches:o(c)}}}};try{for(var m=function(t){var n=\"function\"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}(d),h=m.next();!h.done;h=m.next()){var S=x(h.value);if(\"object\"==typeof S)return S.value}}catch(t){s={error:t};}finally{try{h&&!h.done&&(f=m.return)&&f.call(m);}finally{if(s)throw s.error}}}return u(l,p)}};return r}var s=function(t,n){return t.actions.forEach((function(e){var r=e.exec;return r&&r(t.context,n)}))};function f(e){var r=e.initialState,i=t.NotStarted,u=new Set,c={_machine:e,send:function(n){i===t.Running&&(r=e.transition(r,n),s(r,a(n)),u.forEach((function(t){return t(r)})));},subscribe:function(t){return u.add(t),t(r),{unsubscribe:function(){return u.delete(t)}}},start:function(a){if(a){var u=\"object\"==typeof a?a:{context:e.config.context,value:a};r={value:u.value,actions:[],context:u.context,matches:o(u.value)};}return i=t.Running,s(r,n),c},stop:function(){return i=t.Stopped,u.clear(),c},get state(){return r},get status(){return i}};return c}\n\nexport { t as InterpreterStatus, r as assign, c as createMachine, f as interpret };\n","import { __assign, __values } from '../../node_modules/tslib/tslib.es6.js';\nimport { ReplayerEvents, EventType, IncrementalSource } from '../types.js';\nimport { needCastInSyncMode } from '../utils.js';\nimport { addDelay } from './timer.js';\nimport { interpret as f, createMachine as c, assign as r } from '../../node_modules/@xstate/fsm/es/index.js';\n\nfunction discardPriorSnapshots(events, baselineTime) {\n    for (var idx = events.length - 1; idx >= 0; idx--) {\n        var event = events[idx];\n        if (event.type === EventType.Meta) {\n            if (event.timestamp <= baselineTime) {\n                return events.slice(idx);\n            }\n        }\n    }\n    return events;\n}\nfunction createPlayerService(context, _a) {\n    var getCastFn = _a.getCastFn, emitter = _a.emitter;\n    var playerMachine = c({\n        id: 'player',\n        context: context,\n        initial: 'paused',\n        states: {\n            playing: {\n                on: {\n                    PAUSE: {\n                        target: 'paused',\n                        actions: ['pause'],\n                    },\n                    CAST_EVENT: {\n                        target: 'playing',\n                        actions: 'castEvent',\n                    },\n                    END: {\n                        target: 'paused',\n                        actions: ['resetLastPlayedEvent', 'pause'],\n                    },\n                    ADD_EVENT: {\n                        target: 'playing',\n                        actions: ['addEvent'],\n                    },\n                },\n            },\n            paused: {\n                on: {\n                    PLAY: {\n                        target: 'playing',\n                        actions: ['recordTimeOffset', 'play'],\n                    },\n                    CAST_EVENT: {\n                        target: 'paused',\n                        actions: 'castEvent',\n                    },\n                    TO_LIVE: {\n                        target: 'live',\n                        actions: ['startLive'],\n                    },\n                    ADD_EVENT: {\n                        target: 'paused',\n                        actions: ['addEvent'],\n                    },\n                },\n            },\n            live: {\n                on: {\n                    ADD_EVENT: {\n                        target: 'live',\n                        actions: ['addEvent'],\n                    },\n                    CAST_EVENT: {\n                        target: 'live',\n                        actions: ['castEvent'],\n                    },\n                },\n            },\n        },\n    }, {\n        actions: {\n            castEvent: r({\n                lastPlayedEvent: function (ctx, event) {\n                    if (event.type === 'CAST_EVENT') {\n                        return event.payload.event;\n                    }\n                    return ctx.lastPlayedEvent;\n                },\n            }),\n            recordTimeOffset: r(function (ctx, event) {\n                var timeOffset = ctx.timeOffset;\n                if ('payload' in event && 'timeOffset' in event.payload) {\n                    timeOffset = event.payload.timeOffset;\n                }\n                return __assign(__assign({}, ctx), { timeOffset: timeOffset, baselineTime: ctx.events[0].timestamp + timeOffset });\n            }),\n            play: function (ctx) {\n                var e_1, _a, e_2, _b;\n                var _c;\n                console.warn('play');\n                var timer = ctx.timer, events = ctx.events, baselineTime = ctx.baselineTime, lastPlayedEvent = ctx.lastPlayedEvent;\n                timer.clear();\n                try {\n                    for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n                        var event = events_1_1.value;\n                        addDelay(event, baselineTime);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                var neededEvents = discardPriorSnapshots(events, baselineTime);\n                var actions = new Array();\n                var _loop_1 = function (event) {\n                    var lastPlayedTimestamp = lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.timestamp;\n                    if ((lastPlayedEvent === null || lastPlayedEvent === void 0 ? void 0 : lastPlayedEvent.type) === EventType.IncrementalSnapshot &&\n                        lastPlayedEvent.data.source === IncrementalSource.MouseMove) {\n                        lastPlayedTimestamp =\n                            lastPlayedEvent.timestamp + ((_c = lastPlayedEvent.data.positions[0]) === null || _c === void 0 ? void 0 : _c.timeOffset);\n                    }\n                    if (lastPlayedTimestamp &&\n                        lastPlayedTimestamp < baselineTime &&\n                        (event.timestamp <= lastPlayedTimestamp ||\n                            event === lastPlayedEvent)) {\n                        return \"continue\";\n                    }\n                    var isSync = event.timestamp < baselineTime;\n                    if (isSync && !needCastInSyncMode(event)) {\n                        return \"continue\";\n                    }\n                    var castFn = getCastFn(event, isSync);\n                    if (isSync) {\n                        castFn();\n                    }\n                    else {\n                        actions.push({\n                            doAction: function () {\n                                castFn();\n                                emitter.emit(ReplayerEvents.EventCast, event);\n                            },\n                            delay: event.delay,\n                        });\n                    }\n                };\n                try {\n                    for (var neededEvents_1 = __values(neededEvents), neededEvents_1_1 = neededEvents_1.next(); !neededEvents_1_1.done; neededEvents_1_1 = neededEvents_1.next()) {\n                        var event = neededEvents_1_1.value;\n                        _loop_1(event);\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (neededEvents_1_1 && !neededEvents_1_1.done && (_b = neededEvents_1.return)) _b.call(neededEvents_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                emitter.emit(ReplayerEvents.Flush);\n                timer.addActions(actions);\n                timer.start();\n            },\n            pause: function (ctx) {\n                ctx.timer.clear();\n            },\n            resetLastPlayedEvent: r(function (ctx) {\n                return __assign(__assign({}, ctx), { lastPlayedEvent: null });\n            }),\n            startLive: r({\n                baselineTime: function (ctx, event) {\n                    ctx.timer.toggleLiveMode(true);\n                    ctx.timer.start();\n                    if (event.type === 'TO_LIVE' && event.payload.baselineTime) {\n                        return event.payload.baselineTime;\n                    }\n                    return Date.now();\n                },\n            }),\n            addEvent: r(function (ctx, machineEvent) {\n                var baselineTime = ctx.baselineTime, timer = ctx.timer, events = ctx.events;\n                if (machineEvent.type === 'ADD_EVENT') {\n                    var event_1 = machineEvent.payload.event;\n                    addDelay(event_1, baselineTime);\n                    events.push(event_1);\n                    var isSync = event_1.timestamp < baselineTime;\n                    var castFn_1 = getCastFn(event_1, isSync);\n                    if (isSync) {\n                        castFn_1();\n                    }\n                    else {\n                        timer.addAction({\n                            doAction: function () {\n                                castFn_1();\n                                emitter.emit(ReplayerEvents.EventCast, event_1);\n                            },\n                            delay: event_1.delay,\n                        });\n                        if (!timer.isActive()) {\n                            timer.start();\n                        }\n                    }\n                }\n                return __assign(__assign({}, ctx), { events: events });\n            }),\n        },\n    });\n    return f(playerMachine);\n}\nfunction createSpeedService(context) {\n    var speedMachine = c({\n        id: 'speed',\n        context: context,\n        initial: 'normal',\n        states: {\n            normal: {\n                on: {\n                    FAST_FORWARD: {\n                        target: 'skipping',\n                        actions: ['recordSpeed', 'setSpeed'],\n                    },\n                    SET_SPEED: {\n                        target: 'normal',\n                        actions: ['setSpeed'],\n                    },\n                },\n            },\n            skipping: {\n                on: {\n                    BACK_TO_NORMAL: {\n                        target: 'normal',\n                        actions: ['restoreSpeed'],\n                    },\n                    SET_SPEED: {\n                        target: 'normal',\n                        actions: ['setSpeed'],\n                    },\n                },\n            },\n        },\n    }, {\n        actions: {\n            setSpeed: function (ctx, event) {\n                if ('payload' in event) {\n                    ctx.timer.setSpeed(event.payload.speed);\n                }\n            },\n            recordSpeed: r({\n                normalSpeed: function (ctx) { return ctx.timer.speed; },\n            }),\n            restoreSpeed: function (ctx) {\n                ctx.timer.setSpeed(ctx.normalSpeed);\n            },\n        },\n    });\n    return f(speedMachine);\n}\n\nexport { createPlayerService, createSpeedService, discardPriorSnapshots };\n","var rules = function (blockClass) { return [\n    \"iframe, .\" + blockClass + \" { background: #ccc }\",\n    'noscript { display: none !important; }',\n]; };\n\nexport default rules;\n","import { __values, __assign, __spread, __read } from '../../node_modules/tslib/tslib.es6.js';\nimport { rebuild, NodeType, buildNodeWithSN } from '../../node_modules/rrweb-snapshot/es/rrweb-snapshot.js';\nimport { ReplayerEvents, EventType, IncrementalSource, MediaInteractions, MouseInteractions } from '../types.js';\nimport { polyfill as polyfill$1, mirror, queueToResolveTrees, iterateResolveTree, TreeIndex } from '../utils.js';\nimport * as mitt_es from '../../node_modules/mitt/dist/mitt.es.js';\nimport mitt$1 from '../../node_modules/mitt/dist/mitt.es.js';\nimport { polyfill } from './smoothscroll.js';\nimport { Timer } from './timer.js';\nimport { createPlayerService, createSpeedService } from './machine.js';\nimport rules from './styles/inject-style.js';\n\nvar SKIP_TIME_THRESHOLD = 10 * 1000;\nvar SKIP_TIME_INTERVAL = 5 * 1000;\nvar mitt = mitt$1 || mitt_es;\nvar REPLAY_CONSOLE_PREFIX = '[replayer]';\nvar defaultMouseTailConfig = {\n    duration: 500,\n    lineCap: 'round',\n    lineWidth: 3,\n    strokeStyle: 'red',\n};\nvar defaultLogConfig = {\n    level: [\n        'assert',\n        'clear',\n        'count',\n        'countReset',\n        'debug',\n        'dir',\n        'dirxml',\n        'error',\n        'group',\n        'groupCollapsed',\n        'groupEnd',\n        'info',\n        'log',\n        'table',\n        'time',\n        'timeEnd',\n        'timeLog',\n        'trace',\n        'warn',\n    ],\n    replayLogger: undefined,\n};\nvar Replayer = (function () {\n    function Replayer(events, config) {\n        var _this = this;\n        this.mouseTail = null;\n        this.tailPositions = [];\n        this.emitter = mitt();\n        this.legacy_missingNodeRetryMap = {};\n        this.imageMap = new Map();\n        if (!(config === null || config === void 0 ? void 0 : config.liveMode) && events.length < 2) {\n            throw new Error('Replayer need at least 2 events.');\n        }\n        var defaultConfig = {\n            speed: 1,\n            root: document.body,\n            loadTimeout: 0,\n            skipInactive: false,\n            showWarning: true,\n            showDebug: false,\n            blockClass: 'rr-block',\n            liveMode: false,\n            insertStyleRules: [],\n            triggerFocus: true,\n            UNSAFE_replayCanvas: false,\n            pauseAnimation: true,\n            mouseTail: defaultMouseTailConfig,\n            logConfig: defaultLogConfig,\n        };\n        this.config = Object.assign({}, defaultConfig, config);\n        if (!this.config.logConfig.replayLogger)\n            this.config.logConfig.replayLogger = this.getConsoleLogger();\n        this.handleResize = this.handleResize.bind(this);\n        this.getCastFn = this.getCastFn.bind(this);\n        this.emitter.on(ReplayerEvents.Resize, this.handleResize);\n        this.setupDom();\n        this.treeIndex = new TreeIndex();\n        this.fragmentParentMap = new Map();\n        this.elementStateMap = new Map();\n        this.emitter.on(ReplayerEvents.Flush, function () {\n            var e_1, _a, e_2, _b, e_3, _c;\n            var _d = _this.treeIndex.flush(), scrollMap = _d.scrollMap, inputMap = _d.inputMap;\n            try {\n                for (var _e = __values(_this.fragmentParentMap.entries()), _f = _e.next(); !_f.done; _f = _e.next()) {\n                    var _g = __read(_f.value, 2), frag = _g[0], parent = _g[1];\n                    mirror.map[parent.__sn.id] = parent;\n                    if (parent.__sn.type === NodeType.Element &&\n                        parent.__sn.tagName === 'textarea' &&\n                        frag.textContent) {\n                        parent.value = frag.textContent;\n                    }\n                    parent.appendChild(frag);\n                    _this.restoreState(parent);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            _this.fragmentParentMap.clear();\n            _this.elementStateMap.clear();\n            try {\n                for (var _h = __values(scrollMap.values()), _j = _h.next(); !_j.done; _j = _h.next()) {\n                    var d = _j.value;\n                    _this.applyScroll(d);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            try {\n                for (var _k = __values(inputMap.values()), _l = _k.next(); !_l.done; _l = _k.next()) {\n                    var d = _l.value;\n                    _this.applyInput(d);\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n        });\n        var timer = new Timer([], (config === null || config === void 0 ? void 0 : config.speed) || defaultConfig.speed);\n        this.service = createPlayerService({\n            events: events.map(function (e) {\n                if (config && config.unpackFn) {\n                    return config.unpackFn(e);\n                }\n                return e;\n            }),\n            timer: timer,\n            timeOffset: 0,\n            baselineTime: 0,\n            lastPlayedEvent: null,\n        }, {\n            getCastFn: this.getCastFn,\n            emitter: this.emitter,\n        });\n        this.service.start();\n        this.service.subscribe(function (state) {\n            _this.emitter.emit(ReplayerEvents.StateChange, {\n                player: state,\n            });\n        });\n        this.speedService = createSpeedService({\n            normalSpeed: -1,\n            timer: timer,\n        });\n        this.speedService.start();\n        this.speedService.subscribe(function (state) {\n            _this.emitter.emit(ReplayerEvents.StateChange, {\n                speed: state,\n            });\n        });\n        var firstMeta = this.service.state.context.events.find(function (e) { return e.type === EventType.Meta; });\n        var firstFullsnapshot = this.service.state.context.events.find(function (e) { return e.type === EventType.FullSnapshot; });\n        if (firstMeta) {\n            var _a = firstMeta.data, width_1 = _a.width, height_1 = _a.height;\n            setTimeout(function () {\n                _this.emitter.emit(ReplayerEvents.Resize, {\n                    width: width_1,\n                    height: height_1,\n                });\n            }, 0);\n        }\n        if (firstFullsnapshot) {\n            setTimeout(function () {\n                _this.rebuildFullSnapshot(firstFullsnapshot);\n                _this.iframe.contentWindow.scrollTo(firstFullsnapshot.data.initialOffset);\n            }, 1);\n        }\n    }\n    Object.defineProperty(Replayer.prototype, \"timer\", {\n        get: function () {\n            return this.service.state.context.timer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Replayer.prototype.on = function (event, handler) {\n        this.emitter.on(event, handler);\n        return this;\n    };\n    Replayer.prototype.setConfig = function (config) {\n        var _this = this;\n        Object.keys(config).forEach(function (key) {\n            _this.config[key] = config[key];\n        });\n        if (!this.config.skipInactive) {\n            this.backToNormal();\n        }\n        if (typeof config.speed !== 'undefined') {\n            this.speedService.send({\n                type: 'SET_SPEED',\n                payload: {\n                    speed: config.speed,\n                },\n            });\n        }\n        if (typeof config.mouseTail !== 'undefined') {\n            if (config.mouseTail === false) {\n                if (this.mouseTail) {\n                    this.mouseTail.style.display = 'none';\n                }\n            }\n            else {\n                if (!this.mouseTail) {\n                    this.mouseTail = document.createElement('canvas');\n                    this.mouseTail.width = Number.parseFloat(this.iframe.width);\n                    this.mouseTail.height = Number.parseFloat(this.iframe.height);\n                    this.mouseTail.classList.add('replayer-mouse-tail');\n                    this.wrapper.insertBefore(this.mouseTail, this.iframe);\n                }\n                this.mouseTail.style.display = 'inherit';\n            }\n        }\n    };\n    Replayer.prototype.getMetaData = function () {\n        var firstEvent = this.service.state.context.events[0];\n        var lastEvent = this.service.state.context.events[this.service.state.context.events.length - 1];\n        return {\n            startTime: firstEvent.timestamp,\n            endTime: lastEvent.timestamp,\n            totalTime: lastEvent.timestamp - firstEvent.timestamp,\n        };\n    };\n    Replayer.prototype.getCurrentTime = function () {\n        return this.timer.timeOffset + this.getTimeOffset();\n    };\n    Replayer.prototype.getTimeOffset = function () {\n        var _a = this.service.state.context, baselineTime = _a.baselineTime, events = _a.events;\n        return baselineTime - events[0].timestamp;\n    };\n    Replayer.prototype.play = function (timeOffset) {\n        var _a;\n        if (timeOffset === void 0) { timeOffset = 0; }\n        if (this.service.state.matches('paused')) {\n            this.service.send({ type: 'PLAY', payload: { timeOffset: timeOffset } });\n        }\n        else {\n            this.service.send({ type: 'PAUSE' });\n            this.service.send({ type: 'PLAY', payload: { timeOffset: timeOffset } });\n        }\n        (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0].classList.remove('rrweb-paused');\n        this.emitter.emit(ReplayerEvents.Start);\n    };\n    Replayer.prototype.pause = function (timeOffset) {\n        var _a;\n        if (timeOffset === undefined && this.service.state.matches('playing')) {\n            this.service.send({ type: 'PAUSE' });\n        }\n        if (typeof timeOffset === 'number') {\n            this.play(timeOffset);\n            this.service.send({ type: 'PAUSE' });\n        }\n        (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('html')[0].classList.add('rrweb-paused');\n        this.emitter.emit(ReplayerEvents.Pause);\n    };\n    Replayer.prototype.resume = function (timeOffset) {\n        if (timeOffset === void 0) { timeOffset = 0; }\n        console.warn(\"The 'resume' will be departed in 1.0. Please use 'play' method which has the same interface.\");\n        this.play(timeOffset);\n        this.emitter.emit(ReplayerEvents.Resume);\n    };\n    Replayer.prototype.startLive = function (baselineTime) {\n        this.service.send({ type: 'TO_LIVE', payload: { baselineTime: baselineTime } });\n    };\n    Replayer.prototype.addEvent = function (rawEvent) {\n        var _this = this;\n        var event = this.config.unpackFn\n            ? this.config.unpackFn(rawEvent)\n            : rawEvent;\n        Promise.resolve().then(function () {\n            return _this.service.send({ type: 'ADD_EVENT', payload: { event: event } });\n        });\n    };\n    Replayer.prototype.enableInteract = function () {\n        this.iframe.setAttribute('scrolling', 'auto');\n        this.iframe.style.pointerEvents = 'auto';\n    };\n    Replayer.prototype.disableInteract = function () {\n        this.iframe.setAttribute('scrolling', 'no');\n        this.iframe.style.pointerEvents = 'none';\n    };\n    Replayer.prototype.setupDom = function () {\n        this.wrapper = document.createElement('div');\n        this.wrapper.classList.add('replayer-wrapper');\n        this.config.root.appendChild(this.wrapper);\n        this.mouse = document.createElement('div');\n        this.mouse.classList.add('replayer-mouse');\n        this.wrapper.appendChild(this.mouse);\n        if (this.config.mouseTail !== false) {\n            this.mouseTail = document.createElement('canvas');\n            this.mouseTail.classList.add('replayer-mouse-tail');\n            this.mouseTail.style.display = 'inherit';\n            this.wrapper.appendChild(this.mouseTail);\n        }\n        this.iframe = document.createElement('iframe');\n        var attributes = ['allow-same-origin'];\n        if (this.config.UNSAFE_replayCanvas) {\n            attributes.push('allow-scripts');\n        }\n        this.iframe.style.display = 'none';\n        this.iframe.setAttribute('sandbox', attributes.join(' '));\n        this.disableInteract();\n        this.wrapper.appendChild(this.iframe);\n        if (this.iframe.contentWindow && this.iframe.contentDocument) {\n            polyfill(this.iframe.contentWindow, this.iframe.contentDocument);\n            polyfill$1(this.iframe.contentWindow);\n        }\n    };\n    Replayer.prototype.handleResize = function (dimension) {\n        var e_4, _a;\n        this.iframe.style.display = 'inherit';\n        try {\n            for (var _b = __values([this.mouseTail, this.iframe]), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var el = _c.value;\n                if (!el) {\n                    continue;\n                }\n                el.setAttribute('width', String(dimension.width));\n                el.setAttribute('height', String(dimension.height));\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n    };\n    Replayer.prototype.getCastFn = function (event, isSync) {\n        var _this = this;\n        if (isSync === void 0) { isSync = false; }\n        var castFn;\n        switch (event.type) {\n            case EventType.DomContentLoaded:\n            case EventType.Load:\n                break;\n            case EventType.Custom:\n                castFn = function () {\n                    _this.emitter.emit(ReplayerEvents.CustomEvent, event);\n                };\n                break;\n            case EventType.Meta:\n                castFn = function () {\n                    return _this.emitter.emit(ReplayerEvents.Resize, {\n                        width: event.data.width,\n                        height: event.data.height,\n                    });\n                };\n                break;\n            case EventType.FullSnapshot:\n                castFn = function () {\n                    _this.rebuildFullSnapshot(event, isSync);\n                    _this.iframe.contentWindow.scrollTo(event.data.initialOffset);\n                };\n                break;\n            case EventType.IncrementalSnapshot:\n                castFn = function () {\n                    var e_5, _a;\n                    _this.applyIncremental(event, isSync);\n                    if (isSync) {\n                        return;\n                    }\n                    if (event === _this.nextUserInteractionEvent) {\n                        _this.nextUserInteractionEvent = null;\n                        _this.backToNormal();\n                    }\n                    if (_this.config.skipInactive && !_this.nextUserInteractionEvent) {\n                        try {\n                            for (var _b = __values(_this.service.state.context.events), _c = _b.next(); !_c.done; _c = _b.next()) {\n                                var _event = _c.value;\n                                if (_event.timestamp <= event.timestamp) {\n                                    continue;\n                                }\n                                if (_this.isUserInteraction(_event)) {\n                                    if (_event.delay - event.delay >\n                                        SKIP_TIME_THRESHOLD *\n                                            _this.speedService.state.context.timer.speed) {\n                                        _this.nextUserInteractionEvent = _event;\n                                    }\n                                    break;\n                                }\n                            }\n                        }\n                        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n                        finally {\n                            try {\n                                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                            }\n                            finally { if (e_5) throw e_5.error; }\n                        }\n                        if (_this.nextUserInteractionEvent) {\n                            var skipTime = _this.nextUserInteractionEvent.delay - event.delay;\n                            var payload = {\n                                speed: Math.min(Math.round(skipTime / SKIP_TIME_INTERVAL), 360),\n                            };\n                            _this.speedService.send({ type: 'FAST_FORWARD', payload: payload });\n                            _this.emitter.emit(ReplayerEvents.SkipStart, payload);\n                        }\n                    }\n                };\n                break;\n        }\n        var wrappedCastFn = function () {\n            if (castFn) {\n                castFn();\n            }\n            _this.service.send({ type: 'CAST_EVENT', payload: { event: event } });\n            if (event ===\n                _this.service.state.context.events[_this.service.state.context.events.length - 1]) {\n                var finish_1 = function () {\n                    _this.backToNormal();\n                    _this.service.send('END');\n                    _this.emitter.emit(ReplayerEvents.Finish);\n                };\n                if (event.type === EventType.IncrementalSnapshot &&\n                    event.data.source === IncrementalSource.MouseMove &&\n                    event.data.positions.length) {\n                    setTimeout(function () {\n                        finish_1();\n                    }, Math.max(0, -event.data.positions[0].timeOffset + 50));\n                }\n                else {\n                    finish_1();\n                }\n            }\n        };\n        return wrappedCastFn;\n    };\n    Replayer.prototype.rebuildFullSnapshot = function (event, isSync) {\n        if (isSync === void 0) { isSync = false; }\n        if (!this.iframe.contentDocument) {\n            return console.warn('Looks like your replayer has been destroyed.');\n        }\n        if (Object.keys(this.legacy_missingNodeRetryMap).length) {\n            console.warn('Found unresolved missing node map', this.legacy_missingNodeRetryMap);\n        }\n        this.legacy_missingNodeRetryMap = {};\n        mirror.map = rebuild(event.data.node, {\n            doc: this.iframe.contentDocument,\n        })[1];\n        var styleEl = document.createElement('style');\n        var _a = this.iframe.contentDocument, documentElement = _a.documentElement, head = _a.head;\n        documentElement.insertBefore(styleEl, head);\n        var injectStylesRules = rules(this.config.blockClass).concat(this.config.insertStyleRules);\n        if (this.config.pauseAnimation) {\n            injectStylesRules.push('html.rrweb-paused * { animation-play-state: paused !important; }');\n        }\n        if (!this.service.state.matches('playing')) {\n            this.iframe.contentDocument\n                .getElementsByTagName('html')[0]\n                .classList.add('rrweb-paused');\n        }\n        for (var idx = 0; idx < injectStylesRules.length; idx++) {\n            styleEl.sheet.insertRule(injectStylesRules[idx], idx);\n        }\n        this.emitter.emit(ReplayerEvents.FullsnapshotRebuilded, event);\n        if (!isSync) {\n            this.waitForStylesheetLoad();\n        }\n        if (this.config.UNSAFE_replayCanvas) {\n            this.preloadAllImages();\n        }\n    };\n    Replayer.prototype.waitForStylesheetLoad = function () {\n        var _this = this;\n        var _a;\n        var head = (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.head;\n        if (head) {\n            var unloadSheets_1 = new Set();\n            var timer_1;\n            var beforeLoadState_1 = this.service.state;\n            var stateHandler_1 = function () {\n                beforeLoadState_1 = _this.service.state;\n            };\n            this.emitter.on(ReplayerEvents.Start, stateHandler_1);\n            this.emitter.on(ReplayerEvents.Pause, stateHandler_1);\n            var unsubscribe_1 = function () {\n                _this.emitter.off(ReplayerEvents.Start, stateHandler_1);\n                _this.emitter.off(ReplayerEvents.Pause, stateHandler_1);\n            };\n            head\n                .querySelectorAll('link[rel=\"stylesheet\"]')\n                .forEach(function (css) {\n                if (!css.sheet) {\n                    unloadSheets_1.add(css);\n                    css.addEventListener('load', function () {\n                        unloadSheets_1.delete(css);\n                        if (unloadSheets_1.size === 0 && timer_1 !== -1) {\n                            if (beforeLoadState_1.matches('playing')) {\n                                _this.play(_this.getCurrentTime());\n                            }\n                            _this.emitter.emit(ReplayerEvents.LoadStylesheetEnd);\n                            if (timer_1) {\n                                window.clearTimeout(timer_1);\n                            }\n                            unsubscribe_1();\n                        }\n                    });\n                }\n            });\n            if (unloadSheets_1.size > 0) {\n                this.service.send({ type: 'PAUSE' });\n                this.emitter.emit(ReplayerEvents.LoadStylesheetStart);\n                timer_1 = window.setTimeout(function () {\n                    if (beforeLoadState_1.matches('playing')) {\n                        _this.play(_this.getCurrentTime());\n                    }\n                    timer_1 = -1;\n                    unsubscribe_1();\n                }, this.config.loadTimeout);\n            }\n        }\n    };\n    Replayer.prototype.preloadAllImages = function () {\n        var e_6, _a;\n        var _this = this;\n        var beforeLoadState = this.service.state;\n        var stateHandler = function () {\n            beforeLoadState = _this.service.state;\n        };\n        this.emitter.on(ReplayerEvents.Start, stateHandler);\n        this.emitter.on(ReplayerEvents.Pause, stateHandler);\n        var unsubscribe = function () {\n            _this.emitter.off(ReplayerEvents.Start, stateHandler);\n            _this.emitter.off(ReplayerEvents.Pause, stateHandler);\n        };\n        var count = 0;\n        var resolved = 0;\n        try {\n            for (var _b = __values(this.service.state.context.events), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var event = _c.value;\n                if (event.type === EventType.IncrementalSnapshot &&\n                    event.data.source === IncrementalSource.CanvasMutation &&\n                    event.data.property === 'drawImage' &&\n                    typeof event.data.args[0] === 'string' &&\n                    !this.imageMap.has(event)) {\n                    count++;\n                    var image = document.createElement('img');\n                    image.src = event.data.args[0];\n                    this.imageMap.set(event, image);\n                    image.onload = function () {\n                        resolved++;\n                        if (resolved === count) {\n                            if (beforeLoadState.matches('playing')) {\n                                _this.play(_this.getCurrentTime());\n                            }\n                            unsubscribe();\n                        }\n                    };\n                }\n            }\n        }\n        catch (e_6_1) { e_6 = { error: e_6_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_6) throw e_6.error; }\n        }\n        if (count !== resolved) {\n            this.service.send({ type: 'PAUSE' });\n        }\n    };\n    Replayer.prototype.applyIncremental = function (e, isSync) {\n        var _this = this;\n        var _a, _b;\n        var d = e.data;\n        switch (d.source) {\n            case IncrementalSource.Mutation: {\n                if (isSync) {\n                    d.adds.forEach(function (m) { return _this.treeIndex.add(m); });\n                    d.texts.forEach(function (m) { return _this.treeIndex.text(m); });\n                    d.attributes.forEach(function (m) { return _this.treeIndex.attribute(m); });\n                    d.removes.forEach(function (m) { return _this.treeIndex.remove(m); });\n                }\n                this.applyMutation(d, isSync);\n                break;\n            }\n            case IncrementalSource.MouseMove:\n                if (isSync) {\n                    var lastPosition = d.positions[d.positions.length - 1];\n                    this.moveAndHover(d, lastPosition.x, lastPosition.y, lastPosition.id);\n                }\n                else {\n                    d.positions.forEach(function (p) {\n                        var action = {\n                            doAction: function () {\n                                _this.moveAndHover(d, p.x, p.y, p.id);\n                            },\n                            delay: p.timeOffset +\n                                e.timestamp -\n                                _this.service.state.context.baselineTime,\n                        };\n                        _this.timer.addAction(action);\n                    });\n                    this.timer.addAction({\n                        doAction: function () { },\n                        delay: e.delay - ((_a = d.positions[0]) === null || _a === void 0 ? void 0 : _a.timeOffset),\n                    });\n                }\n                break;\n            case IncrementalSource.MouseInteraction: {\n                if (d.id === -1) {\n                    break;\n                }\n                var event = new Event(MouseInteractions[d.type].toLowerCase());\n                var target = mirror.getNode(d.id);\n                if (!target) {\n                    return this.debugNodeNotFound(d, d.id);\n                }\n                this.emitter.emit(ReplayerEvents.MouseInteraction, {\n                    type: d.type,\n                    target: target,\n                });\n                var triggerFocus = this.config.triggerFocus;\n                switch (d.type) {\n                    case MouseInteractions.Blur:\n                        if ('blur' in target) {\n                            target.blur();\n                        }\n                        break;\n                    case MouseInteractions.Focus:\n                        if (triggerFocus && target.focus) {\n                            target.focus({\n                                preventScroll: true,\n                            });\n                        }\n                        break;\n                    case MouseInteractions.Click:\n                    case MouseInteractions.TouchStart:\n                    case MouseInteractions.TouchEnd:\n                        if (!isSync) {\n                            this.moveAndHover(d, d.x, d.y, d.id);\n                            this.mouse.classList.remove('active');\n                            void this.mouse.offsetWidth;\n                            this.mouse.classList.add('active');\n                        }\n                        break;\n                    default:\n                        target.dispatchEvent(event);\n                }\n                break;\n            }\n            case IncrementalSource.Scroll: {\n                if (d.id === -1) {\n                    break;\n                }\n                if (isSync) {\n                    this.treeIndex.scroll(d);\n                    break;\n                }\n                this.applyScroll(d);\n                break;\n            }\n            case IncrementalSource.ViewportResize:\n                this.emitter.emit(ReplayerEvents.Resize, {\n                    width: d.width,\n                    height: d.height,\n                });\n                break;\n            case IncrementalSource.Input: {\n                if (d.id === -1) {\n                    break;\n                }\n                if (isSync) {\n                    this.treeIndex.input(d);\n                    break;\n                }\n                this.applyInput(d);\n                break;\n            }\n            case IncrementalSource.MediaInteraction: {\n                var target = mirror.getNode(d.id);\n                if (!target) {\n                    return this.debugNodeNotFound(d, d.id);\n                }\n                var mediaEl_1 = target;\n                try {\n                    if (d.type === MediaInteractions.Pause) {\n                        mediaEl_1.pause();\n                    }\n                    if (d.type === MediaInteractions.Play) {\n                        if (mediaEl_1.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA) {\n                            mediaEl_1.play();\n                        }\n                        else {\n                            mediaEl_1.addEventListener('canplay', function () {\n                                mediaEl_1.play();\n                            });\n                        }\n                    }\n                }\n                catch (error) {\n                    if (this.config.showWarning) {\n                        console.warn(\"Failed to replay media interactions: \" + (error.message || error));\n                    }\n                }\n                break;\n            }\n            case IncrementalSource.StyleSheetRule: {\n                var target = mirror.getNode(d.id);\n                if (!target) {\n                    return this.debugNodeNotFound(d, d.id);\n                }\n                var styleEl = target;\n                var parent = target.parentNode;\n                var usingVirtualParent = this.fragmentParentMap.has(parent);\n                var placeholderNode = void 0;\n                if (usingVirtualParent) {\n                    var domParent = this.fragmentParentMap.get(target.parentNode);\n                    placeholderNode = document.createTextNode('');\n                    parent.replaceChild(placeholderNode, target);\n                    domParent.appendChild(target);\n                }\n                var styleSheet_1 = styleEl.sheet;\n                if (d.adds) {\n                    d.adds.forEach(function (_a) {\n                        var rule = _a.rule, index = _a.index;\n                        try {\n                            var _index = index === undefined\n                                ? undefined\n                                : Math.min(index, styleSheet_1.rules.length);\n                            try {\n                                styleSheet_1.insertRule(rule, _index);\n                            }\n                            catch (e) {\n                            }\n                        }\n                        catch (e) {\n                        }\n                    });\n                }\n                if (d.removes) {\n                    d.removes.forEach(function (_a) {\n                        var index = _a.index;\n                        try {\n                            styleSheet_1.deleteRule(index);\n                        }\n                        catch (e) {\n                        }\n                    });\n                }\n                if (usingVirtualParent && placeholderNode) {\n                    parent.replaceChild(target, placeholderNode);\n                }\n                break;\n            }\n            case IncrementalSource.CanvasMutation: {\n                if (!this.config.UNSAFE_replayCanvas) {\n                    return;\n                }\n                var target = mirror.getNode(d.id);\n                if (!target) {\n                    return this.debugNodeNotFound(d, d.id);\n                }\n                try {\n                    var ctx = target.getContext('2d');\n                    if (d.setter) {\n                        ctx[d.property] = d.args[0];\n                        return;\n                    }\n                    var original = ctx[d.property];\n                    if (d.property === 'drawImage' && typeof d.args[0] === 'string') {\n                        var image = this.imageMap.get(e);\n                        d.args[0] = image;\n                        original.apply(ctx, d.args);\n                    }\n                    else {\n                        original.apply(ctx, d.args);\n                    }\n                }\n                catch (error) {\n                    this.warnCanvasMutationFailed(d, d.id, error);\n                }\n                break;\n            }\n            case IncrementalSource.Font: {\n                try {\n                    var fontFace = new FontFace(d.family, d.buffer ? new Uint8Array(JSON.parse(d.fontSource)) : d.fontSource, d.descriptors);\n                    (_b = this.iframe.contentDocument) === null || _b === void 0 ? void 0 : _b.fonts.add(fontFace);\n                }\n                catch (error) {\n                    if (this.config.showWarning) {\n                        console.warn(error);\n                    }\n                }\n                break;\n            }\n            case IncrementalSource.Log: {\n                try {\n                    var logData_1 = e.data;\n                    var replayLogger = this.config.logConfig.replayLogger;\n                    if (typeof replayLogger[logData_1.level] === 'function')\n                        replayLogger[logData_1.level](logData_1);\n                }\n                catch (error) {\n                    if (this.config.showWarning) {\n                        console.warn(error);\n                    }\n                }\n            }\n        }\n    };\n    Replayer.prototype.applyMutation = function (d, useVirtualParent) {\n        var e_7, _a;\n        var _this = this;\n        d.removes.forEach(function (mutation) {\n            var target = mirror.getNode(mutation.id);\n            if (!target) {\n                return _this.warnNodeNotFound(d, mutation.id);\n            }\n            var parent = mirror.getNode(mutation.parentId);\n            if (!parent) {\n                return _this.warnNodeNotFound(d, mutation.parentId);\n            }\n            mirror.removeNodeFromMap(target);\n            if (parent) {\n                var realParent = _this.fragmentParentMap.get(parent);\n                if (realParent && realParent.contains(target)) {\n                    realParent.removeChild(target);\n                }\n                else if (_this.fragmentParentMap.has(target)) {\n                    var realTarget = _this.fragmentParentMap.get(target);\n                    parent.removeChild(realTarget);\n                    _this.fragmentParentMap.delete(target);\n                }\n                else {\n                    parent.removeChild(target);\n                }\n            }\n        });\n        var legacy_missingNodeMap = __assign({}, this.legacy_missingNodeRetryMap);\n        var queue = [];\n        function nextNotInDOM(mutation) {\n            var next = null;\n            if (mutation.nextId) {\n                next = mirror.getNode(mutation.nextId);\n            }\n            if (mutation.nextId !== null &&\n                mutation.nextId !== undefined &&\n                mutation.nextId !== -1 &&\n                !next) {\n                return true;\n            }\n            return false;\n        }\n        var appendNode = function (mutation) {\n            if (!_this.iframe.contentDocument) {\n                return console.warn('Looks like your replayer has been destroyed.');\n            }\n            var parent = mirror.getNode(mutation.parentId);\n            if (!parent) {\n                return queue.push(mutation);\n            }\n            var parentInDocument = null;\n            if (_this.iframe.contentDocument.contains) {\n                parentInDocument = _this.iframe.contentDocument.contains(parent);\n            }\n            else if (_this.iframe.contentDocument.body.contains) {\n                parentInDocument = _this.iframe.contentDocument.body.contains(parent);\n            }\n            if (useVirtualParent && parentInDocument) {\n                var virtualParent = document.createDocumentFragment();\n                mirror.map[mutation.parentId] = virtualParent;\n                _this.fragmentParentMap.set(virtualParent, parent);\n                _this.storeState(parent);\n                while (parent.firstChild) {\n                    virtualParent.appendChild(parent.firstChild);\n                }\n                parent = virtualParent;\n            }\n            var previous = null;\n            var next = null;\n            if (mutation.previousId) {\n                previous = mirror.getNode(mutation.previousId);\n            }\n            if (mutation.nextId) {\n                next = mirror.getNode(mutation.nextId);\n            }\n            if (nextNotInDOM(mutation)) {\n                return queue.push(mutation);\n            }\n            var target = buildNodeWithSN(mutation.node, {\n                doc: _this.iframe.contentDocument,\n                map: mirror.map,\n                skipChild: true,\n                hackCss: true,\n            });\n            if (mutation.previousId === -1 || mutation.nextId === -1) {\n                legacy_missingNodeMap[mutation.node.id] = {\n                    node: target,\n                    mutation: mutation,\n                };\n                return;\n            }\n            if (previous && previous.nextSibling && previous.nextSibling.parentNode) {\n                parent.insertBefore(target, previous.nextSibling);\n            }\n            else if (next && next.parentNode) {\n                parent.contains(next)\n                    ? parent.insertBefore(target, next)\n                    : parent.insertBefore(target, null);\n            }\n            else {\n                parent.appendChild(target);\n            }\n            if (mutation.previousId || mutation.nextId) {\n                _this.legacy_resolveMissingNode(legacy_missingNodeMap, parent, target, mutation);\n            }\n        };\n        d.adds.forEach(function (mutation) {\n            appendNode(mutation);\n        });\n        var startTime = Date.now();\n        while (queue.length) {\n            var resolveTrees = queueToResolveTrees(queue);\n            queue.length = 0;\n            if (Date.now() - startTime > 500) {\n                this.warn('Timeout in the loop, please check the resolve tree data:', resolveTrees);\n                break;\n            }\n            try {\n                for (var resolveTrees_1 = (e_7 = void 0, __values(resolveTrees)), resolveTrees_1_1 = resolveTrees_1.next(); !resolveTrees_1_1.done; resolveTrees_1_1 = resolveTrees_1.next()) {\n                    var tree = resolveTrees_1_1.value;\n                    var parent = mirror.getNode(tree.value.parentId);\n                    if (!parent) {\n                        this.debug('Drop resolve tree since there is no parent for the root node.', tree);\n                    }\n                    else {\n                        iterateResolveTree(tree, function (mutation) {\n                            appendNode(mutation);\n                        });\n                    }\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (resolveTrees_1_1 && !resolveTrees_1_1.done && (_a = resolveTrees_1.return)) _a.call(resolveTrees_1);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n        }\n        if (Object.keys(legacy_missingNodeMap).length) {\n            Object.assign(this.legacy_missingNodeRetryMap, legacy_missingNodeMap);\n        }\n        d.texts.forEach(function (mutation) {\n            var target = mirror.getNode(mutation.id);\n            if (!target) {\n                return _this.warnNodeNotFound(d, mutation.id);\n            }\n            if (_this.fragmentParentMap.has(target)) {\n                target = _this.fragmentParentMap.get(target);\n            }\n            target.textContent = mutation.value;\n        });\n        d.attributes.forEach(function (mutation) {\n            var target = mirror.getNode(mutation.id);\n            if (!target) {\n                return _this.warnNodeNotFound(d, mutation.id);\n            }\n            if (_this.fragmentParentMap.has(target)) {\n                target = _this.fragmentParentMap.get(target);\n            }\n            for (var attributeName in mutation.attributes) {\n                if (typeof attributeName === 'string') {\n                    var value = mutation.attributes[attributeName];\n                    try {\n                        if (value !== null) {\n                            target.setAttribute(attributeName, value);\n                        }\n                        else {\n                            target.removeAttribute(attributeName);\n                        }\n                    }\n                    catch (error) {\n                        if (_this.config.showWarning) {\n                            console.warn('An error occurred may due to the checkout feature.', error);\n                        }\n                    }\n                }\n            }\n        });\n    };\n    Replayer.prototype.applyScroll = function (d) {\n        var target = mirror.getNode(d.id);\n        if (!target) {\n            return this.debugNodeNotFound(d, d.id);\n        }\n        if (target === this.iframe.contentDocument) {\n            this.iframe.contentWindow.scrollTo({\n                top: d.y,\n                left: d.x,\n                behavior: 'smooth',\n            });\n        }\n        else {\n            try {\n                target.scrollTop = d.y;\n                target.scrollLeft = d.x;\n            }\n            catch (error) {\n            }\n        }\n    };\n    Replayer.prototype.applyInput = function (d) {\n        var target = mirror.getNode(d.id);\n        if (!target) {\n            return this.debugNodeNotFound(d, d.id);\n        }\n        try {\n            target.checked = d.isChecked;\n            target.value = d.text;\n        }\n        catch (error) {\n        }\n    };\n    Replayer.prototype.formatMessage = function (data) {\n        if (data.trace.length === 0)\n            return '';\n        var stackPrefix = '\\n\\tat ';\n        var result = stackPrefix;\n        result += data.trace.join(stackPrefix);\n        return result;\n    };\n    Replayer.prototype.getConsoleLogger = function () {\n        var e_8, _a;\n        var _this = this;\n        var rrwebOriginal = '__rrweb_original__';\n        var replayLogger = {};\n        var _loop_1 = function (level) {\n            if (level === 'trace')\n                replayLogger[level] = function (data) {\n                    var logger = console.log[rrwebOriginal]\n                        ? console.log[rrwebOriginal]\n                        : console.log;\n                    logger.apply(void 0, __spread(data.payload.map(function (s) { return JSON.parse(s); }), [_this.formatMessage(data)]));\n                };\n            else\n                replayLogger[level] = function (data) {\n                    var logger = console[level][rrwebOriginal]\n                        ? console[level][rrwebOriginal]\n                        : console[level];\n                    logger.apply(void 0, __spread(data.payload.map(function (s) { return JSON.parse(s); }), [_this.formatMessage(data)]));\n                };\n        };\n        try {\n            for (var _b = __values(this.config.logConfig.level), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var level = _c.value;\n                _loop_1(level);\n            }\n        }\n        catch (e_8_1) { e_8 = { error: e_8_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_8) throw e_8.error; }\n        }\n        return replayLogger;\n    };\n    Replayer.prototype.legacy_resolveMissingNode = function (map, parent, target, targetMutation) {\n        var previousId = targetMutation.previousId, nextId = targetMutation.nextId;\n        var previousInMap = previousId && map[previousId];\n        var nextInMap = nextId && map[nextId];\n        if (previousInMap) {\n            var _a = previousInMap, node = _a.node, mutation = _a.mutation;\n            parent.insertBefore(node, target);\n            delete map[mutation.node.id];\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\n            if (mutation.previousId || mutation.nextId) {\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\n            }\n        }\n        if (nextInMap) {\n            var _b = nextInMap, node = _b.node, mutation = _b.mutation;\n            parent.insertBefore(node, target.nextSibling);\n            delete map[mutation.node.id];\n            delete this.legacy_missingNodeRetryMap[mutation.node.id];\n            if (mutation.previousId || mutation.nextId) {\n                this.legacy_resolveMissingNode(map, parent, node, mutation);\n            }\n        }\n    };\n    Replayer.prototype.moveAndHover = function (d, x, y, id) {\n        this.mouse.style.left = x + \"px\";\n        this.mouse.style.top = y + \"px\";\n        this.drawMouseTail({ x: x, y: y });\n        var target = mirror.getNode(id);\n        if (!target) {\n            return this.debugNodeNotFound(d, id);\n        }\n        this.hoverElements(target);\n    };\n    Replayer.prototype.drawMouseTail = function (position) {\n        var _this = this;\n        if (!this.mouseTail) {\n            return;\n        }\n        var _a = this.config.mouseTail === true\n            ? defaultMouseTailConfig\n            : Object.assign({}, defaultMouseTailConfig, this.config.mouseTail), lineCap = _a.lineCap, lineWidth = _a.lineWidth, strokeStyle = _a.strokeStyle, duration = _a.duration;\n        var draw = function () {\n            if (!_this.mouseTail) {\n                return;\n            }\n            var ctx = _this.mouseTail.getContext('2d');\n            if (!ctx || !_this.tailPositions.length) {\n                return;\n            }\n            ctx.clearRect(0, 0, _this.mouseTail.width, _this.mouseTail.height);\n            ctx.beginPath();\n            ctx.lineWidth = lineWidth;\n            ctx.lineCap = lineCap;\n            ctx.strokeStyle = strokeStyle;\n            ctx.moveTo(_this.tailPositions[0].x, _this.tailPositions[0].y);\n            _this.tailPositions.forEach(function (p) { return ctx.lineTo(p.x, p.y); });\n            ctx.stroke();\n        };\n        this.tailPositions.push(position);\n        draw();\n        setTimeout(function () {\n            _this.tailPositions = _this.tailPositions.filter(function (p) { return p !== position; });\n            draw();\n        }, duration / this.speedService.state.context.timer.speed);\n    };\n    Replayer.prototype.hoverElements = function (el) {\n        var _a;\n        (_a = this.iframe.contentDocument) === null || _a === void 0 ? void 0 : _a.querySelectorAll('.\\\\:hover').forEach(function (hoveredEl) {\n            hoveredEl.classList.remove(':hover');\n        });\n        var currentEl = el;\n        while (currentEl) {\n            if (currentEl.classList) {\n                currentEl.classList.add(':hover');\n            }\n            currentEl = currentEl.parentElement;\n        }\n    };\n    Replayer.prototype.isUserInteraction = function (event) {\n        if (event.type !== EventType.IncrementalSnapshot) {\n            return false;\n        }\n        return (event.data.source > IncrementalSource.Mutation &&\n            event.data.source <= IncrementalSource.Input);\n    };\n    Replayer.prototype.backToNormal = function () {\n        this.nextUserInteractionEvent = null;\n        if (this.speedService.state.matches('normal')) {\n            return;\n        }\n        this.speedService.send({ type: 'BACK_TO_NORMAL' });\n        this.emitter.emit(ReplayerEvents.SkipEnd, {\n            speed: this.speedService.state.context.normalSpeed,\n        });\n    };\n    Replayer.prototype.storeState = function (parent) {\n        var e_9, _a;\n        if (parent) {\n            if (parent.nodeType === parent.ELEMENT_NODE) {\n                var parentElement = parent;\n                if (parentElement.scrollLeft || parentElement.scrollTop) {\n                    this.elementStateMap.set(parent, {\n                        scroll: [parentElement.scrollLeft, parentElement.scrollTop],\n                    });\n                }\n                var children = parentElement.children;\n                try {\n                    for (var _b = __values(Array.from(children)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                        var child = _c.value;\n                        this.storeState(child);\n                    }\n                }\n                catch (e_9_1) { e_9 = { error: e_9_1 }; }\n                finally {\n                    try {\n                        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                    }\n                    finally { if (e_9) throw e_9.error; }\n                }\n            }\n        }\n    };\n    Replayer.prototype.restoreState = function (parent) {\n        var e_10, _a;\n        if (parent.nodeType === parent.ELEMENT_NODE) {\n            var parentElement = parent;\n            if (this.elementStateMap.has(parent)) {\n                var storedState = this.elementStateMap.get(parent);\n                if (storedState.scroll) {\n                    parentElement.scrollLeft = storedState.scroll[0];\n                    parentElement.scrollTop = storedState.scroll[1];\n                }\n                this.elementStateMap.delete(parent);\n            }\n            var children = parentElement.children;\n            try {\n                for (var _b = __values(Array.from(children)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var child = _c.value;\n                    this.restoreState(child);\n                }\n            }\n            catch (e_10_1) { e_10 = { error: e_10_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_10) throw e_10.error; }\n            }\n        }\n    };\n    Replayer.prototype.warnNodeNotFound = function (d, id) {\n        this.warn(\"Node with id '\" + id + \"' not found in\", d);\n    };\n    Replayer.prototype.warnCanvasMutationFailed = function (d, id, error) {\n        this.warn(\"Has error on update canvas '\" + id + \"'\", d, error);\n    };\n    Replayer.prototype.debugNodeNotFound = function (d, id) {\n        this.debug(REPLAY_CONSOLE_PREFIX, \"Node with id '\" + id + \"' not found in\", d);\n    };\n    Replayer.prototype.warn = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this.config.showWarning) {\n            return;\n        }\n        console.warn.apply(console, __spread([REPLAY_CONSOLE_PREFIX], args));\n    };\n    Replayer.prototype.debug = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (!this.config.showDebug) {\n            return;\n        }\n        console.log.apply(console, __spread([REPLAY_CONSOLE_PREFIX], args));\n    };\n    return Replayer;\n}());\n\nexport { Replayer };\n","export { EventType, IncrementalSource, MouseInteractions, ReplayerEvents } from './types.js';\nimport * as utils from './utils.js';\nexport { utils };\nexport { mirror } from './utils.js';\nimport record from './record/index.js';\nexport { default as record } from './record/index.js';\nexport { Replayer } from './replay/index.js';\n\nvar addCustomEvent = record.addCustomEvent;\nvar freezePage = record.freezePage;\n\nexport { addCustomEvent, freezePage };\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = hMap(flt, 9, 0), flrm = hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = hMap(fdt, 5, 0), fdrm = hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    if (final && !lm)\n        return buf;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = new u32(256);\nfor (var i = 0; i < 256; ++i) {\n    var c = i, k = 9;\n    while (--k)\n        c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n    crct[i] = c;\n}\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nfunction zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nfunction unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nfunction strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nfunction strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n\nexport { strFromU8, strToU8, unzlibSync, zlibSync };\n","var MARK = 'v1';\n\nexport { MARK };\n","import { __assign } from '../../node_modules/tslib/tslib.es6.js';\nimport { strFromU8, zlibSync, strToU8 } from '../../node_modules/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nvar pack = function (event) {\n    var _e = __assign(__assign({}, event), { v: MARK });\n    return strFromU8(zlibSync(strToU8(JSON.stringify(_e))), true);\n};\n\nexport { pack };\n","import { strFromU8, unzlibSync, strToU8 } from '../../node_modules/fflate/esm/browser.js';\nimport { MARK } from './base.js';\n\nvar unpack = function (raw) {\n    if (typeof raw !== 'string') {\n        return raw;\n    }\n    try {\n        var e = JSON.parse(raw);\n        if (e.timestamp) {\n            return e;\n        }\n    }\n    catch (error) {\n    }\n    try {\n        var e = JSON.parse(strFromU8(unzlibSync(strToU8(raw, true))));\n        if (e.v === MARK) {\n            return e;\n        }\n        throw new Error(\"These events were packed with packer \" + e.v + \" which is incompatible with current packer \" + MARK + \".\");\n    }\n    catch (error) {\n        console.error(error);\n        throw new Error('Unknown data format.');\n    }\n};\n\nexport { unpack };\n","export { EventType, IncrementalSource, MouseInteractions, ReplayerEvents } from '../types.js';\nimport * as utils from '../utils.js';\nexport { utils };\nexport { mirror } from '../utils.js';\nexport { default as record } from '../record/index.js';\nexport { Replayer } from '../replay/index.js';\nexport { addCustomEvent, freezePage } from '../index.js';\nexport { pack } from '../packer/pack.js';\nexport { unpack } from '../packer/unpack.js';\n","'use strict';\n\nmodule.exports = function bind(fn, thisArg) {\n  return function wrap() {\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n    return fn.apply(thisArg, args);\n  };\n};\n","'use strict';\n\nvar bind = require('./helpers/bind');\n\n/*global toString:true*/\n\n// utils is a library of generic helper functions non-specific to axios\n\nvar toString = Object.prototype.toString;\n\n/**\n * Determine if a value is an Array\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Array, otherwise false\n */\nfunction isArray(val) {\n  return toString.call(val) === '[object Array]';\n}\n\n/**\n * Determine if a value is undefined\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if the value is undefined, otherwise false\n */\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\n/**\n * Determine if a value is a Buffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Buffer, otherwise false\n */\nfunction isBuffer(val) {\n  return val !== null && !isUndefined(val) && val.constructor !== null && !isUndefined(val.constructor)\n    && typeof val.constructor.isBuffer === 'function' && val.constructor.isBuffer(val);\n}\n\n/**\n * Determine if a value is an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an ArrayBuffer, otherwise false\n */\nfunction isArrayBuffer(val) {\n  return toString.call(val) === '[object ArrayBuffer]';\n}\n\n/**\n * Determine if a value is a FormData\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an FormData, otherwise false\n */\nfunction isFormData(val) {\n  return (typeof FormData !== 'undefined') && (val instanceof FormData);\n}\n\n/**\n * Determine if a value is a view on an ArrayBuffer\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a view on an ArrayBuffer, otherwise false\n */\nfunction isArrayBufferView(val) {\n  var result;\n  if ((typeof ArrayBuffer !== 'undefined') && (ArrayBuffer.isView)) {\n    result = ArrayBuffer.isView(val);\n  } else {\n    result = (val) && (val.buffer) && (val.buffer instanceof ArrayBuffer);\n  }\n  return result;\n}\n\n/**\n * Determine if a value is a String\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a String, otherwise false\n */\nfunction isString(val) {\n  return typeof val === 'string';\n}\n\n/**\n * Determine if a value is a Number\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Number, otherwise false\n */\nfunction isNumber(val) {\n  return typeof val === 'number';\n}\n\n/**\n * Determine if a value is an Object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is an Object, otherwise false\n */\nfunction isObject(val) {\n  return val !== null && typeof val === 'object';\n}\n\n/**\n * Determine if a value is a plain Object\n *\n * @param {Object} val The value to test\n * @return {boolean} True if value is a plain Object, otherwise false\n */\nfunction isPlainObject(val) {\n  if (toString.call(val) !== '[object Object]') {\n    return false;\n  }\n\n  var prototype = Object.getPrototypeOf(val);\n  return prototype === null || prototype === Object.prototype;\n}\n\n/**\n * Determine if a value is a Date\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Date, otherwise false\n */\nfunction isDate(val) {\n  return toString.call(val) === '[object Date]';\n}\n\n/**\n * Determine if a value is a File\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a File, otherwise false\n */\nfunction isFile(val) {\n  return toString.call(val) === '[object File]';\n}\n\n/**\n * Determine if a value is a Blob\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Blob, otherwise false\n */\nfunction isBlob(val) {\n  return toString.call(val) === '[object Blob]';\n}\n\n/**\n * Determine if a value is a Function\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Function, otherwise false\n */\nfunction isFunction(val) {\n  return toString.call(val) === '[object Function]';\n}\n\n/**\n * Determine if a value is a Stream\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a Stream, otherwise false\n */\nfunction isStream(val) {\n  return isObject(val) && isFunction(val.pipe);\n}\n\n/**\n * Determine if a value is a URLSearchParams object\n *\n * @param {Object} val The value to test\n * @returns {boolean} True if value is a URLSearchParams object, otherwise false\n */\nfunction isURLSearchParams(val) {\n  return typeof URLSearchParams !== 'undefined' && val instanceof URLSearchParams;\n}\n\n/**\n * Trim excess whitespace off the beginning and end of a string\n *\n * @param {String} str The String to trim\n * @returns {String} The String freed of excess whitespace\n */\nfunction trim(str) {\n  return str.replace(/^\\s*/, '').replace(/\\s*$/, '');\n}\n\n/**\n * Determine if we're running in a standard browser environment\n *\n * This allows axios to run in a web worker, and react-native.\n * Both environments support XMLHttpRequest, but not fully standard globals.\n *\n * web workers:\n *  typeof window -> undefined\n *  typeof document -> undefined\n *\n * react-native:\n *  navigator.product -> 'ReactNative'\n * nativescript\n *  navigator.product -> 'NativeScript' or 'NS'\n */\nfunction isStandardBrowserEnv() {\n  if (typeof navigator !== 'undefined' && (navigator.product === 'ReactNative' ||\n                                           navigator.product === 'NativeScript' ||\n                                           navigator.product === 'NS')) {\n    return false;\n  }\n  return (\n    typeof window !== 'undefined' &&\n    typeof document !== 'undefined'\n  );\n}\n\n/**\n * Iterate over an Array or an Object invoking a function for each item.\n *\n * If `obj` is an Array callback will be called passing\n * the value, index, and complete array for each item.\n *\n * If 'obj' is an Object callback will be called passing\n * the value, key, and complete object for each property.\n *\n * @param {Object|Array} obj The object to iterate\n * @param {Function} fn The callback to invoke for each item\n */\nfunction forEach(obj, fn) {\n  // Don't bother if no value provided\n  if (obj === null || typeof obj === 'undefined') {\n    return;\n  }\n\n  // Force an array if not already something iterable\n  if (typeof obj !== 'object') {\n    /*eslint no-param-reassign:0*/\n    obj = [obj];\n  }\n\n  if (isArray(obj)) {\n    // Iterate over array values\n    for (var i = 0, l = obj.length; i < l; i++) {\n      fn.call(null, obj[i], i, obj);\n    }\n  } else {\n    // Iterate over object keys\n    for (var key in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, key)) {\n        fn.call(null, obj[key], key, obj);\n      }\n    }\n  }\n}\n\n/**\n * Accepts varargs expecting each argument to be an object, then\n * immutably merges the properties of each object and returns result.\n *\n * When multiple objects contain the same key the later object in\n * the arguments list will take precedence.\n *\n * Example:\n *\n * ```js\n * var result = merge({foo: 123}, {foo: 456});\n * console.log(result.foo); // outputs 456\n * ```\n *\n * @param {Object} obj1 Object to merge\n * @returns {Object} Result of all merge properties\n */\nfunction merge(/* obj1, obj2, obj3, ... */) {\n  var result = {};\n  function assignValue(val, key) {\n    if (isPlainObject(result[key]) && isPlainObject(val)) {\n      result[key] = merge(result[key], val);\n    } else if (isPlainObject(val)) {\n      result[key] = merge({}, val);\n    } else if (isArray(val)) {\n      result[key] = val.slice();\n    } else {\n      result[key] = val;\n    }\n  }\n\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    forEach(arguments[i], assignValue);\n  }\n  return result;\n}\n\n/**\n * Extends object a by mutably adding to it the properties of object b.\n *\n * @param {Object} a The object to be extended\n * @param {Object} b The object to copy properties from\n * @param {Object} thisArg The object to bind function to\n * @return {Object} The resulting value of object a\n */\nfunction extend(a, b, thisArg) {\n  forEach(b, function assignValue(val, key) {\n    if (thisArg && typeof val === 'function') {\n      a[key] = bind(val, thisArg);\n    } else {\n      a[key] = val;\n    }\n  });\n  return a;\n}\n\n/**\n * Remove byte order marker. This catches EF BB BF (the UTF-8 BOM)\n *\n * @param {string} content with BOM\n * @return {string} content value without BOM\n */\nfunction stripBOM(content) {\n  if (content.charCodeAt(0) === 0xFEFF) {\n    content = content.slice(1);\n  }\n  return content;\n}\n\nmodule.exports = {\n  isArray: isArray,\n  isArrayBuffer: isArrayBuffer,\n  isBuffer: isBuffer,\n  isFormData: isFormData,\n  isArrayBufferView: isArrayBufferView,\n  isString: isString,\n  isNumber: isNumber,\n  isObject: isObject,\n  isPlainObject: isPlainObject,\n  isUndefined: isUndefined,\n  isDate: isDate,\n  isFile: isFile,\n  isBlob: isBlob,\n  isFunction: isFunction,\n  isStream: isStream,\n  isURLSearchParams: isURLSearchParams,\n  isStandardBrowserEnv: isStandardBrowserEnv,\n  forEach: forEach,\n  merge: merge,\n  extend: extend,\n  trim: trim,\n  stripBOM: stripBOM\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction encode(val) {\n  return encodeURIComponent(val).\n    replace(/%3A/gi, ':').\n    replace(/%24/g, '$').\n    replace(/%2C/gi, ',').\n    replace(/%20/g, '+').\n    replace(/%5B/gi, '[').\n    replace(/%5D/gi, ']');\n}\n\n/**\n * Build a URL by appending params to the end\n *\n * @param {string} url The base of the url (e.g., http://www.google.com)\n * @param {object} [params] The params to be appended\n * @returns {string} The formatted url\n */\nmodule.exports = function buildURL(url, params, paramsSerializer) {\n  /*eslint no-param-reassign:0*/\n  if (!params) {\n    return url;\n  }\n\n  var serializedParams;\n  if (paramsSerializer) {\n    serializedParams = paramsSerializer(params);\n  } else if (utils.isURLSearchParams(params)) {\n    serializedParams = params.toString();\n  } else {\n    var parts = [];\n\n    utils.forEach(params, function serialize(val, key) {\n      if (val === null || typeof val === 'undefined') {\n        return;\n      }\n\n      if (utils.isArray(val)) {\n        key = key + '[]';\n      } else {\n        val = [val];\n      }\n\n      utils.forEach(val, function parseValue(v) {\n        if (utils.isDate(v)) {\n          v = v.toISOString();\n        } else if (utils.isObject(v)) {\n          v = JSON.stringify(v);\n        }\n        parts.push(encode(key) + '=' + encode(v));\n      });\n    });\n\n    serializedParams = parts.join('&');\n  }\n\n  if (serializedParams) {\n    var hashmarkIndex = url.indexOf('#');\n    if (hashmarkIndex !== -1) {\n      url = url.slice(0, hashmarkIndex);\n    }\n\n    url += (url.indexOf('?') === -1 ? '?' : '&') + serializedParams;\n  }\n\n  return url;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nfunction InterceptorManager() {\n  this.handlers = [];\n}\n\n/**\n * Add a new interceptor to the stack\n *\n * @param {Function} fulfilled The function to handle `then` for a `Promise`\n * @param {Function} rejected The function to handle `reject` for a `Promise`\n *\n * @return {Number} An ID used to remove interceptor later\n */\nInterceptorManager.prototype.use = function use(fulfilled, rejected) {\n  this.handlers.push({\n    fulfilled: fulfilled,\n    rejected: rejected\n  });\n  return this.handlers.length - 1;\n};\n\n/**\n * Remove an interceptor from the stack\n *\n * @param {Number} id The ID that was returned by `use`\n */\nInterceptorManager.prototype.eject = function eject(id) {\n  if (this.handlers[id]) {\n    this.handlers[id] = null;\n  }\n};\n\n/**\n * Iterate over all the registered interceptors\n *\n * This method is particularly useful for skipping over any\n * interceptors that may have become `null` calling `eject`.\n *\n * @param {Function} fn The function to call for each interceptor\n */\nInterceptorManager.prototype.forEach = function forEach(fn) {\n  utils.forEach(this.handlers, function forEachHandler(h) {\n    if (h !== null) {\n      fn(h);\n    }\n  });\n};\n\nmodule.exports = InterceptorManager;\n","'use strict';\n\nvar utils = require('./../utils');\n\n/**\n * Transform the data for a request or a response\n *\n * @param {Object|String} data The data to be transformed\n * @param {Array} headers The headers for the request or response\n * @param {Array|Function} fns A single function or Array of functions\n * @returns {*} The resulting transformed data\n */\nmodule.exports = function transformData(data, headers, fns) {\n  /*eslint no-param-reassign:0*/\n  utils.forEach(fns, function transform(fn) {\n    data = fn(data, headers);\n  });\n\n  return data;\n};\n","'use strict';\n\nmodule.exports = function isCancel(value) {\n  return !!(value && value.__CANCEL__);\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nmodule.exports = function normalizeHeaderName(headers, normalizedName) {\n  utils.forEach(headers, function processHeader(value, name) {\n    if (name !== normalizedName && name.toUpperCase() === normalizedName.toUpperCase()) {\n      headers[normalizedName] = value;\n      delete headers[name];\n    }\n  });\n};\n","'use strict';\n\n/**\n * Update an Error with the specified config, error code, and response.\n *\n * @param {Error} error The error to update.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The error.\n */\nmodule.exports = function enhanceError(error, config, code, request, response) {\n  error.config = config;\n  if (code) {\n    error.code = code;\n  }\n\n  error.request = request;\n  error.response = response;\n  error.isAxiosError = true;\n\n  error.toJSON = function toJSON() {\n    return {\n      // Standard\n      message: this.message,\n      name: this.name,\n      // Microsoft\n      description: this.description,\n      number: this.number,\n      // Mozilla\n      fileName: this.fileName,\n      lineNumber: this.lineNumber,\n      columnNumber: this.columnNumber,\n      stack: this.stack,\n      // Axios\n      config: this.config,\n      code: this.code\n    };\n  };\n  return error;\n};\n","'use strict';\n\nvar enhanceError = require('./enhanceError');\n\n/**\n * Create an Error with the specified message, config, error code, request and response.\n *\n * @param {string} message The error message.\n * @param {Object} config The config.\n * @param {string} [code] The error code (for example, 'ECONNABORTED').\n * @param {Object} [request] The request.\n * @param {Object} [response] The response.\n * @returns {Error} The created error.\n */\nmodule.exports = function createError(message, config, code, request, response) {\n  var error = new Error(message);\n  return enhanceError(error, config, code, request, response);\n};\n","'use strict';\n\nvar createError = require('./createError');\n\n/**\n * Resolve or reject a Promise based on response status.\n *\n * @param {Function} resolve A function that resolves the promise.\n * @param {Function} reject A function that rejects the promise.\n * @param {object} response The response.\n */\nmodule.exports = function settle(resolve, reject, response) {\n  var validateStatus = response.config.validateStatus;\n  if (!response.status || !validateStatus || validateStatus(response.status)) {\n    resolve(response);\n  } else {\n    reject(createError(\n      'Request failed with status code ' + response.status,\n      response.config,\n      null,\n      response.request,\n      response\n    ));\n  }\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs support document.cookie\n    (function standardBrowserEnv() {\n      return {\n        write: function write(name, value, expires, path, domain, secure) {\n          var cookie = [];\n          cookie.push(name + '=' + encodeURIComponent(value));\n\n          if (utils.isNumber(expires)) {\n            cookie.push('expires=' + new Date(expires).toGMTString());\n          }\n\n          if (utils.isString(path)) {\n            cookie.push('path=' + path);\n          }\n\n          if (utils.isString(domain)) {\n            cookie.push('domain=' + domain);\n          }\n\n          if (secure === true) {\n            cookie.push('secure');\n          }\n\n          document.cookie = cookie.join('; ');\n        },\n\n        read: function read(name) {\n          var match = document.cookie.match(new RegExp('(^|;\\\\s*)(' + name + ')=([^;]*)'));\n          return (match ? decodeURIComponent(match[3]) : null);\n        },\n\n        remove: function remove(name) {\n          this.write(name, '', Date.now() - 86400000);\n        }\n      };\n    })() :\n\n  // Non standard browser env (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return {\n        write: function write() {},\n        read: function read() { return null; },\n        remove: function remove() {}\n      };\n    })()\n);\n","'use strict';\n\n/**\n * Determines whether the specified URL is absolute\n *\n * @param {string} url The URL to test\n * @returns {boolean} True if the specified URL is absolute, otherwise false\n */\nmodule.exports = function isAbsoluteURL(url) {\n  // A URL is considered absolute if it begins with \"<scheme>://\" or \"//\" (protocol-relative URL).\n  // RFC 3986 defines scheme name as a sequence of characters beginning with a letter and followed\n  // by any combination of letters, digits, plus, period, or hyphen.\n  return /^([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\//i.test(url);\n};\n","'use strict';\n\n/**\n * Creates a new URL by combining the specified URLs\n *\n * @param {string} baseURL The base URL\n * @param {string} relativeURL The relative URL\n * @returns {string} The combined URL\n */\nmodule.exports = function combineURLs(baseURL, relativeURL) {\n  return relativeURL\n    ? baseURL.replace(/\\/+$/, '') + '/' + relativeURL.replace(/^\\/+/, '')\n    : baseURL;\n};\n","'use strict';\n\nvar isAbsoluteURL = require('../helpers/isAbsoluteURL');\nvar combineURLs = require('../helpers/combineURLs');\n\n/**\n * Creates a new URL by combining the baseURL with the requestedURL,\n * only when the requestedURL is not already an absolute URL.\n * If the requestURL is absolute, this function returns the requestedURL untouched.\n *\n * @param {string} baseURL The base URL\n * @param {string} requestedURL Absolute or relative URL to combine\n * @returns {string} The combined full path\n */\nmodule.exports = function buildFullPath(baseURL, requestedURL) {\n  if (baseURL && !isAbsoluteURL(requestedURL)) {\n    return combineURLs(baseURL, requestedURL);\n  }\n  return requestedURL;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\n// Headers whose duplicates are ignored by node\n// c.f. https://nodejs.org/api/http.html#http_message_headers\nvar ignoreDuplicateOf = [\n  'age', 'authorization', 'content-length', 'content-type', 'etag',\n  'expires', 'from', 'host', 'if-modified-since', 'if-unmodified-since',\n  'last-modified', 'location', 'max-forwards', 'proxy-authorization',\n  'referer', 'retry-after', 'user-agent'\n];\n\n/**\n * Parse headers into an object\n *\n * ```\n * Date: Wed, 27 Aug 2014 08:58:49 GMT\n * Content-Type: application/json\n * Connection: keep-alive\n * Transfer-Encoding: chunked\n * ```\n *\n * @param {String} headers Headers needing to be parsed\n * @returns {Object} Headers parsed into an object\n */\nmodule.exports = function parseHeaders(headers) {\n  var parsed = {};\n  var key;\n  var val;\n  var i;\n\n  if (!headers) { return parsed; }\n\n  utils.forEach(headers.split('\\n'), function parser(line) {\n    i = line.indexOf(':');\n    key = utils.trim(line.substr(0, i)).toLowerCase();\n    val = utils.trim(line.substr(i + 1));\n\n    if (key) {\n      if (parsed[key] && ignoreDuplicateOf.indexOf(key) >= 0) {\n        return;\n      }\n      if (key === 'set-cookie') {\n        parsed[key] = (parsed[key] ? parsed[key] : []).concat([val]);\n      } else {\n        parsed[key] = parsed[key] ? parsed[key] + ', ' + val : val;\n      }\n    }\n  });\n\n  return parsed;\n};\n","'use strict';\n\nvar utils = require('./../utils');\n\nmodule.exports = (\n  utils.isStandardBrowserEnv() ?\n\n  // Standard browser envs have full support of the APIs needed to test\n  // whether the request URL is of the same origin as current location.\n    (function standardBrowserEnv() {\n      var msie = /(msie|trident)/i.test(navigator.userAgent);\n      var urlParsingNode = document.createElement('a');\n      var originURL;\n\n      /**\n    * Parse a URL to discover it's components\n    *\n    * @param {String} url The URL to be parsed\n    * @returns {Object}\n    */\n      function resolveURL(url) {\n        var href = url;\n\n        if (msie) {\n        // IE needs attribute set twice to normalize properties\n          urlParsingNode.setAttribute('href', href);\n          href = urlParsingNode.href;\n        }\n\n        urlParsingNode.setAttribute('href', href);\n\n        // urlParsingNode provides the UrlUtils interface - http://url.spec.whatwg.org/#urlutils\n        return {\n          href: urlParsingNode.href,\n          protocol: urlParsingNode.protocol ? urlParsingNode.protocol.replace(/:$/, '') : '',\n          host: urlParsingNode.host,\n          search: urlParsingNode.search ? urlParsingNode.search.replace(/^\\?/, '') : '',\n          hash: urlParsingNode.hash ? urlParsingNode.hash.replace(/^#/, '') : '',\n          hostname: urlParsingNode.hostname,\n          port: urlParsingNode.port,\n          pathname: (urlParsingNode.pathname.charAt(0) === '/') ?\n            urlParsingNode.pathname :\n            '/' + urlParsingNode.pathname\n        };\n      }\n\n      originURL = resolveURL(window.location.href);\n\n      /**\n    * Determine if a URL shares the same origin as the current location\n    *\n    * @param {String} requestURL The URL to test\n    * @returns {boolean} True if URL shares the same origin, otherwise false\n    */\n      return function isURLSameOrigin(requestURL) {\n        var parsed = (utils.isString(requestURL)) ? resolveURL(requestURL) : requestURL;\n        return (parsed.protocol === originURL.protocol &&\n            parsed.host === originURL.host);\n      };\n    })() :\n\n  // Non standard browser envs (web workers, react-native) lack needed support.\n    (function nonStandardBrowserEnv() {\n      return function isURLSameOrigin() {\n        return true;\n      };\n    })()\n);\n","'use strict';\n\nvar utils = require('./../utils');\nvar settle = require('./../core/settle');\nvar cookies = require('./../helpers/cookies');\nvar buildURL = require('./../helpers/buildURL');\nvar buildFullPath = require('../core/buildFullPath');\nvar parseHeaders = require('./../helpers/parseHeaders');\nvar isURLSameOrigin = require('./../helpers/isURLSameOrigin');\nvar createError = require('../core/createError');\n\nmodule.exports = function xhrAdapter(config) {\n  return new Promise(function dispatchXhrRequest(resolve, reject) {\n    var requestData = config.data;\n    var requestHeaders = config.headers;\n\n    if (utils.isFormData(requestData)) {\n      delete requestHeaders['Content-Type']; // Let the browser set it\n    }\n\n    var request = new XMLHttpRequest();\n\n    // HTTP basic authentication\n    if (config.auth) {\n      var username = config.auth.username || '';\n      var password = config.auth.password ? unescape(encodeURIComponent(config.auth.password)) : '';\n      requestHeaders.Authorization = 'Basic ' + btoa(username + ':' + password);\n    }\n\n    var fullPath = buildFullPath(config.baseURL, config.url);\n    request.open(config.method.toUpperCase(), buildURL(fullPath, config.params, config.paramsSerializer), true);\n\n    // Set the request timeout in MS\n    request.timeout = config.timeout;\n\n    // Listen for ready state\n    request.onreadystatechange = function handleLoad() {\n      if (!request || request.readyState !== 4) {\n        return;\n      }\n\n      // The request errored out and we didn't get a response, this will be\n      // handled by onerror instead\n      // With one exception: request that using file: protocol, most browsers\n      // will return status as 0 even though it's a successful request\n      if (request.status === 0 && !(request.responseURL && request.responseURL.indexOf('file:') === 0)) {\n        return;\n      }\n\n      // Prepare the response\n      var responseHeaders = 'getAllResponseHeaders' in request ? parseHeaders(request.getAllResponseHeaders()) : null;\n      var responseData = !config.responseType || config.responseType === 'text' ? request.responseText : request.response;\n      var response = {\n        data: responseData,\n        status: request.status,\n        statusText: request.statusText,\n        headers: responseHeaders,\n        config: config,\n        request: request\n      };\n\n      settle(resolve, reject, response);\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle browser request cancellation (as opposed to a manual cancellation)\n    request.onabort = function handleAbort() {\n      if (!request) {\n        return;\n      }\n\n      reject(createError('Request aborted', config, 'ECONNABORTED', request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle low level network errors\n    request.onerror = function handleError() {\n      // Real errors are hidden from us by the browser\n      // onerror should only fire if it's a network error\n      reject(createError('Network Error', config, null, request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Handle timeout\n    request.ontimeout = function handleTimeout() {\n      var timeoutErrorMessage = 'timeout of ' + config.timeout + 'ms exceeded';\n      if (config.timeoutErrorMessage) {\n        timeoutErrorMessage = config.timeoutErrorMessage;\n      }\n      reject(createError(timeoutErrorMessage, config, 'ECONNABORTED',\n        request));\n\n      // Clean up request\n      request = null;\n    };\n\n    // Add xsrf header\n    // This is only done if running in a standard browser environment.\n    // Specifically not if we're in a web worker, or react-native.\n    if (utils.isStandardBrowserEnv()) {\n      // Add xsrf header\n      var xsrfValue = (config.withCredentials || isURLSameOrigin(fullPath)) && config.xsrfCookieName ?\n        cookies.read(config.xsrfCookieName) :\n        undefined;\n\n      if (xsrfValue) {\n        requestHeaders[config.xsrfHeaderName] = xsrfValue;\n      }\n    }\n\n    // Add headers to the request\n    if ('setRequestHeader' in request) {\n      utils.forEach(requestHeaders, function setRequestHeader(val, key) {\n        if (typeof requestData === 'undefined' && key.toLowerCase() === 'content-type') {\n          // Remove Content-Type if data is undefined\n          delete requestHeaders[key];\n        } else {\n          // Otherwise add header to the request\n          request.setRequestHeader(key, val);\n        }\n      });\n    }\n\n    // Add withCredentials to request if needed\n    if (!utils.isUndefined(config.withCredentials)) {\n      request.withCredentials = !!config.withCredentials;\n    }\n\n    // Add responseType to request if needed\n    if (config.responseType) {\n      try {\n        request.responseType = config.responseType;\n      } catch (e) {\n        // Expected DOMException thrown by browsers not compatible XMLHttpRequest Level 2.\n        // But, this can be suppressed for 'json' type as it can be parsed by default 'transformResponse' function.\n        if (config.responseType !== 'json') {\n          throw e;\n        }\n      }\n    }\n\n    // Handle progress if needed\n    if (typeof config.onDownloadProgress === 'function') {\n      request.addEventListener('progress', config.onDownloadProgress);\n    }\n\n    // Not all browsers support upload events\n    if (typeof config.onUploadProgress === 'function' && request.upload) {\n      request.upload.addEventListener('progress', config.onUploadProgress);\n    }\n\n    if (config.cancelToken) {\n      // Handle cancellation\n      config.cancelToken.promise.then(function onCanceled(cancel) {\n        if (!request) {\n          return;\n        }\n\n        request.abort();\n        reject(cancel);\n        // Clean up request\n        request = null;\n      });\n    }\n\n    if (!requestData) {\n      requestData = null;\n    }\n\n    // Send the request\n    request.send(requestData);\n  });\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","'use strict';\n\nvar utils = require('./utils');\nvar normalizeHeaderName = require('./helpers/normalizeHeaderName');\n\nvar DEFAULT_CONTENT_TYPE = {\n  'Content-Type': 'application/x-www-form-urlencoded'\n};\n\nfunction setContentTypeIfUnset(headers, value) {\n  if (!utils.isUndefined(headers) && utils.isUndefined(headers['Content-Type'])) {\n    headers['Content-Type'] = value;\n  }\n}\n\nfunction getDefaultAdapter() {\n  var adapter;\n  if (typeof XMLHttpRequest !== 'undefined') {\n    // For browsers use XHR adapter\n    adapter = require('./adapters/xhr');\n  } else if (typeof process !== 'undefined' && Object.prototype.toString.call(process) === '[object process]') {\n    // For node use HTTP adapter\n    adapter = require('./adapters/http');\n  }\n  return adapter;\n}\n\nvar defaults = {\n  adapter: getDefaultAdapter(),\n\n  transformRequest: [function transformRequest(data, headers) {\n    normalizeHeaderName(headers, 'Accept');\n    normalizeHeaderName(headers, 'Content-Type');\n    if (utils.isFormData(data) ||\n      utils.isArrayBuffer(data) ||\n      utils.isBuffer(data) ||\n      utils.isStream(data) ||\n      utils.isFile(data) ||\n      utils.isBlob(data)\n    ) {\n      return data;\n    }\n    if (utils.isArrayBufferView(data)) {\n      return data.buffer;\n    }\n    if (utils.isURLSearchParams(data)) {\n      setContentTypeIfUnset(headers, 'application/x-www-form-urlencoded;charset=utf-8');\n      return data.toString();\n    }\n    if (utils.isObject(data)) {\n      setContentTypeIfUnset(headers, 'application/json;charset=utf-8');\n      return JSON.stringify(data);\n    }\n    return data;\n  }],\n\n  transformResponse: [function transformResponse(data) {\n    /*eslint no-param-reassign:0*/\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data);\n      } catch (e) { /* Ignore */ }\n    }\n    return data;\n  }],\n\n  /**\n   * A timeout in milliseconds to abort a request. If set to 0 (default) a\n   * timeout is not created.\n   */\n  timeout: 0,\n\n  xsrfCookieName: 'XSRF-TOKEN',\n  xsrfHeaderName: 'X-XSRF-TOKEN',\n\n  maxContentLength: -1,\n  maxBodyLength: -1,\n\n  validateStatus: function validateStatus(status) {\n    return status >= 200 && status < 300;\n  }\n};\n\ndefaults.headers = {\n  common: {\n    'Accept': 'application/json, text/plain, */*'\n  }\n};\n\nutils.forEach(['delete', 'get', 'head'], function forEachMethodNoData(method) {\n  defaults.headers[method] = {};\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);\n});\n\nmodule.exports = defaults;\n","'use strict';\n\nvar utils = require('./../utils');\nvar transformData = require('./transformData');\nvar isCancel = require('../cancel/isCancel');\nvar defaults = require('../defaults');\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nfunction throwIfCancellationRequested(config) {\n  if (config.cancelToken) {\n    config.cancelToken.throwIfRequested();\n  }\n}\n\n/**\n * Dispatch a request to the server using the configured adapter.\n *\n * @param {object} config The config that is to be used for the request\n * @returns {Promise} The Promise to be fulfilled\n */\nmodule.exports = function dispatchRequest(config) {\n  throwIfCancellationRequested(config);\n\n  // Ensure headers exist\n  config.headers = config.headers || {};\n\n  // Transform request data\n  config.data = transformData(\n    config.data,\n    config.headers,\n    config.transformRequest\n  );\n\n  // Flatten headers\n  config.headers = utils.merge(\n    config.headers.common || {},\n    config.headers[config.method] || {},\n    config.headers\n  );\n\n  utils.forEach(\n    ['delete', 'get', 'head', 'post', 'put', 'patch', 'common'],\n    function cleanHeaderConfig(method) {\n      delete config.headers[method];\n    }\n  );\n\n  var adapter = config.adapter || defaults.adapter;\n\n  return adapter(config).then(function onAdapterResolution(response) {\n    throwIfCancellationRequested(config);\n\n    // Transform response data\n    response.data = transformData(\n      response.data,\n      response.headers,\n      config.transformResponse\n    );\n\n    return response;\n  }, function onAdapterRejection(reason) {\n    if (!isCancel(reason)) {\n      throwIfCancellationRequested(config);\n\n      // Transform response data\n      if (reason && reason.response) {\n        reason.response.data = transformData(\n          reason.response.data,\n          reason.response.headers,\n          config.transformResponse\n        );\n      }\n    }\n\n    return Promise.reject(reason);\n  });\n};\n","'use strict';\n\nvar utils = require('../utils');\n\n/**\n * Config-specific merge-function which creates a new config-object\n * by merging two configuration objects together.\n *\n * @param {Object} config1\n * @param {Object} config2\n * @returns {Object} New object resulting from merging config2 to config1\n */\nmodule.exports = function mergeConfig(config1, config2) {\n  // eslint-disable-next-line no-param-reassign\n  config2 = config2 || {};\n  var config = {};\n\n  var valueFromConfig2Keys = ['url', 'method', 'data'];\n  var mergeDeepPropertiesKeys = ['headers', 'auth', 'proxy', 'params'];\n  var defaultToConfig2Keys = [\n    'baseURL', 'transformRequest', 'transformResponse', 'paramsSerializer',\n    'timeout', 'timeoutMessage', 'withCredentials', 'adapter', 'responseType', 'xsrfCookieName',\n    'xsrfHeaderName', 'onUploadProgress', 'onDownloadProgress', 'decompress',\n    'maxContentLength', 'maxBodyLength', 'maxRedirects', 'transport', 'httpAgent',\n    'httpsAgent', 'cancelToken', 'socketPath', 'responseEncoding'\n  ];\n  var directMergeKeys = ['validateStatus'];\n\n  function getMergedValue(target, source) {\n    if (utils.isPlainObject(target) && utils.isPlainObject(source)) {\n      return utils.merge(target, source);\n    } else if (utils.isPlainObject(source)) {\n      return utils.merge({}, source);\n    } else if (utils.isArray(source)) {\n      return source.slice();\n    }\n    return source;\n  }\n\n  function mergeDeepProperties(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  }\n\n  utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    }\n  });\n\n  utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties);\n\n  utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) {\n    if (!utils.isUndefined(config2[prop])) {\n      config[prop] = getMergedValue(undefined, config2[prop]);\n    } else if (!utils.isUndefined(config1[prop])) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  utils.forEach(directMergeKeys, function merge(prop) {\n    if (prop in config2) {\n      config[prop] = getMergedValue(config1[prop], config2[prop]);\n    } else if (prop in config1) {\n      config[prop] = getMergedValue(undefined, config1[prop]);\n    }\n  });\n\n  var axiosKeys = valueFromConfig2Keys\n    .concat(mergeDeepPropertiesKeys)\n    .concat(defaultToConfig2Keys)\n    .concat(directMergeKeys);\n\n  var otherKeys = Object\n    .keys(config1)\n    .concat(Object.keys(config2))\n    .filter(function filterAxiosKeys(key) {\n      return axiosKeys.indexOf(key) === -1;\n    });\n\n  utils.forEach(otherKeys, mergeDeepProperties);\n\n  return config;\n};\n","'use strict';\n\nvar utils = require('./../utils');\nvar buildURL = require('../helpers/buildURL');\nvar InterceptorManager = require('./InterceptorManager');\nvar dispatchRequest = require('./dispatchRequest');\nvar mergeConfig = require('./mergeConfig');\n\n/**\n * Create a new instance of Axios\n *\n * @param {Object} instanceConfig The default config for the instance\n */\nfunction Axios(instanceConfig) {\n  this.defaults = instanceConfig;\n  this.interceptors = {\n    request: new InterceptorManager(),\n    response: new InterceptorManager()\n  };\n}\n\n/**\n * Dispatch a request\n *\n * @param {Object} config The config specific for this request (merged with this.defaults)\n */\nAxios.prototype.request = function request(config) {\n  /*eslint no-param-reassign:0*/\n  // Allow for axios('example/url'[, config]) a la fetch API\n  if (typeof config === 'string') {\n    config = arguments[1] || {};\n    config.url = arguments[0];\n  } else {\n    config = config || {};\n  }\n\n  config = mergeConfig(this.defaults, config);\n\n  // Set config.method\n  if (config.method) {\n    config.method = config.method.toLowerCase();\n  } else if (this.defaults.method) {\n    config.method = this.defaults.method.toLowerCase();\n  } else {\n    config.method = 'get';\n  }\n\n  // Hook up interceptors middleware\n  var chain = [dispatchRequest, undefined];\n  var promise = Promise.resolve(config);\n\n  this.interceptors.request.forEach(function unshiftRequestInterceptors(interceptor) {\n    chain.unshift(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  this.interceptors.response.forEach(function pushResponseInterceptors(interceptor) {\n    chain.push(interceptor.fulfilled, interceptor.rejected);\n  });\n\n  while (chain.length) {\n    promise = promise.then(chain.shift(), chain.shift());\n  }\n\n  return promise;\n};\n\nAxios.prototype.getUri = function getUri(config) {\n  config = mergeConfig(this.defaults, config);\n  return buildURL(config.url, config.params, config.paramsSerializer).replace(/^\\?/, '');\n};\n\n// Provide aliases for supported request methods\nutils.forEach(['delete', 'get', 'head', 'options'], function forEachMethodNoData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: (config || {}).data\n    }));\n  };\n});\n\nutils.forEach(['post', 'put', 'patch'], function forEachMethodWithData(method) {\n  /*eslint func-names:0*/\n  Axios.prototype[method] = function(url, data, config) {\n    return this.request(mergeConfig(config || {}, {\n      method: method,\n      url: url,\n      data: data\n    }));\n  };\n});\n\nmodule.exports = Axios;\n","'use strict';\n\n/**\n * A `Cancel` is an object that is thrown when an operation is canceled.\n *\n * @class\n * @param {string=} message The message.\n */\nfunction Cancel(message) {\n  this.message = message;\n}\n\nCancel.prototype.toString = function toString() {\n  return 'Cancel' + (this.message ? ': ' + this.message : '');\n};\n\nCancel.prototype.__CANCEL__ = true;\n\nmodule.exports = Cancel;\n","'use strict';\n\nvar Cancel = require('./Cancel');\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @class\n * @param {Function} executor The executor function.\n */\nfunction CancelToken(executor) {\n  if (typeof executor !== 'function') {\n    throw new TypeError('executor must be a function.');\n  }\n\n  var resolvePromise;\n  this.promise = new Promise(function promiseExecutor(resolve) {\n    resolvePromise = resolve;\n  });\n\n  var token = this;\n  executor(function cancel(message) {\n    if (token.reason) {\n      // Cancellation has already been requested\n      return;\n    }\n\n    token.reason = new Cancel(message);\n    resolvePromise(token.reason);\n  });\n}\n\n/**\n * Throws a `Cancel` if cancellation has been requested.\n */\nCancelToken.prototype.throwIfRequested = function throwIfRequested() {\n  if (this.reason) {\n    throw this.reason;\n  }\n};\n\n/**\n * Returns an object that contains a new `CancelToken` and a function that, when called,\n * cancels the `CancelToken`.\n */\nCancelToken.source = function source() {\n  var cancel;\n  var token = new CancelToken(function executor(c) {\n    cancel = c;\n  });\n  return {\n    token: token,\n    cancel: cancel\n  };\n};\n\nmodule.exports = CancelToken;\n","'use strict';\n\n/**\n * Syntactic sugar for invoking a function and expanding an array for arguments.\n *\n * Common use case would be to use `Function.prototype.apply`.\n *\n *  ```js\n *  function f(x, y, z) {}\n *  var args = [1, 2, 3];\n *  f.apply(null, args);\n *  ```\n *\n * With `spread` this example can be re-written.\n *\n *  ```js\n *  spread(function(x, y, z) {})([1, 2, 3]);\n *  ```\n *\n * @param {Function} callback\n * @returns {Function}\n */\nmodule.exports = function spread(callback) {\n  return function wrap(arr) {\n    return callback.apply(null, arr);\n  };\n};\n","'use strict';\n\n/**\n * Determines whether the payload is an error thrown by Axios\n *\n * @param {*} payload The value to test\n * @returns {boolean} True if the payload is an error thrown by Axios, otherwise false\n */\nmodule.exports = function isAxiosError(payload) {\n  return (typeof payload === 'object') && (payload.isAxiosError === true);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar bind = require('./helpers/bind');\nvar Axios = require('./core/Axios');\nvar mergeConfig = require('./core/mergeConfig');\nvar defaults = require('./defaults');\n\n/**\n * Create an instance of Axios\n *\n * @param {Object} defaultConfig The default config for the instance\n * @return {Axios} A new instance of Axios\n */\nfunction createInstance(defaultConfig) {\n  var context = new Axios(defaultConfig);\n  var instance = bind(Axios.prototype.request, context);\n\n  // Copy axios.prototype to instance\n  utils.extend(instance, Axios.prototype, context);\n\n  // Copy context to instance\n  utils.extend(instance, context);\n\n  return instance;\n}\n\n// Create the default instance to be exported\nvar axios = createInstance(defaults);\n\n// Expose Axios class to allow class inheritance\naxios.Axios = Axios;\n\n// Factory for creating new instances\naxios.create = function create(instanceConfig) {\n  return createInstance(mergeConfig(axios.defaults, instanceConfig));\n};\n\n// Expose Cancel & CancelToken\naxios.Cancel = require('./cancel/Cancel');\naxios.CancelToken = require('./cancel/CancelToken');\naxios.isCancel = require('./cancel/isCancel');\n\n// Expose all/spread\naxios.all = function all(promises) {\n  return Promise.all(promises);\n};\naxios.spread = require('./helpers/spread');\n\n// Expose isAxiosError\naxios.isAxiosError = require('./helpers/isAxiosError');\n\nmodule.exports = axios;\n\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = axios;\n","module.exports = require('./lib/axios');","import { record } from \"rrweb\";\nimport axios from \"axios\";\n\nlet eventsBuffer = [];\n\nrecord({\n  emit(event) {\n    eventsBuffer.push(event);\n  },\n});\n\nlet { websiteId, apiUrl } = window.sessionRecorderConfig;\n\nfunction idenfityClient() {\n  return new Promise((resolve, reject) => {\n    const clientId = sessionStorage.getItem(\"clientId\");\n    if (clientId) {\n      resolve(clientId);\n    } else {\n      axios\n        .post(`${apiUrl}/api/clients`)\n        .then(({ data }) => {\n          sessionStorage.setItem(\"clientId\", data.clientId);\n          resolve(data.clientId);\n        })\n        .catch(reject);\n    }\n  });\n}\n\nfunction identifySession() {\n  return new Promise((resolve, reject) => {\n    axios\n      .get(\"https://api.ipify.org?format=json\")\n      .then(({ data }) => {\n        const ip = data.ip;\n        const sessionId = window.sessionId;\n        if (sessionId) {\n          resolve(sessionId);\n        } else {\n          // generate new session if doesnt' exist.\n          axios\n            .post(\n              `${apiUrl}/api/sessions`,\n              {\n                ip,\n                location: window.location,\n                clientId: sessionStorage.getItem(\"clientId\"),\n              },\n              { params: { websiteId } }\n            )\n            .then(({ data }) => {\n              window.sessionId = data._id;\n              resolve(data._id);\n            })\n            .catch(reject);\n        }\n      })\n      .catch(reject);\n  });\n}\n\nfunction save(sessionId, clientId) {\n  axios\n    .post(`${apiUrl}/api/sessions/${sessionId}/recordings`, {\n      events: eventsBuffer,\n      clientId,\n    })\n    .then((result) => {\n      // eventsBuffer = [];\n      console.log(\"Successfully Sent To Server\");\n    })\n    .catch((error) => {\n      console.log(\"Failure Sending.\");\n      console.error(error);\n    });\n}\n\ntry {\n  idenfityClient().then((clientId) => {\n    identifySession().then((sessionId) => {\n      setInterval(() => {\n        save(sessionId, clientId);\n      }, 5 * 1000);\n    });\n  });\n} catch (error) {\n  console.error(error);\n}\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}